/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e){return 0===(e=Math.round(e))?"var(--text-color)":e<=5?"var(--primary-color)":e<=15?"var(--yellow-color)":e<=25?"var(--secondary-color)":e<=35?"var(--maroon-color)":"var(--red-color)"}function t(e){return 0===(e=Math.round(e))?"var(--text-color)":e<=25?"var(--primary-color)":e<=55?"var(--teal-color)":e<=95?"var(--secondary-color)":e<=125?"var(--yellow-color)":e<=175?"var(--maroon-color)":"var(--red-color)"}function o(e){return(e=Math.round(e))>=176?"var(--teal-color)":e>=126?"var(--secondary-color)":e>=56?"var(--yellow-color)":e>=26?"var(--maroon-color)":e>0?"var(--red-color)":"var(--primary-color)"}function n(e){return 100===(e=Math.round(e))?"var(--gold2-color)":e>=80?"var(--primary-color)":e>=60?"var(--teal-color)":e>=40?"var(--yellow-color)":e>=21?"var(--secondary-color)":e>=1?"var(--maroon-color)":"var(--red-color)"}function i(e,t){return e.length>t?e.substring(0,t)+"...":e}function s(e){let t=e.toString();switch(t.length){case 3:return t="00"+t,t;case 4:return t="0"+t,t;default:return t}}function r({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class a{constructor(){}configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,o,n;return t=await this.getTokens(e),t?(n=t.accessToken?.payload?.sub,o=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:t,authenticated:!0,forceRefresh:e.forceRefresh}))):o=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:t,credentials:o?.credentials,identityId:o?.identityId,userSub:n}}async clearCredentials(){if(this.authOptions?.credentialsProvider)return await this.authOptions.credentialsProvider.clearCredentialsAndIdentityId()}async getTokens(e){return await(this.authOptions?.tokenProvider?.getTokens(e))??void 0}}var c;!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE"}(c||(c={}));const d={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};class u{constructor(e,t=c.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let o=this.level;if(u.LOG_LEVEL&&(o=u.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(o=window.LOG_LEVEL),!(d[e]>=d[o]))return;let n=console.log.bind(console);e===c.ERROR&&console.error&&(n=console.error.bind(console)),e===c.WARN&&console.warn&&(n=console.warn.bind(console));const i=`[${e}] ${this._ts()} ${this.name}`;let s="";if(1===t.length&&"string"==typeof t[0])s=`${i} - ${t[0]}`,n(s);else if(1===t.length)s=`${i} ${t[0]}`,n(i,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),s=`${i} - ${t[0]} ${e}`,n(`${i} - ${t[0]}`,e)}else s=`${i} ${t}`,n(i,t);for(const e of this._pluggables){const t={message:s,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(c.INFO,...e)}info(...e){this._log(c.INFO,...e)}warn(...e){this._log(c.WARN,...e)}error(...e){this._log(c.ERROR,...e)}debug(...e){this._log(c.DEBUG,...e)}verbose(...e){this._log(c.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}u.LOG_LEVEL=null;class l extends Error{constructor({message:e,name:t,recoverySuggestion:o,underlyingError:n}){super(e),this.name=t,this.underlyingError=n,this.recoverySuggestion=o,this.constructor=l,Object.setPrototypeOf(this,l.prototype)}}const p="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",h=new u("Hub");class g{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const o=this.listeners.get(e);o?this.listeners.set(e,[...o.filter((({callback:e})=>e!==t))]):h.warn(`No listeners for ${e}`)}dispatch(e,t,o,n){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&(n===p||h.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const i={channel:e,payload:{...t},source:o,patternInfo:[]};try{this._toListeners(i)}catch(e){h.error(e)}}listen(e,t,o="noname"){let n;if("function"!=typeof t)throw new l({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});n=t;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:o,callback:n}),()=>{this._remove(e,n)}}_toListeners(e){const{channel:t,payload:o}=e,n=this.listeners.get(t);n&&n.forEach((n=>{h.debug(`Dispatching to ${t} with `,o);try{n.callback(e)}catch(e){h.error(e)}}))}}const m=new g("__default__"),E=new g("internal-hub"),f=new u("parseAWSExports"),y={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},x=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new l({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:o,aws_appsync_graphqlEndpoint:n,aws_appsync_region:i,aws_bots_config:s,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:p,aws_cognito_signup_attributes:h,aws_cognito_social_providers:g,aws_cognito_username_attributes:m,aws_mandatory_sign_in:E,aws_mobile_analytics_app_id:x,aws_mobile_analytics_app_region:I,aws_user_files_s3_bucket:S,aws_user_files_s3_bucket_region:C,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:A,aws_user_pools_id:R,aws_user_pools_web_client_id:P,geo:T,oauth:b,predictions:N,aws_cloud_logic_custom:U,Notifications:_,modelIntrospection:k}=e,F={};x&&(F.Analytics={Pinpoint:{appId:x,region:I}});const{InAppMessaging:D,Push:M}=_??{};if(D?.AWSPinpoint||M?.AWSPinpoint){if(D?.AWSPinpoint){const{appId:e,region:t}=D.AWSPinpoint;F.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(M?.AWSPinpoint){const{appId:e,region:t}=M.AWSPinpoint;F.Notifications={...F.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(s)&&(F.Interactions={LexV1:Object.fromEntries(s.map((e=>[e.name,e])))}),n){const e=y[o];e||f.debug(`Invalid authentication type ${o}. Falling back to IAM.`),F.API={GraphQL:{endpoint:n,apiKey:t,region:i,defaultAuthMode:e??"iam"}},k&&(F.API.GraphQL.modelIntrospection=k)}const L=c?{status:c&&c.toLowerCase(),totpEnabled:d?.includes("TOTP")??!1,smsEnabled:d?.includes("SMS")??!1}:void 0,O=u?{minLength:u.passwordPolicyMinLength,requireLowercase:u.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:u.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:u.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:u.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,B=Array.from(new Set([...p??[],...h??[]])).reduce(((e,t)=>({...e,[t.toLowerCase()]:{required:!0}})),{}),q=m?.includes("EMAIL")??!1,V=m?.includes("PHONE_NUMBER")??!1;(r||R)&&(F.Auth={Cognito:{identityPoolId:r,allowGuestAccess:"enable"!==E,signUpVerificationMethod:a,userAttributes:B,userPoolClientId:P,userPoolId:R,mfa:L,passwordFormat:O,loginWith:{username:!q&&!V,email:q,phone:V}}});const K=!!b&&Object.keys(b).length>0,$=!!g&&g.length>0;if(F.Auth&&K&&(F.Auth.Cognito.loginWith={...F.Auth.Cognito.loginWith,oauth:{...w(b),...$&&{providers:v(g)}}}),S&&(F.Storage={S3:{bucket:S,region:C,dangerouslyConnectToHttpEndpointForTesting:A}}),T){const{amazon_location_service:e}=T;F.Geo=e?{LocationService:{...e,searchIndices:e.search_indices,region:e.region}}:{...T}}if(U&&(F.API={...F.API,REST:U.reduce(((e,t)=>{const{name:o,endpoint:n,region:i,service:s}=t;return{...e,[o]:{endpoint:n,...s?{service:s}:void 0,...i?{region:i}:void 0}}}),{})}),N){const{VoiceId:e}=N?.convert?.speechGenerator?.defaults??{};F.Predictions=e?{...N,convert:{...N.convert,speechGenerator:{...N.convert.speechGenerator,defaults:{voiceId:e}}}}:N}return F},I=e=>e?.split(",")??[],w=({domain:e,scope:t,redirectSignIn:o,redirectSignOut:n,responseType:i})=>({domain:e,scopes:t,redirectSignIn:I(o),redirectSignOut:I(n),responseType:i}),v=e=>e.map((e=>{const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)})),S=e=>{const t=Reflect.ownKeys(e);for(const o of t){const t=e[o];(t&&"object"==typeof t||"function"==typeof t)&&S(t)}return Object.freeze(e)},C=Symbol("oauth-listener"),A=new class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new a}configure(e,t){let o;o=Object.keys(e).some((e=>e.startsWith("aws_")))?x(e):e,this.resourcesConfig=o,t&&(this.libraryOptions=t),this.resourcesConfig=S(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),m.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",p),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[C](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}};function R(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)e[n]=o[n]}return e}var P,T=function e(t,o){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=R({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var r in i)i[r]&&(s+="; "+r,!0!==i[r]&&(s+="="+i[r].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var o=document.cookie?document.cookie.split("; "):[],n={},i=0;i<o.length;i++){var s=o[i].split("="),r=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(r,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",R({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,R({},this.attributes,t))},withConverter:function(t){return e(R({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class b{constructor(e={}){const{path:t,domain:o,expires:n,sameSite:i,secure:s}=e;if(this.domain=o,this.path=t||"/",this.expires=e.hasOwnProperty("expires")?n:365,this.secure=!e.hasOwnProperty("secure")||s,e.hasOwnProperty("sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){T.set(e,t,this.getData())}async getItem(e){return T.get(e)??null}async removeItem(e){T.remove(e,this.getData())}async clear(){const e=T.get(),t=Object.keys(e).map((e=>this.removeItem(e)));await Promise.all(t)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown"}(P||(P={}));class N extends l{constructor(){super({name:P.PlatformNotSupported,message:"Function not supported on current platform"})}}class U{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new N;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new N;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new N;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new N;this.storage.clear()}}class _{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const k=new class extends U{constructor(){super("undefined"!=typeof window&&window.localStorage?window.localStorage:new _)}},F=(new class extends U{constructor(){super("undefined"!=typeof window&&window.sessionStorage?window.sessionStorage:new _)}},new U(new _),(e,t=l)=>(o,n,i)=>{const{message:s,recoverySuggestion:r}=e[n];if(!o)throw new t({name:n,message:i?`${s} ${i}`:s,recoverySuggestion:r})});var D;!function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"}(D||(D={}));const M=F({[D.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[D.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[D.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[D.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[D.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}}),L=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new l({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},O={convert:e=>(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new l({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(e)};function B(e){let t=!0;return t=!!e&&!!e.userPoolId&&!!e.userPoolClientId,M(t,D.AuthUserPoolException)}function q(e){return M(!!(e?.loginWith?.oauth?.domain&&e?.loginWith?.oauth?.redirectSignOut&&e?.loginWith?.oauth?.redirectSignIn&&e?.loginWith?.oauth?.responseType),D.OAuthNotConfigureException)}function V(e){return M(!!e?.identityPoolId,D.InvalidIdentityPoolIdException)}function K(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(O.convert(o).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));return{toString:()=>e,payload:JSON.parse(n)}}catch(e){throw new Error("Invalid token payload")}}const $=(e,t,o,n)=>async(i,s)=>{const r={...n,...i},a=await r.endpointResolver(r,s),c=await t(s,a),d=await e(c,{...r});return await o(d)},H={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},G={partitions:[H,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},z=e=>{const{partitions:t}=G;for(const{regions:o,outputs:n,regionRegex:i}of t){const t=new RegExp(i);if(o.includes(e)||t.test(e))return n.dnsSuffix}return H.outputs.dnsSuffix},W=(e,t)=>{if(t?.aborted)return Promise.resolve();let o,n;const i=new Promise((t=>{n=t,o=setTimeout(t,e)}));return t?.addEventListener("abort",(function e(i){clearTimeout(o),t?.removeEventListener("abort",e),n()})),i},j=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},J=(e,t)=>(o,n)=>{const i={};let s=t=>e(t,n);for(let e=t.length-1;e>=0;e--)s=(0,t[e])(n)(s,i);return s(o)},Y=e=>{let t;return()=>(t||(t=e()),t)},Z=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Q=J((async({url:e,method:t,headers:o,body:n},{abortSignal:i,cache:s,withCrossDomainCredentials:r})=>{let a;try{a=await fetch(e,{method:t,headers:o,body:Z(t)?n:void 0,signal:i,cache:s,credentials:r?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new Error("Network error");throw e}const c={};return a.headers?.forEach(((e,t)=>{c[t.toLowerCase()]=e})),{statusCode:a.status,headers:c,body:null,body:Object.assign(a.body??{},{text:Y((()=>a.text())),blob:Y((()=>a.blob())),json:Y((()=>a.json()))})}}),[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>o=>async function(n){if(0===t.trim().length)return await o(n);{const i=e.toLowerCase();return n.headers[i]=n.headers[i]?`${n.headers[i]} ${t}`:t,await o(n)}},({maxAttempts:e=3,retryDecider:t,computeDelay:o,abortSignal:n})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,s)=>async function(r){let a,c,d=s.attemptsCount??0;const u=()=>{if(c)return j(c,d),c;throw j(a,d),a};for(;!n?.aborted&&d<e;){try{c=await i(r),a=void 0}catch(e){a=e,c=void 0}if(d=(s.attemptsCount??0)>d?s.attemptsCount??0:d+1,s.attemptsCount=d,!await t(c,a))return u();if(!n?.aborted&&d<e){const e=o(d);await W(e,n)}}if(n?.aborted)throw new Error("Request aborted.");return u()}}]),X=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],ee=e=>async(t,o)=>{const n=o??await e(t)??void 0,i=n?.code,s=t?.statusCode;return ie(o)||ne(s,i)||(e=>!!e&&X.includes(e))(i)||se(s,i)},te=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],oe=["TimeoutError","RequestTimeout","RequestTimeoutException"],ne=(e,t)=>429===e||!!t&&te.includes(t),ie=e=>"Network error"===e?.name,se=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&oe.includes(t),re=e=>{const{headers:t,statusCode:o}=e;return{...ae(e)?e.$metadata:{},httpStatusCode:o,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},ae=e=>"object"==typeof e?.$metadata,ce=async e=>{if(!e||e.statusCode<300)return;const t=await de(e),o=(e=>{const[t]=e.toString().split(/[\,\:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),n=t.message??t.Message??"Unknown error",i=new Error(n);return Object.assign(i,{name:o,$metadata:re(e)})},de=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:re(e)})},ue=3e5,le=e=>{const t=function(e=3e5){return t=>{const o=2**t*100+100*Math.random();return!(o>e)&&o}}(ue),o=t(e);return!1===o?ue:o},pe=URL;var he,ge,me,Ee,fe,ye,xe,Ie,we,ve,Se,Ce,Ae,Re;!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(he||(he={})),function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(ge||(ge={})),function(e){e.Record="1",e.IdentifyUser="2"}(me||(me={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(Ee||(Ee={})),(Re=fe||(fe={})).SignUp="1",Re.ConfirmSignUp="2",Re.ResendSignUpCode="3",Re.SignIn="4",Re.FetchMFAPreference="6",Re.UpdateMFAPreference="7",Re.SetUpTOTP="10",Re.VerifyTOTPSetup="11",Re.ConfirmSignIn="12",Re.DeleteUserAttributes="15",Re.DeleteUser="16",Re.UpdateUserAttributes="17",Re.FetchUserAttributes="18",Re.ConfirmUserAttribute="22",Re.SignOut="26",Re.UpdatePassword="27",Re.ResetPassword="28",Re.ConfirmResetPassword="29",Re.FederatedSignIn="30",Re.RememberDevice="32",Re.ForgetDevice="33",Re.FetchDevices="34",Re.SendUserAttributeVerificationCode="35",Re.SignInWithRedirect="36",function(e){e.Subscribe="1",e.GraphQl="2"}(ye||(ye={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(xe||(xe={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(Ie||(Ie={})),function(e){e.None="0"}(we||(we={})),function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(ve||(ve={})),function(e){e.Subscribe="1"}(Se||(Se={})),function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(Ce||(Ce={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"}(Ae||(Ae={}));const Pe="6.0.16",Te=()=>"undefined"!=typeof global,be=()=>"undefined"!=typeof window,Ne=()=>"undefined"!=typeof document,Ue=()=>"undefined"!=typeof process,_e=(e,t)=>!!Object.keys(e).find((e=>e.startsWith(t))),ke=[{platform:he.Expo,detectionMethod:function(){return Te()&&void 0!==global.expo}},{platform:he.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:he.NextJs,detectionMethod:function(){return be()&&window.next&&"object"==typeof window.next}},{platform:he.Nuxt,detectionMethod:function(){return be()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:he.Angular,detectionMethod:function(){const e=Boolean(Ne()&&document.querySelector("[ng-version]")),t=Boolean(be()&&void 0!==window.ng);return e||t}},{platform:he.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return Ne()&&Array.from(document.querySelectorAll("[id]")).some((t=>Object.keys(t).find(e)))}},{platform:he.VueJs,detectionMethod:function(){return be()&&_e(window,"__VUE")}},{platform:he.Svelte,detectionMethod:function(){return be()&&_e(window,"__SVELTE")}},{platform:he.WebUnknown,detectionMethod:function(){return be()}},{platform:he.NextJsSSR,detectionMethod:function(){return Te()&&(_e(global,"__next")||_e(global,"__NEXT"))}},{platform:he.NuxtSSR,detectionMethod:function(){return Te()&&void 0!==global.__NUXT_PATHS__}},{platform:he.ReactSSR,detectionMethod:function(){return Ue()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("react")))}},{platform:he.VueJsSSR,detectionMethod:function(){return Te()&&_e(global,"__VUE")}},{platform:he.AngularSSR,detectionMethod:function(){return Ue()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:he.SvelteSSR,detectionMethod:function(){return Ue()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("svelte")))}}];let Fe;const De=[];let Me=!1;const Le=()=>{if(!Fe){if(Fe=ke.find((e=>e.detectionMethod()))?.platform||he.ServerSideUnknown,Me)for(;De.length;)De.pop()?.();else De.forEach((e=>e()));Be(he.ServerSideUnknown,10),Be(he.WebUnknown,10)}return Fe},Oe=e=>{Me||De.push(e)};function Be(e,t){Fe!==e||Me||setTimeout((()=>{Fe=void 0,Me=!0,setTimeout(Le,1e3)}),t)}const qe={},Ve="aws-amplify";new class{constructor(){this.userAgent=`${Ve}/${Pe}`}get framework(){return Le()}get isReactNative(){return this.framework===he.ReactNative||this.framework===he.Expo}observeFrameworkChanges(e){Oe(e)}};const Ke=e=>(({category:e,action:t,framework:o}={})=>{const n=[[Ve,Pe]];if(e&&n.push([e,t]),n.push(["framework",Le()]),e&&t){const o=((e,t)=>qe[e]?.[t]?.additionalDetails)(e,t);o&&o.forEach((e=>{n.push(e)}))}return n})(e).map((([e,t])=>e&&t?`${e}/${t}`:e)).join(" "),$e="cognito-idp",He=J(Q,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Ge={service:$e,endpointResolver:({region:e})=>{const t=A.getConfig().Auth?.Cognito,o=t?.userPoolEndpoint,n=new pe(`https://${$e}.${e}.${z(e)}`);return{url:o?new pe(o):n}},retryDecider:ee(ce),computeDelay:le,userAgentValue:Ke(),cache:"no-store"};class ze extends l{constructor(e){super(e),this.constructor=ze,Object.setPrototypeOf(this,ze.prototype)}}function We(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new ze({name:P.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const je=e=>(t,o)=>{const n=(e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}))(e);return(({url:e},t,o)=>({headers:t,url:e,body:o,method:"POST"}))(o,n,JSON.stringify(t))},Je=()=>async e=>{if(e.statusCode>=300){const t=await ce(e);throw We(t),new ze({name:t.name,message:t.message})}return await de(e)},Ye=()=>async e=>{if(e.statusCode>=300){const t=await ce(e);throw We(t),new ze({name:t.name,message:t.message})}},Ze=$(He,je("InitiateAuth"),Je(),Ge),Qe=$(He,je("RevokeToken"),Je(),Ge),Xe=$(He,je("SignUp"),Je(),Ge),et=$(He,je("ConfirmSignUp"),Je(),Ge),tt=($(He,je("ForgotPassword"),Je(),Ge),$(He,je("ConfirmForgotPassword"),Je(),Ge),$(He,je("RespondToAuthChallenge"),Je(),Ge)),ot=($(He,je("ResendConfirmationCode"),Je(),Ge),$(He,je("VerifySoftwareToken"),Je(),Ge),$(He,je("AssociateSoftwareToken"),Je(),Ge)),nt=($(He,je("SetUserMFAPreference"),Je(),Ge),$(He,je("GetUser"),Je(),Ge),$(He,je("ChangePassword"),Je(),Ge),$(He,je("ConfirmDevice"),Je(),Ge)),it=($(He,je("ForgetDevice"),Ye(),Ge),$(He,je("DeleteUser"),Ye(),Ge),$(He,je("GetUserAttributeVerificationCode"),Je(),Ge),$(He,je("GlobalSignOut"),Je(),Ge));function st(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new ze({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function rt(e){if(!e||!e.includes(":"))throw new ze({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}$(He,je("UpdateUserAttributes"),Je(),Ge),$(He,je("VerifyUserAttribute"),Je(),Ge),$(He,je("UpdateDeviceStatus"),Je(),Ge),$(He,je("ListDevices"),Je(),Ge),$(He,je("DeleteUserAttributes"),Je(),Ge);const at="UserUnAuthenticatedException",ct="DeviceMetadataNotFoundException",dt="AutoSignInException",ut=new ze({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),lt=new ze({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});function pt(e){if(!e||!e.accessToken)throw new ze({name:at,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const ht=new ze({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),gt=new ze({name:at,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function mt(e){if(function(e){return yt(e)&&!e?.refreshToken}(e))throw ht;if(!function(e){return yt(e)&&e?.refreshToken}(e))throw gt}function Et(e){if(!(e&&e.deviceKey&&e.deviceGroupKey&&e.randomPassword))throw new ze({name:ct,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const ft={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function yt(e){return e?.accessToken||e?.idToken}function xt({username:e,userPoolId:t,userPoolClientId:o}){if("undefined"==typeof window)return;const n=window.AmazonCognitoAdvancedSecurityData;if(void 0===n)return;const i=n.getData(e,t,o);return i?{EncodedData:i}:{}}const It=(e=>{let t;return async(...e)=>t||(t=new Promise((async(o,n)=>{try{o(await(async({tokens:e,authConfig:t,username:o})=>{B(t?.Cognito);const n=st(t.Cognito.userPoolId);mt(e);const i=e.refreshToken,s={REFRESH_TOKEN:i};e.deviceMetadata?.deviceKey&&(s.DEVICE_KEY=e.deviceMetadata.deviceKey);const r=xt({username:o,userPoolId:t.Cognito.userPoolId,userPoolClientId:t.Cognito.userPoolClientId}),{AuthenticationResult:a}=await Ze({region:n},{ClientId:t?.Cognito?.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:s,UserContextData:r}),c=K(a?.AccessToken??""),d=a?.IdToken?K(a.IdToken):void 0,u=c.payload.iat;if(!u)throw new ze({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:c,idToken:d,clockDrift:1e3*u-(new Date).getTime(),refreshToken:i,username:o}})(...e))}catch(e){n(e)}finally{t=void 0}})),t)})(),wt={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var vt;!function(e){e.InvalidAuthTokens="InvalidAuthTokens"}(vt||(vt={}));const St=F({[vt.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}});class Ct{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new ze({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new ze({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const o=K(t),n=await this.getKeyValueStorage().getItem(e.idToken),i=n?K(n):void 0,s=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,r=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",a=Number.parseInt(r),c=await this.getKeyValueStorage().getItem(e.signInDetails),d={accessToken:o,idToken:i,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return c&&(d.signInDetails=JSON.parse(c)),d}catch(e){return null}}async storeTokens(e){St(void 0!==e,vt.InvalidAuthTokens),await this.clearTokens();const t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);const o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,e.accessToken.toString()),e.idToken&&await this.getKeyValueStorage().setItem(o.idToken,e.idToken.toString()),e.refreshToken&&await this.getKeyValueStorage().setItem(o.refreshToken,e.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails&&await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(e.signInDetails)),await this.getKeyValueStorage().setItem(o.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(e){const t=await this.getAuthKeys(e),o=await this.getKeyValueStorage().getItem(t.deviceKey),n=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i?{deviceKey:o??void 0,deviceGroupKey:n??void 0,randomPassword:i}:null}async clearDeviceMetadata(e){const t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){B(this.authConfig?.Cognito);const t=e??await this.getLastAuthUser();return At(this.name,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){B(this.authConfig?.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}const At=(e,t)=>Rt(wt)(`${e}`,t);function Rt(e){const t=Object.values({...e});return(e,o)=>t.reduce(((t,n)=>({...t,[n]:`${e}.${o}.${n}`})),{})}class Pt{constructor(){this.waitForInflightOAuth=async()=>{}}setAuthConfig(e){this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}setWaitForInflightOAuth(e){this.waitForInflightOAuth=e}getTokenStore(){if(!this.tokenStore)throw new ze({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new ze({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{B(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),t=await this.getTokenStore().loadTokens();const o=await this.getTokenStore().getLastAuthUser();if(null===t)return null;const n=!!t?.idToken&&r({expiresAt:1e3*(t.idToken?.payload?.exp??0),clockDrift:t.clockDrift??0}),i=r({expiresAt:1e3*(t.accessToken?.payload?.exp??0),clockDrift:t.clockDrift??0});return(e?.forceRefresh||n||i)&&(t=await this.refreshTokens({tokens:t,username:o}),null===t)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{const o=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return await this.setTokens({tokens:o}),m.dispatch("auth",{event:"tokenRefresh"},"Auth",p),o}catch(e){return this.handleErrors(e)}}handleErrors(e){if(We(e),"Network error"!==e.message&&this.clearTokens(),m.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",p),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}}const Tt=new class{constructor(){this.authTokenStore=new Ct,this.authTokenStore.setKeyValueStorage(k),this.tokenOrchestrator=new Pt,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(It)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setWaitForInflightOAuth(e){this.tokenOrchestrator.setWaitForInflightOAuth(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}},bt=Tt.tokenOrchestrator,Nt={identityId:"identityId"},Ut=new u("DefaultIdentityIdStore");Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var _t=64,kt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ft=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Dt=Math.pow(2,53)-1,Mt=function(){function e(){this.state=Int32Array.from(Ft),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,o=e.byteLength;if(this.bytesHashed+=o,8*this.bytesHashed>Dt)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=e[t++],o--,this.bufferLength===_t&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(t.setUint8(this.bufferLength++,128),o%_t>=56){for(var n=this.bufferLength;n<_t;n++)t.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(n=this.bufferLength;n<56;n++)t.setUint8(n,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(32);for(n=0;n<8;n++)i[4*n]=this.state[n]>>>24&255,i[4*n+1]=this.state[n]>>>16&255,i[4*n+2]=this.state[n]>>>8&255,i[4*n+3]=this.state[n]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,o=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],d=t[7],u=0;u<_t;u++){if(u<16)this.temp[u]=(255&e[4*u])<<24|(255&e[4*u+1])<<16|(255&e[4*u+2])<<8|255&e[4*u+3];else{var l=this.temp[u-2],p=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,h=((l=this.temp[u-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[u]=(p+this.temp[u-7]|0)+(h+this.temp[u-16]|0)}var g=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&a^~r&c)|0)+(d+(kt[u]+this.temp[u]|0)|0)|0,m=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&n^o&i^n&i)|0;d=c,c=a,a=r,r=s+g|0,s=i,i=n,n=o,o=g+m|0}t[0]+=o,t[1]+=n,t[2]+=i,t[3]+=s,t[4]+=r,t[5]+=a,t[6]+=c,t[7]+=d},e}(),Lt="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function Ot(e){return e instanceof Uint8Array?e:"string"==typeof e?Lt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var Bt=function(){function e(e){this.secret=e,this.hash=new Mt,this.reset()}return e.prototype.update=function(e){var t;if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(Ot(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return e=this,t=void 0,n=function(){return function(e,t){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(e){return[2,this.digestSync()]}))},new((o=void 0)||(o=Promise))((function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}));var e,t,o,n},e.prototype.reset=function(){if(this.hash=new Mt,this.secret){this.outer=new Mt;var e=function(e){var t=Ot(e);if(t.byteLength>_t){var o=new Mt;o.update(t),t=o.digest()}var n=new Uint8Array(_t);return n.set(t),n}(this.secret),t=new Uint8Array(_t);t.set(e);for(var o=0;o<_t;o++)e[o]^=54,t[o]^=92;for(this.hash.update(e),this.outer.update(t),o=0;o<e.byteLength;o++)e[o]=0}},e}();const qt={},Vt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),qt[e]=t,Vt[t]=e}const Kt=J(Q,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),$t={service:"cognito-identity",endpointResolver:({region:e})=>({url:new pe(`https://cognito-identity.${e}.${z(e)}`)}),retryDecider:ee(ce),computeDelay:le,userAgentValue:Ke(),cache:"no-store"};Oe((()=>{$t.userAgentValue=Ke()}));const Ht=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Gt=({url:e},t,o)=>({headers:t,url:e,body:o,method:"POST"}),zt=$(Kt,((e,t)=>{const o=Ht("GetId"),n=JSON.stringify(e);return Gt(t,o,n)}),(async e=>{if(e.statusCode>=300)throw await ce(e);return{IdentityId:(await de(e)).IdentityId,$metadata:re(e)}}),$t);function Wt(e){const t=K(e).payload.iss,o={};if(!t)throw new ze({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return o[t.replace(/(^\w+:|^)\/\//,"")]=e,o}const jt=new u("CognitoIdentityIdProvider");async function Jt(e,t){const o=t?.identityPoolId,n=rt(o),i=(await zt({region:n},{IdentityPoolId:o,Logins:e})).IdentityId;if(!i)throw new ze({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const Yt=({AccessKeyId:e,SecretKey:t,SessionToken:o,Expiration:n}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:o,Expiration:n&&new Date(1e3*n)}),Zt=$(Kt,((e,t)=>{const o=Ht("GetCredentialsForIdentity"),n=JSON.stringify(e);return Gt(t,o,n)}),(async e=>{if(e.statusCode>=300)throw await ce(e);{const t=await de(e);return{IdentityId:t.IdentityId,Credentials:Yt(t.Credentials),$metadata:re(e)}}}),$t),Qt=new u("CognitoCredentialsProvider"),Xt=3e6,eo=new class{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){Qt.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){Qt.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const t=e.authenticated,o=e.tokens,n=e.authConfig;try{V(n?.Cognito)}catch{return}if(!t&&!n.Cognito.allowGuestAccess)return;const i=e.forceRefresh,s=this.hasTokenChanged(o),r=await async function({tokens:e,authConfig:t,identityIdStore:o}){o.setAuthConfig({Cognito:t});let n=await o.loadIdentityId();if(e){if(n&&"primary"===n.type)return n.id;{const o=e.idToken?Wt(e.idToken.toString()):{},i=await Jt(o,t);n&&n.id===i&&jt.debug(`The guest identity ${n.id} has become the primary identity.`),n={id:i,type:"primary"}}}else{if(n&&"guest"===n.type)return n.id;n={id:await Jt({},t),type:"guest"}}return o.storeIdentityId(n),n.id}({tokens:o,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return(i||s)&&this.clearCredentials(),t?(function(e){if(!e||!e.idToken)throw new ze({name:at,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(o),this.credsForOIDCTokens(n.Cognito,o,r)):this.getGuestCredentials(r,n.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return Qt.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=rt(t.identityPoolId),n=await Zt({region:o},{IdentityId:e});if(n.Credentials&&n.Credentials.AccessKeyId&&n.Credentials.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+Xt;const t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e},o=n.IdentityId;return o&&(t.identityId=o,this._identityIdStore.storeIdentityId({id:o,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new ze({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,o){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return Qt.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const n=t.idToken?Wt(t.idToken.toString()):{},i=rt(e.identityPoolId),s=await Zt({region:i},{IdentityId:o,Logins:n});if(s.Credentials&&s.Credentials.AccessKeyId&&s.Credentials.SecretKey){const e={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:o};this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},this._nextCredentialsRefresh=(new Date).getTime()+Xt;const n=s.IdentityId;return n&&(e.identityId=n,this._identityIdStore.storeIdentityId({id:n,type:"primary"})),e}throw new ze({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}(new class{setAuthConfig(e){var t,o;V(e.Cognito),this.authConfig=e,this._authKeys=(t="Cognito",o=e.Cognito.identityPoolId,Rt(Nt)(`com.amplify.${t}`,o))}constructor(e){this._authKeys={},this.keyValueStorage=e}async loadIdentityId(){V(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const e=await this.keyValueStorage.getItem(this._authKeys.identityId);return e?{id:e,type:"guest"}:null}}catch(e){return Ut.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){V(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=e.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}(k)),to={configure(e,t){let o;return o=Object.keys(e).some((e=>e.startsWith("aws_")))?x(e):e,o.Auth?t?.Auth?A.configure(o,t):A.libraryOptions.Auth?t?(void 0!==t.ssr&&Tt.setKeyValueStorage(t.ssr?new b({sameSite:"lax"}):k),A.configure(o,{Auth:A.libraryOptions.Auth,...t})):void A.configure(o):(Tt.setAuthConfig(o.Auth),Tt.setKeyValueStorage(t?.ssr?new b({sameSite:"lax"}):k),A.configure(o,{...t,Auth:{tokenProvider:Tt,credentialsProvider:eo}})):A.configure(o,t)},getConfig:()=>A.getConfig()},oo=async()=>(async e=>{const t=e.getConfig().Auth?.Cognito;B(t);const o=await e.Auth.getTokens({forceRefresh:!1});pt(o);const{"cognito:username":n,sub:i}=o.idToken?.payload??{},s={username:n,userId:i},r=function(e){return e?.signInDetails}(o);return r&&(s.signInDetails=r),s})(A),no=e=>((e,t)=>e.Auth.fetchAuthSession(t))(A,e);var io,so;(so=io||(io={})).EmptySignInUsername="EmptySignInUsername",so.EmptySignInPassword="EmptySignInPassword",so.CustomAuthSignInPassword="CustomAuthSignInPassword",so.EmptySignUpUsername="EmptySignUpUsername",so.EmptySignUpPassword="EmptySignUpPassword",so.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",so.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",so.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",so.EmptyChallengeResponse="EmptyChallengeResponse",so.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",so.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",so.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",so.EmptyResetPasswordUsername="EmptyResetPasswordUsername",so.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",so.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",so.IncorrectMFAMethod="IncorrectMFAMethod",so.EmptyUpdatePassword="EmptyUpdatePassword";const ro={[io.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[io.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[io.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[io.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[io.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[io.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[io.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[io.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[io.EmptySignInPassword]:{message:"password is required to signIn"},[io.EmptySignInUsername]:{message:"username is required to signIn"},[io.EmptySignUpPassword]:{message:"password is required to signUp"},[io.EmptySignUpUsername]:{message:"username is required to signUp"},[io.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[io.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[io.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[io.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[io.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var ao,co,uo;function lo(e,t){const{message:o,recoverySuggestion:n}=ro[t];if(!e)throw new ze({name:t,message:o,recoverySuggestion:n})}function po(e){return Object.entries(e).map((([e,t])=>({Name:e,Value:t})))}!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"}(ao||(ao={})),(uo=co||(co={})).SignInException="SignInException",uo.OAuthSignInError="OAuthSignInException";const ho={convert(e,{urlSafe:t}={urlSafe:!1}){const o="string"==typeof e?e:function(e){return Array.from(e,(e=>String.fromCodePoint(e))).join("")}(e),n=(()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new l({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(o);return t?n.replace(/\+/g,"-").replace(/\//g,"_"):n}};function go(e,t){null!=e&&this.fromString(e,t)}function mo(){return new go(null,null)}let Eo;const fo="undefined"!=typeof navigator;fo&&"Microsoft Internet Explorer"===navigator.appName?(go.prototype.am=function(e,t,o,n,i,s){const r=32767&t,a=t>>15;for(;--s>=0;){let t=32767&this[e];const s=this[e++]>>15,c=a*t+s*r;t=r*t+((32767&c)<<15)+o[n]+(1073741823&i),i=(t>>>30)+(c>>>15)+a*s+(i>>>30),o[n++]=1073741823&t}return i},Eo=30):fo&&"Netscape"!==navigator.appName?(go.prototype.am=function(e,t,o,n,i,s){for(;--s>=0;){const s=t*this[e++]+o[n]+i;i=Math.floor(s/67108864),o[n++]=67108863&s}return i},Eo=26):(go.prototype.am=function(e,t,o,n,i,s){const r=16383&t,a=t>>14;for(;--s>=0;){let t=16383&this[e];const s=this[e++]>>14,c=a*t+s*r;t=r*t+((16383&c)<<14)+o[n]+i,i=(t>>28)+(c>>14)+a*s,o[n++]=268435455&t}return i},Eo=28),go.prototype.DB=Eo,go.prototype.DM=(1<<Eo)-1,go.prototype.DV=1<<Eo,go.prototype.FV=Math.pow(2,52),go.prototype.F1=52-Eo,go.prototype.F2=2*Eo-52;const yo=new Array;let xo,Io;for(xo="0".charCodeAt(0),Io=0;Io<=9;++Io)yo[xo++]=Io;for(xo="a".charCodeAt(0),Io=10;Io<36;++Io)yo[xo++]=Io;for(xo="A".charCodeAt(0),Io=10;Io<36;++Io)yo[xo++]=Io;function wo(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function vo(e,t){var o=yo[e.charCodeAt(t)];return null==o?-1:o}function So(e){var t=mo();return t.fromInt(e),t}function Co(e){var t,o=1;return 0!=(t=e>>>16)&&(e=t,o+=16),0!=(t=e>>8)&&(e=t,o+=8),0!=(t=e>>4)&&(e=t,o+=4),0!=(t=e>>2)&&(e=t,o+=2),0!=(t=e>>1)&&(e=t,o+=1),o}function Ao(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}Ao.prototype.convert=function(e){var t=mo();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(go.ZERO)>0&&this.m.subTo(t,t),t},Ao.prototype.revert=function(e){var t=mo();return e.copyTo(t),this.reduce(t),t},Ao.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var o=32767&e[t],n=o*this.mpl+((o*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[o=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Ao.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},Ao.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},go.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},go.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},go.prototype.fromString=function(e,t){let o;if(16===t)o=4;else if(8===t)o=3;else if(2===t)o=1;else if(32===t)o=5;else{if(4!==t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");o=2}this.t=0,this.s=0;let n=e.length,i=!1,s=0;for(;--n>=0;){const t=vo(e,n);t<0?"-"===e.charAt(n)&&(i=!0):(i=!1,0===s?this[this.t++]=t:s+o>this.DB?(this[this.t-1]|=(t&(1<<this.DB-s)-1)<<s,this[this.t++]=t>>this.DB-s):this[this.t-1]|=t<<s,s+=o,s>=this.DB&&(s-=this.DB))}this.clamp(),i&&go.ZERO.subTo(this,this)},go.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},go.prototype.dlShiftTo=function(e,t){let o;for(o=this.t-1;o>=0;--o)t[o+e]=this[o];for(o=e-1;o>=0;--o)t[o]=0;t.t=this.t+e,t.s=this.s},go.prototype.drShiftTo=function(e,t){for(let o=e;o<this.t;++o)t[o-e]=this[o];t.t=Math.max(this.t-e,0),t.s=this.s},go.prototype.lShiftTo=function(e,t){const o=e%this.DB,n=this.DB-o,i=(1<<n)-1;let s,r=Math.floor(e/this.DB),a=this.s<<o&this.DM;for(s=this.t-1;s>=0;--s)t[s+r+1]=this[s]>>n|a,a=(this[s]&i)<<o;for(s=r-1;s>=0;--s)t[s]=0;t[r]=a,t.t=this.t+r+1,t.s=this.s,t.clamp()},go.prototype.rShiftTo=function(e,t){t.s=this.s;const o=Math.floor(e/this.DB);if(o>=this.t)return void(t.t=0);const n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[o]>>n;for(let e=o+1;e<this.t;++e)t[e-o-1]|=(this[e]&s)<<i,t[e-o]=this[e]>>n;n>0&&(t[this.t-o-1]|=(this.s&s)<<i),t.t=this.t-o,t.clamp()},go.prototype.subTo=function(e,t){let o=0,n=0,i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]-e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n-=e[o],t[o++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[o++]=this.DV+n:n>0&&(t[o++]=n),t.t=o,t.clamp()},go.prototype.multiplyTo=function(e,t){const o=this.abs(),n=e.abs();let i=o.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+o.t]=o.am(0,n[i],t,i,0,o.t);t.s=0,t.clamp(),this.s!==e.s&&go.ZERO.subTo(t,t)},go.prototype.squareTo=function(e){for(var t=this.abs(),o=e.t=2*t.t;--o>=0;)e[o]=0;for(o=0;o<t.t-1;++o){var n=t.am(o,t[o],e,2*o,0,1);(e[o+t.t]+=t.am(o+1,2*t[o],e,2*o+1,n,t.t-o-1))>=t.DV&&(e[o+t.t]-=t.DV,e[o+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(o,t[o],e,2*o,0,1)),e.s=0,e.clamp()},go.prototype.divRemTo=function(e,t,o){var n=e.abs();if(n.t<=0)return;var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=o&&this.copyTo(o));null===o&&(o=mo());var s=mo(),r=this.s,a=e.s,c=this.DB-Co(n[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,o)):(n.copyTo(s),i.copyTo(o));const d=s.t,u=s[d-1];if(0===u)return;const l=u*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),p=this.FV/l,h=(1<<this.F1)/l,g=1<<this.F2;let m=o.t,E=m-d,f=null===t?mo():t;for(s.dlShiftTo(E,f),o.compareTo(f)>=0&&(o[o.t++]=1,o.subTo(f,o)),go.ONE.dlShiftTo(d,f),f.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--E>=0;){var y=o[--m]===u?this.DM:Math.floor(o[m]*p+(o[m-1]+g)*h);if((o[m]+=s.am(0,y,o,E,0,d))<y)for(s.dlShiftTo(E,f),o.subTo(f,o);o[m]<--y;)o.subTo(f,o)}null!==t&&(o.drShiftTo(d,t),r!==a&&go.ZERO.subTo(t,t)),o.t=d,o.clamp(),c>0&&o.rShiftTo(c,o),r<0&&go.ZERO.subTo(o,o)},go.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},go.prototype.addTo=function(e,t){let o=0,n=0,i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]+e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n+=e[o],t[o++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[o++]=n:n<-1&&(t[o++]=this.DV+n),t.t=o,t.clamp()},go.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else{if(4!==e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}let o,n=(1<<t)-1,i=!1,s="",r=this.t,a=this.DB-r*this.DB%t;if(r-- >0)for(a<this.DB&&(o=this[r]>>a)>0&&(i=!0,s=wo(o));r>=0;)a<t?(o=(this[r]&(1<<a)-1)<<t-a,o|=this[--r]>>(a+=this.DB-t)):(o=this[r]>>(a-=t)&n,a<=0&&(a+=this.DB,--r)),o>0&&(i=!0),i&&(s+=wo(o));return i?s:"0"},go.prototype.negate=function(){var e=mo();return go.ZERO.subTo(this,e),e},go.prototype.abs=function(){return this.s<0?this.negate():this},go.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var o=this.t;if(0!=(t=o-e.t))return this.s<0?-t:t;for(;--o>=0;)if(0!=(t=this[o]-e[o]))return t;return 0},go.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Co(this[this.t-1]^this.s&this.DM)},go.prototype.mod=function(e){var t=mo();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(go.ZERO)>0&&e.subTo(t,t),t},go.prototype.equals=function(e){return 0===this.compareTo(e)},go.prototype.add=function(e){var t=mo();return this.addTo(e,t),t},go.prototype.subtract=function(e){var t=mo();return this.subTo(e,t),t},go.prototype.multiply=function(e){var t=mo();return this.multiplyTo(e,t),t},go.prototype.divide=function(e){var t=mo();return this.divRemTo(e,t,null),t},go.prototype.modPow=function(e,t,o){let n,i=e.bitLength(),s=So(1),r=new Ao(t);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6;let a=new Array,c=3,d=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),n>1){const e=mo();for(r.sqrTo(a[1],e);c<=u;)a[c]=mo(),r.mulTo(e,a[c-2],a[c]),c+=2}let l,p,h=e.t-1,g=!0,m=mo();for(i=Co(e[h])-1;h>=0;){for(i>=d?l=e[h]>>i-d&u:(l=(e[h]&(1<<i+1)-1)<<d-i,h>0&&(l|=e[h-1]>>this.DB+i-d)),c=n;0==(1&l);)l>>=1,--c;if((i-=c)<0&&(i+=this.DB,--h),g)a[l].copyTo(s),g=!1;else{for(;c>1;)r.sqrTo(s,m),r.sqrTo(m,s),c-=2;c>0?r.sqrTo(s,m):(p=s,s=m,m=p),r.mulTo(m,a[l],s)}for(;h>=0&&0==(e[h]&1<<i);)r.sqrTo(s,m),p=s,s=m,m=p,--i<0&&(i=this.DB-1,--h)}var E=r.revert(s);return o(null,E),E},go.ZERO=So(0),go.ONE=So(1);const Ro={convert:e=>(new TextEncoder).encode(e)},Po={},To={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),Po[e]=t,To[t]=e}const bo=e=>{if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2){const n=e.slice(o,o+2).toLowerCase();if(!(n in To))throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`);t[o/2]=To[n]}return t},No=e=>{let t="";for(let o=0;o<e.byteLength;o++)t+=Po[e[o]];return t},Uo=e=>{const t=new Bt;t.update(e);const o=t.digestSync(),n=No(o);return new Array(64-n.length).join("0")+n},_o=e=>Uo(bo(e)),ko=/^[89a-f]/i,Fo=e=>{if(!(e instanceof go))throw new Error("Not a BigInteger");const t=e.compareTo(go.ZERO)<0;let o=e.abs().toString(16);if(o=o.length%2!=0?`0${o}`:o,o=ko.test(o)?`00${o}`:o,t){const e=o.split("").map((e=>{const t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");o=new go(e,16).add(go.ONE).toString(16),o.toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o};class Do{constructor(e,t){this.words=[];let o=e;o=this.words=o||[],this.sigBytes=void 0!==t?t:4*o.length}random(e){const t=[];for(let o=0;o<e;o+=4)t.push(L().getRandomValues(new Uint32Array(1))[0]);return new Do(t,e)}toString(){return function(e){const t=e.words,o=e.sigBytes,n=[];for(let e=0;e<o;e++){const o=t[e>>>2]>>>24-e%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")}(this)}}const Mo=e=>{const t=(new Do).random(e).toString();return bo(t)};class Lo{constructor({userPoolName:e,a:t,g:o,A:n,N:i}){this.encoder=Ro,this.userPoolName=e,this.a=t,this.g=o,this.A=n,this.N=i,this.k=new go(_o(`${Fo(i)}${Fo(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new ze({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new ze({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new ze({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=ho.convert(Mo(40));const o=`${e}${t}:${this.randomPassword}`,n=Uo(o),i=No(Mo(16));return this.saltToHashDevices=Fo(new go(i,16)),new Promise(((e,t)=>{this.g.modPow(new go(_o(this.saltToHashDevices+n),16),this.N,((o,n)=>{o?t(o):(this.verifierDevices=Fo(n),e())}))}))}async getPasswordAuthenticationKey({username:e,password:t,serverBValue:o,salt:n}){if(o.mod(this.N).equals(go.ZERO))throw new Error("B cannot be zero.");const i=(({A:e,B:t})=>{const o=new go(_o(Fo(e)+Fo(t)),16);if(o.equals(go.ZERO))throw new Error("U cannot be zero.");return o})({A:this.A,B:o}),s=`${this.userPoolName}${e}:${t}`,r=Uo(s),a=new go(_o(Fo(n)+r),16),c=await(async({a:e,g:t,k:o,x:n,B:i,N:s,U:r})=>new Promise(((a,c)=>{t.modPow(n,s,((t,d)=>{t?c(t):i.subtract(o.multiply(d)).modPow(e.add(r.multiply(n)),s,((e,t)=>{e?c(e):a(t.mod(s))}))}))})))({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:i}),d=this.encoder.convert("Caldera Derived Key"),u=this.encoder.convert(String.fromCharCode(1)),l=new Uint8Array(d.byteLength+u.byteLength);l.set(d,0),l.set(u,d.byteLength);const p=((e,t,o)=>{const n=new Bt(t);n.update(e);const i=n.digestSync(),s=new Bt(i);return s.update(o),s.digestSync().slice(0,16)})(bo(Fo(c)),bo(Fo(i)),l);return p}}const Oo=async e=>{const t=new go("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),o=new go("2",16),n=Bo(),i=await(async({a:e,g:t,N:o})=>new Promise(((n,i)=>{t.modPow(e,o,((e,t)=>{e?i(e):t.mod(o).equals(go.ZERO)?i(new Error("Illegal parameter. A mod N cannot be 0.")):n(t)}))})))({a:n,g:o,N:t});return new Lo({userPoolName:e,a:n,g:o,A:i,N:t})},Bo=()=>new go(No(Mo(128)),16),qo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ko=()=>{const e=new Date,t=Vo[e.getUTCDay()],o=qo[e.getUTCMonth()],n=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();return r<10&&(r=`0${r}`),`${t} ${o} ${n} ${i}:${s}:${r} UTC ${e.getUTCFullYear()}`},$o=({userPoolName:e,username:t,challengeParameters:o,dateNow:n,hkdf:i})=>{const s=Ro.convert(e),r=Ro.convert(t),a=Ho(o.SECRET_BLOCK),c=Ro.convert(n),d=new Uint8Array(s.byteLength+r.byteLength+a.byteLength+c.byteLength);d.set(s,0),d.set(r,s.byteLength),d.set(a,s.byteLength+r.byteLength),d.set(c,s.byteLength+r.byteLength+a.byteLength);const u=new Bt(i);u.update(d);const l=u.digestSync();return ho.convert(l)},Ho=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=O.convert(t),n=new Uint8Array(o.length);for(let e=0;e<o.length;++e)n[e]=o.charCodeAt(e);return n};var Go,zo,Wo,jo,Jo,Yo,Zo,Qo,Xo,en,tn,on,nn,sn,rn,an,cn,dn,un,ln,pn,hn,gn,mn;!function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"}(Go||(Go={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(zo||(zo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Wo||(Wo={})),function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(jo||(jo={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(Jo||(Jo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Yo||(Yo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Zo||(Zo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Qo||(Qo={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(Xo||(Xo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(en||(en={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(tn||(tn={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(on||(on={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(nn||(nn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"}(sn||(sn={})),function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(rn||(rn={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(an||(an={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(cn||(cn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(dn||(dn={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"}(un||(un={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(ln||(ln={})),function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(pn||(pn={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(hn||(hn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(gn||(gn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(mn||(mn={}));const En=(e=>{let t=e({username:void 0,challengeName:void 0,signInSession:void 0},{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:o=>{t=e(t,o)}}})(((e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return{username:void 0,challengeName:void 0,signInSession:void 0};default:return e}}));function fn(e){En.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function yn(){En.dispatch({type:"SET_INITIAL_STATE"})}const xn=(e,t)=>Ke({category:ge.Auth,action:e,...t}),In="userAttributes.";async function wn(e,t,o,n,i){const{userPoolClientId:s,userPoolId:r}=n,a={USERNAME:e,PASSWORD:t},c=await i.getDeviceMetadata(e);c&&c.deviceKey&&(a.DEVICE_KEY=c.deviceKey);const d={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:o,ClientId:s,UserContextData:xt({username:e,userPoolId:r,userPoolClientId:s})},u=await Ze({region:st(r),userAgentValue:xn(fe.SignIn)},d),l=u.ChallengeParameters?.USERNAME??u.ChallengeParameters?.USER_ID_FOR_SRP??e;return Fn(l),"DEVICE_SRP_AUTH"===u.ChallengeName?Sn({username:l,config:n,clientMetadata:o,session:u.Session,tokenOrchestrator:i}):u}async function vn(e,t,o,n){const{userPoolClientId:i,userPoolId:s}=o,r={USERNAME:e},a=await n.getDeviceMetadata(e);a&&a.deviceKey&&(r.DEVICE_KEY=a.deviceKey);const c={AuthFlow:"CUSTOM_AUTH",AuthParameters:r,ClientMetadata:t,ClientId:i,UserContextData:xt({username:e,userPoolId:s,userPoolClientId:i})},d=await Ze({region:st(s),userAgentValue:xn(fe.SignIn)},c),u=d.ChallengeParameters?.USERNAME??e;return Fn(u),"DEVICE_SRP_AUTH"===d.ChallengeName?Sn({username:u,config:o,clientMetadata:t,session:d.Session,tokenOrchestrator:n}):d}async function Sn({username:e,config:t,clientMetadata:o,session:n,tokenOrchestrator:i}){const s=t.userPoolId,r=t.userPoolClientId,a=await(i?.getDeviceMetadata(e));Et(a);const c=await Oo(a.deviceGroupKey),d={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r,ChallengeResponses:{USERNAME:e,SRP_A:c.A.toString(16),DEVICE_KEY:a.deviceKey},ClientMetadata:o,Session:n},{ChallengeParameters:u,Session:l}=await tt({region:st(s)},d);return async function(e,t,o,n,i,{userPoolId:s,userPoolClientId:r},a){const c=await(a?.getDeviceMetadata(e));Et(c);const d=new go(t?.SRP_B,16),u=new go(t?.SALT,16),l=c.deviceKey,p=c.deviceGroupKey,h=await i.getPasswordAuthenticationKey({username:c.deviceKey,password:c.randomPassword,serverBValue:d,salt:u}),g=Ko(),m={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:{USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:$o({username:l,userPoolName:p,challengeParameters:t,dateNow:g,hkdf:h}),DEVICE_KEY:l},Session:n,ClientMetadata:o,UserContextData:xt({username:e,userPoolId:s,userPoolClientId:r})};return tt({region:st(s)},m)}(e,u,o,l,c,t,i)}async function Cn(e,t,o,n,i,s,r){const{userPoolId:a,userPoolClientId:c}=s,d=a?.split("_")[1]||"",u=new go(t?.SRP_B,16),l=new go(t?.SALT,16),p=t?.USER_ID_FOR_SRP;if(!p)throw new ze({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const h=await i.getPasswordAuthenticationKey({username:p,password:e,serverBValue:u,salt:l}),g=Ko(),m={USERNAME:p,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:$o({username:p,userPoolName:d,challengeParameters:t,dateNow:g,hkdf:h})},E=await r.getDeviceMetadata(p);E&&E.deviceKey&&(m.DEVICE_KEY=E.deviceKey);const f={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:m,ClientMetadata:o,Session:n,ClientId:c,UserContextData:xt({username:p,userPoolId:a,userPoolClientId:c})},y=await tt({region:st(a)},f);return"DEVICE_SRP_AUTH"===y.ChallengeName?Sn({username:p,config:s,clientMetadata:o,session:y.Session,tokenOrchestrator:r}):y}async function An(e){const{challengeName:t,challengeParameters:o}=e,n=A.getConfig().Auth?.Cognito;switch(B(n),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:o}};case"MFA_SETUP":const{signInSession:e,username:t}=En.getState();if(!function(e,t){const{MFAS_CAN_SETUP:o}=e,n=Nn(Un(o));return!!n&&n.includes("TOTP")}(o))throw new ze({name:co.SignInException,message:`Cannot initiate MFA setup from available types: ${Nn(Un(o.MFAS_CAN_SETUP))}`});const{Session:i,SecretCode:s}=await ot({region:st(n.userPoolId)},{Session:e});return En.dispatch({type:"SET_SIGN_IN_SESSION",value:i}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Rn(s,t)}};case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:Tn(o.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:Nn(Un(o.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new ze({name:co.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function Rn(e,t){return{sharedSecret:e,getSetupUri:(o,n)=>new pe(`otpauth://totp/${o}:${n??t}?secret=${e}&issuer=${o}`)}}function Pn(e){return e===rn.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===rn.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function Tn(e){return e?JSON.parse(e).map((e=>e.includes(In)?e.replace(In,""):e)):[]}function bn(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":void 0}function Nn(e){if(e)return e.map(bn).filter(Boolean)}function Un(e){return e?JSON.parse(e):[]}async function _n(e,t,o){if(!t)return;const n=e.split("_")[1]||"",i=await Oo(n),s=t?.DeviceKey,r=t?.DeviceGroupKey;try{await i.generateHashDevice(r??"",s??"")}catch(e){return}const a={Salt:ho.convert(bo(i.getSaltToHashDevices())),PasswordVerifier:ho.convert(bo(i.getVerifierDevices()))},c=i.getRandomPassword();try{return await nt({region:st(e)},{AccessToken:o,DeviceKey:t?.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:s,deviceGroupKey:r,randomPassword:c}}catch(e){return}}async function kn(e,t,o,n){try{return await e(...t)}catch(i){if(i instanceof ze&&"ResourceNotFoundException"===i.name&&i.message.includes("Device does not exist."))return await n.clearDeviceMetadata(o),await e(...t);throw i}}function Fn(e){const{dispatch:t}=En;t({type:"SET_USERNAME",value:e})}function Dn(e){return En.getState().username??e}async function Mn(e){if(!e.AccessToken)throw new l({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"});{const t=K(e.AccessToken),o=1e3*(t.payload.iat||0),n=(new Date).getTime(),i=o>0?o-n:0;let s,r,a;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=K(e.IdToken)),e?.NewDeviceMetadata&&(a=e.NewDeviceMetadata);const c={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:a,username:e.username};e?.signInDetails&&(c.signInDetails=e.signInDetails),await bt.setTokens({tokens:c})}}async function Ln(e){const t=e.options?.authFlowType;switch(await async function(){let e;try{e=await oo()}catch(e){}if(e&&e.userId&&e.username)throw new ze({name:"UserAlreadyAuthenticatedException",message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}(),t){case"USER_SRP_AUTH":default:return async function(e){const{username:t,password:o}=e,n=A.getConfig().Auth?.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};B(n);const s=e.options?.clientMetadata;lo(!!t,io.EmptySignInUsername),lo(!!o,io.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:r,AuthenticationResult:a,Session:c}=await async function(e,t,o,n,i){const{userPoolId:s,userPoolClientId:r}=n,a=s?.split("_")[1]||"",c=await Oo(a),d={AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16)},ClientMetadata:o,ClientId:r,UserContextData:xt({username:e,userPoolId:s,userPoolClientId:r})},u=await Ze({region:st(s),userAgentValue:xn(fe.SignIn)},d),{ChallengeParameters:l,Session:p}=u,h=l?.USERNAME??e;return Fn(h),kn(Cn,[t,l,o,p,c,n,i],h,i)}(t,o,s,n,bt),d=Dn(t);return fn({signInSession:c,username:d,challengeName:e,signInDetails:i}),a?(yn(),await Mn({username:d,...a,NewDeviceMetadata:await _n(n.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:i}),m.dispatch("auth",{event:"signedIn",data:await oo()},"Auth",p),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):An({challengeName:e,challengeParameters:r})}catch(e){yn(),We(e);const t=Pn(e.name);if(t)return t;throw e}}(e);case"USER_PASSWORD_AUTH":return async function(e){const{username:t,password:o,options:n}=e,i=A.getConfig().Auth?.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};B(i);const r=n?.clientMetadata;lo(!!t,io.EmptySignInUsername),lo(!!o,io.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:a,Session:c}=await kn(wn,[t,o,r,i,bt],t,bt),d=Dn(t);return fn({signInSession:c,username:d,challengeName:e,signInDetails:s}),a?(await Mn({...a,username:d,NewDeviceMetadata:await _n(i.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:s}),yn(),m.dispatch("auth",{event:"signedIn",data:await oo()},"Auth",p),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):An({challengeName:e,challengeParameters:n})}catch(e){yn(),We(e);const t=Pn(e.name);if(t)return t;throw e}}(e);case"CUSTOM_WITHOUT_SRP":return async function(e){const t=A.getConfig().Auth?.Cognito;B(t);const{username:o,password:n,options:i}=e,s={loginId:o,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i?.clientMetadata;lo(!!o,io.EmptySignInUsername),lo(!n,io.CustomAuthSignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:i,Session:a}=await kn(vn,[o,r,t,bt],o,bt),c=Dn(o);return fn({signInSession:a,username:c,challengeName:e,signInDetails:s}),i?(yn(),await Mn({username:c,...i,NewDeviceMetadata:await _n(t.userPoolId,i.NewDeviceMetadata,i.AccessToken),signInDetails:s}),m.dispatch("auth",{event:"signedIn",data:await oo()},"Auth",p),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):An({challengeName:e,challengeParameters:n})}catch(e){yn(),We(e);const t=Pn(e.name);if(t)return t;throw e}}(e);case"CUSTOM_WITH_SRP":return async function(e){const{username:t,password:o,options:n}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=A.getConfig().Auth?.Cognito;B(s);const r=n?.clientMetadata;lo(!!t,io.EmptySignInUsername),lo(!!o,io.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:a,Session:c}=await async function(e,t,o,n,i){B(n);const{userPoolId:s,userPoolClientId:r}=n,a=s?.split("_")[1]||"",c=await Oo(a),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16),CHALLENGE_NAME:"SRP_A"},ClientMetadata:o,ClientId:r,UserContextData:xt({username:e,userPoolId:s,userPoolClientId:r})},{ChallengeParameters:u,Session:l}=await Ze({region:st(s),userAgentValue:xn(fe.SignIn)},d),p=u?.USERNAME??e;return Fn(p),kn(Cn,[t,u,o,l,c,n,i],p,i)}(t,o,r,s,bt),d=Dn(t);return fn({signInSession:c,username:d,challengeName:e,signInDetails:i}),a?(await Mn({username:d,...a,NewDeviceMetadata:await _n(s.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:i}),yn(),m.dispatch("auth",{event:"signedIn",data:await oo()},"Auth",p),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):An({challengeName:e,challengeParameters:n})}catch(e){yn(),We(e);const t=Pn(e.name);if(t)return t;throw e}}(e)}}const On=async()=>{throw new ze({name:dt,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})};let Bn=null;function qn(e){Bn=e}function Vn(){Bn=On}const Kn=18e4;function $n(e,t){let o;return function(n){o||e(...n),clearTimeout(o),o=setTimeout((()=>{o=void 0}),t)}}const Hn=$n((function(e,t,o){const n=Date.now(),i=setInterval((async()=>{if(Date.now()-n>Kn)return clearInterval(i),Yn(!1),o(new ze({name:dt,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),void Vn();try{const o=await Ln(e);if("CONFIRM_SIGN_UP"!==o.nextStep.signInStep)return t(o),clearInterval(i),Yn(!1),void Vn()}catch(e){clearInterval(i),Yn(!1),o(e),Vn()}}),5e3)}),300),Gn=$n((async function(e,t,o){try{t(await Ln(e)),Vn()}catch(e){o(e),Vn()}}),300);let zn,Wn=!1;function jn(e){zn=e}function Jn(){return Wn}function Yn(e){!1===e&&jn(void 0),Wn=e}function Zn(e){return!!e.UserConfirmed}function Qn(e){return async()=>new Promise((async(t,o)=>{Gn([e,t,o])}))}const Xn=Qn;async function ei(e){const{username:t,password:o,options:n}=e,i=A.getConfig().Auth?.Cognito,s=i?.signUpVerificationMethod??"code",{clientMetadata:r,validationData:a,autoSignIn:c}=e.options??{};B(i),lo(!!t,io.EmptySignUpUsername),lo(!!o,io.EmptySignUpPassword);const d="boolean"!=typeof c?c:void 0,u={username:t,options:d};"CUSTOM_WITHOUT_SRP"!==d?.authFlowType&&(u.password=o),(d||!0===c)&&(jn(t),Yn(!0));const l=await Xe({region:st(i.userPoolId),userAgentValue:xn(fe.SignUp)},{Username:t,Password:o,UserAttributes:n?.userAttributes&&po(n?.userAttributes),ClientMetadata:r,ValidationData:a&&po(a),ClientId:i.userPoolClientId}),{UserSub:p,CodeDeliveryDetails:h}=l;if(Zn(l)&&Jn())return qn(Xn(u)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}};if(Zn(l)&&!Jn())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Zn(l)&&Jn()&&"code"===s)!function(e){const t=E.listen("auth-internal",(async({payload:o})=>{if("confirmSignUp"===o.event){const n=o.data;n?.isSignUpComplete&&(E.dispatch("auth-internal",{event:"autoSignIn"}),qn(Qn(e)),t())}})),o=setTimeout((()=>{t(),Yn(!1),clearTimeout(o),Vn()}),Kn)}(u);else if(!Zn(l)&&Jn()&&"link"===s)return qn(function(e){return async()=>new Promise((async(t,o)=>{Hn([e,t,o])}))}(u)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:h?.DeliveryMedium,destination:h?.Destination,attributeName:h?.AttributeName}},userId:p};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:h?.DeliveryMedium,destination:h?.Destination,attributeName:h?.AttributeName}},userId:p}}function ti(){return A.Auth.clearCredentials()}const oi=e=>e.startsWith(String(window.location.origin+window.location.pathname??"/")),ni=e=>e.includes(String(window.location.hostname)),ii=e=>e.startsWith("http://"),si=e=>e.startsWith("https://"),ri=async(e,t)=>{const{isOAuthSignIn:o}=await t.loadOAuthSignIn();if(await(async e=>{await e.clearOAuthData(),bt.clearTokens(),await ti(),m.dispatch("auth",{event:"signedOut"},"Auth",p)})(t),o)return(async(e,t=!1)=>{q(e);const{loginWith:o,userPoolClientId:n}=e,{domain:i,redirectSignOut:s}=o.oauth,r=function(e){const t=e?.find(oi)??e?.find(ni),o=e?.find(si)??e?.find(ii);if(t)return t;if(o)throw lt;throw ut}(s);return(async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))})(`https://${i}/logout?${Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map((([e,t])=>`${e}=${t}`)).join("&")}`)})(e)},ai="amplify-signin-with-hostedUI",ci="CognitoIdentityServiceProvider";class di{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){B(this.cognitoConfig);const e=ui(ci,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){B(this.cognitoConfig);const e=ui(ci,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(ai),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){B(this.cognitoConfig);const e=ui(ci,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){B(this.cognitoConfig);const t=ui(ci,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){B(this.cognitoConfig);const e=ui(ci,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){B(this.cognitoConfig);const t=ui(ci,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){B(this.cognitoConfig);const e=ui(ci,this.cognitoConfig.userPoolClientId);return"true"===await this.keyValueStorage.getItem(e.inflightOAuth)}async storeOAuthInFlight(e){B(this.cognitoConfig);const t=ui(ci,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){B(this.cognitoConfig);const e=ui(ci,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(ai),[o,n]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===o||"true"===t,preferPrivateSession:"true"===n}}async storeOAuthSignIn(e,t=!1){B(this.cognitoConfig);const o=ui(ci,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.setItem(o.oauthSignIn,`${e},${t}`)}}const ui=(e,t)=>Rt(ft)(e,t),li=new u("Auth");const pi=e=>!!e?.payload?.origin_jti;to.configure({Auth:{Cognito:{userPoolId:"us-west-2_98u65X5GV",userPoolClientId:"28eomo5pfl4tsavbn9rha1t3tn"}}});const hi=to.getConfig();console.log(hi);const gi=window.matchMedia("(max-width: 375px)"),mi=document.querySelector(".top-cont"),Ei=document.querySelector(".courses"),fi=document.querySelector(".add-new"),yi=document.querySelector(".addC-modal"),xi=document.getElementById("addCourseBtn"),Ii=document.getElementById("addCourseName"),wi=document.getElementById("addTotalHours"),vi=document.getElementById("addCurrHours"),Si=document.getElementById("addProgress"),Ci=document.querySelector(".jump-down"),Ai=document.querySelector(".sort-icon"),Ri=document.getElementById("sortCriteria"),Pi=document.getElementById("ascend-icon"),Ti=document.getElementById("descend-icon"),bi=document.querySelector(".modal-edit"),Ni=document.getElementById("courseNameE"),Ui=document.getElementById("totalHoursE"),_i=document.getElementById("totalHoursC"),ki=document.getElementById("percentCompE"),Fi=document.getElementById("editCourseBtn"),Di=document.getElementById("toggle-completed"),Mi=document.getElementById("displayType"),Li=document.getElementById("colorScheme"),Oi=document.querySelector(".login"),Bi=document.querySelector(".authd"),qi=document.querySelector(".authdUser"),Vi=document.querySelector(".modal-login"),Ki=document.querySelector(".code-wrapper"),$i=document.querySelector(".logout-icon"),Hi=document.querySelector(".cloud-icon"),Gi=document.querySelector(".close"),zi=document.querySelector(".closeEdit"),Wi=document.querySelector(".closeLogin"),ji=document.querySelector(".ultra-cont"),Ji=document.querySelector(".message-cont"),Yi=document.querySelector(".addLink"),Zi=document.querySelector(".sampleLink"),Qi=document.querySelector(".current-hours"),Xi=document.querySelector(".all-hours"),es=document.querySelector(".remaining-hours"),ts=document.querySelector(".completion-percent"),os=document.querySelector(".remaining-percent"),ns=document.getElementById("pieChart"),is=document.querySelector(".pie-label"),ss=document.getElementById("columnChart");let rs={courses:[],displayCourses:[],hiddenCourses:[],currentEdit:null,showCompleted:!0,total:0,colors:"dark",sortCriteria:"percent",ascending:!0,id:0,verified:!1,currentUser:"",token:""};function as(){!async function(){try{const{username:e,userId:t}=await oo();console.log(`Username: ${e}`),console.log(`User Id: ${t}`),rs.currentUser=e,rs.verified=!0,console.log(rs.currentUser,rs.verified),async function(){try{const{accessToken:e,idToken:t}=(await no()).tokens??{};console.log(t),console.log(t.payload.email),console.log(`access token: ${e}`),rs.token=e,rs.currentUser=t.payload.email}catch(e){console.log(e)}}()}catch(e){console.log(e)}}(),setTimeout((()=>{rs.verified?(Oi.style.display="none",Hi.style.display="flex",Bi.style.display="block",qi.textContent=i(rs.currentUser,14)):(Oi.style.display="block",Hi.style.display="none",Bi.style.display="none")}),2e3)}as(),Oi.addEventListener("click",(()=>(Vi.style.display="block",document.querySelector(".regBtn").addEventListener("click",(e=>{e.preventDefault(),async function({email:e,password:t}){try{const{isSignUpComplete:o,userId:n,nextStep:i}=await ei({username:e,password:t,options:{userAttributes:{email:e}}});console.log(n),function(e){const t=document.getElementById("confirmation-codes");Ki.style.display="block",t.innerHTML="";for(let e=0;e<6;e++){const e=document.createElement("input");e.type="text",e.maxLength="1",e.classList.add("code-input"),t.appendChild(e)}t.querySelectorAll(".code-input")[0].focus(),function(e){const t=document.querySelectorAll(".code-input");t.forEach(((o,n)=>{o.addEventListener("keyup",(i=>{if(i.key.match(/[^0-9]/))o.value="";else if(""!==o.value&&n<t.length-1&&t[n+1].focus(),Array.from(t).every((e=>""!==e.value))){const o=Array.from(t).map((e=>e.value)).join("");!async function({user:e,confCode:t}){console.log(e,t);try{const{isSignUpComplete:o,nextStep:n}=await async function(e){const{username:t,confirmationCode:o,options:n}=e,i=A.getConfig().Auth?.Cognito;B(i);const{userPoolId:s,userPoolClientId:r}=i,a=n?.clientMetadata;lo(!!t,io.EmptyConfirmSignUpUsername),lo(!!o,io.EmptyConfirmSignUpCode);const c=xt({username:t,userPoolId:s,userPoolClientId:r});return await et({region:st(i.userPoolId),userAgentValue:xn(fe.ConfirmSignUp)},{Username:t,ConfirmationCode:o,ClientMetadata:a,ForceAliasCreation:n?.forceAliasCreation,ClientId:i.userPoolClientId,UserContextData:c}),new Promise(((e,o)=>{try{const o={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Jn()||!function(e){return zn===e}(t))return e(o);const n=E.listen("auth-internal",(({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),Yn(!1),n())}));E.dispatch("auth-internal",{event:"confirmSignUp",data:o})}catch(e){o(e)}}))}({username:e,confirmationCode:t});console.log("Code accepted!"),Ki.innerHTML="",Ki.textContent="Success! Click to Login"}catch(e){console.log("Error",e)}}({user:e,confCode:o})}}))}))}(e)}(e)}catch(e){console.log(e)}}({email:document.getElementById("emailText").value,password:document.getElementById("passwordText").value})})),void document.querySelector(".loginBtn").addEventListener("click",(e=>{e.preventDefault(),async function({email:e,password:t}){const o=e;try{const{isSignedIn:e,nextStep:n}=await Ln({username:o,password:t});console.log(`${o} signed in!`),Vi.style.display="none",rs.verified=!0,as(),xs()}catch(e){console.log("Error",e)}}({email:document.getElementById("emailText").value,password:document.getElementById("passwordText").value})}))))),$i.addEventListener("click",(()=>async function(){try{await async function(e){const t=A.getConfig().Auth?.Cognito;let o;B(t),e?.global?await async function(e){try{const t=await bt.getTokenStore().loadTokens();pt(t),await it({region:st(e.userPoolId),userAgentValue:xn(fe.SignOut)},{AccessToken:t.accessToken.toString()})}catch(e){li.debug("Global signOut error caught but will proceed with token removal")}}(t):await async function(e){try{const t=await bt.getTokenStore().loadTokens();mt(t),pi(t.accessToken)&&await Qe({region:st(e.userPoolId),userAgentValue:xn(fe.SignOut)},{ClientId:e.userPoolClientId,Token:t.refreshToken})}catch(e){li.debug("Client signOut error caught but will proceed with token removal")}}(t);try{q(t),o=!0}catch(e){o=!1}if(o){const e=new di(k);e.setAuthConfig(t);const{type:o}=await ri(t,e)??{};if("error"===o)throw new ze({name:"OAuthSignOutException",message:"An error occurred when attempting to log out from OAuth provider."})}else bt.clearTokens(),await ti(),m.dispatch("auth",{event:"signedOut"},"Auth",p)}(),console.log("Signed out"),Oi.style.display="block",Hi.style.display="none",Bi.style.display="none",xs()}catch(e){console.log("Error signing out")}}()));class cs{constructor(e,t,o){this.name=e,this.id=function(){const e=rs.id+1;return rs.id=e,e}(),this.totalHours=t,this.progress=o,rs.courses.push(this),rs.displayCourses.push(this),rs.total+=t}completedHours(){return Math.round(this.progress/100*this.totalHours*100)/100}remainingHours(){return Math.round(100*(this.totalHours-this.completedHours()))/100}percent(){return(this.completedHours()/rs.total*100).toFixed(2)}percentOfTotal(){return(this.totalHours/rs.total*100).toFixed(2)}}class ds extends cs{constructor(e,t,o){super(e,t,o),vs()}render(){this.progressColor=n(this.progress),this.colorR=e(this.remainingHours()),this.element=document.createElement("div"),this.element.className="course-line",100===this.progress&&(this.element.style.backgroundColor="var(--highlight-color)",this.complete=!0),this.element.innerHTML=`\n    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="minus-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg>\n    <div class="course-details">\n     <div class="detail-text"><div class="text1"> <span style="color: ${this.complete?"var(--text-color)":this.progressColor};">${this.progress}%</span> of the ${this.totalHours}-hour ${this.name} course has been completed, which is roughly ${this.completedHours()} hours.</div><div class="text2"> <span style="color: ${this.complete?"var(--text-color)":this.colorR};">${this.remainingHours().toFixed(2)}</span> hours remain for this course.\n    </div></div></div>\n    <div class="course-percent-text">${this.percent()}% completed out of ${this.percentOfTotal()}% of the entire courseload</div>\n    <div class="course-actions">\n      <button class="reset-button">Reset</button>\n      <button class="edit-button">Edit</button>\n    </div>\n  `}renderSimple(){this.progressColor=n(this.progress),this.colorR=e(this.remainingHours()),this.colorC=e(this.completedHours()),this.element=document.createElement("div"),this.simplePerc=function(e){let t=e.toString();switch(t.length){case 1:return t+="&nbsp;&nbsp;",t;case 2:return t+="&nbsp;",t;default:return t}}(this.progress),this.simpleCompleted=s(this.completedHours().toFixed(2)),this.simpleRemaining=s(this.remainingHours().toFixed(2)),this.element.className="course-line",100===this.progress&&(this.element.style.backgroundColor="var(--highlight-color)",this.complete=!0),this.element.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="minus-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg><div class="name-small">${i(this.name,19)}</div>\n    <div class="course-details alternate">\n    <div class="detail-simple">\n    <div class="nameBox">${this.name}</div>\n    <div class="percBox"><span style="color: ${this.complete?"var(--text-color)":this.progressColor};">${this.simplePerc}%</span></div>\n    <div class="currBox"><span style="color: ${this.complete?"var(--text-color)":this.colorC};">${this.simpleCompleted}</span>&nbsp;&nbsp;&nbsp;hours completed</div>\n    <div class="remBox"><span style="color: ${this.complete?"var(--text-color)":this.colorR};">${this.simpleRemaining}</span>&nbsp;&nbsp;&nbsp;hours remaining</div>\n    \n    </div></div>\n    <div class="course-percent">${this.percent()} / ${this.percentOfTotal()} %</div>\n    <div class="course-percent-small">${this.percent()}% out of ${this.percentOfTotal()}% of total</div>\n    <div class="course-actions">\n    <button class="reset-button">Reset</button>\n    <button class="edit-button">Edit</button>\n  </div>\n    `}delete(){var e,t;this.element.remove(),e=this.id,t=this.totalHours,rs.total-=t,rs.courses=rs.courses.filter((t=>t.id!==e)),rs.displayCourses=rs.displayCourses.filter((t=>t.id!==e)),rs.hiddenCourses=rs.hiddenCourses.filter((t=>t.id!==e)),0===rs.courses.length&&ws(),ms()}}class us{constructor(e){e.courses.length>=3&&(this.total=e.total,this.sortedCourses=[...e.courses].sort(((e,t)=>{const o=e.completedHours()/this.total*100;return t.completedHours()/this.total*100-o})),this.numberOfCourses=this.sortedCourses.length,this.thickness=Math.max(100/(2*this.numberOfCourses),5),this.render())}render(){ss.innerHTML='<span id="chartText" class="chart-text">Hours Completed</span>',gi.matches?this.columnHoriz(this.sortedCourses,this.thickness):this.columnVert(this.sortedCourses,this.thickness)}columnHoriz(e,t){console.log("horz"),ss.classList.remove("column-chart"),ss.classList.add("column-chartH"),e.forEach((e=>{const n=document.createElement("div"),i=document.createElement("div"),s=e.completedHours()/this.total*100;n.classList.add("column"),n.style.width=`${s}%`,n.style.height=`${t}%`,n.style.backgroundColor=o(s),i.classList.add("column-labelH"),i.textContent=e.name,n.appendChild(i),n.addEventListener("mouseenter",(()=>Cs(e.id))),ss.appendChild(n)}))}columnVert(e,n){const i=document.getElementById("chartText");ss.classList.remove("column-chartH"),ss.classList.add("column-chart"),e.forEach((e=>{const s=document.createElement("div"),r=document.createElement("div"),a=e.completedHours()/this.total*100;s.classList.add("column"),s.style.height=`${a}%`,s.style.width=`${n}%`,s.style.backgroundColor=o(a),r.classList.add("column-label"),r.textContent=function(e){const t=e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("").match(/[A-Z]/g)||[];return t.length>=2?t.slice(0,3).join(""):e.substring(0,4)}(e.name),s.appendChild(r),s.addEventListener("mouseenter",(()=>{Cs(e.id),s.style.backgroundColor=t(a)})),s.addEventListener("mouseleave",(()=>s.style.backgroundColor=o(a))),ss.addEventListener("mouseleave",(()=>i.textContent="Hours Completed")),ss.appendChild(s)}))}}function ls(){Ei.innerHTML="";const e=document.getElementById("displayType").value;let t;"basic-display"===e?t=e=>e.renderSimple():"text-display"===e&&(t=e=>e.render()),rs.displayCourses.forEach((e=>{t(e);const o=document.createElement("li");o.appendChild(e.element);const n=o.querySelector(".minus-icon");o.querySelector(".reset-button").addEventListener("click",(()=>{var t;ys(t=e.id,rs.courses),ys(t,rs.displayCourses),ys(t,rs.hiddenCourses),ms()})),o.querySelector(".edit-button").addEventListener("click",(()=>{!function(e){rs.currentEdit=e;const t=rs.courses.find((t=>t.id===e));Ni.value=t.name,Ui.value=t.totalHours,_i.value=t.completedHours(),ki.value=t.progress,bi.style.display="block",ki.addEventListener("input",(function(){const e=Math.round(this.value/100*Ui.value*100)/100;_i.value=e})),_i.addEventListener("input",(function(){const e=Math.round(this.value/Ui.value*100*100)/100;ki.value=e}))}(e.id)})),n.addEventListener("click",(()=>{e.delete(),console.log(rs.courses,rs.displayCourses)})),Ei.appendChild(o)})),Ss()}function ps(){rs.ascending?(Pi.style.display="none",Ti.style.display="inline"):(Pi.style.display="inline",Ti.style.display="none")}function hs(){gs(rs.courses),gs(rs.displayCourses),gs(rs.hiddenCourses),ms()}function gs(e){const t=Ri.value;e.sort(((e,o)=>{let n,i;return"progress"===t?(n=e.progress,i=o.progress):(n=e.remainingHours(),i=o.remainingHours()),rs.ascending?n-i:i-n}))}function ms(){rs.showCompleted?(rs.hiddenCourses.forEach((e=>{rs.displayCourses.push(e)})),rs.hiddenCourses=[]):(rs.displayCourses.forEach((e=>{100===e.progress&&rs.hiddenCourses.push(e)})),rs.displayCourses=rs.displayCourses.filter((e=>100!==e.progress))),ls()}function Es(e){e.matches?yi.classList.add("small-modal"):yi.classList.remove("small-modal")}function fs(){yi.style.display="block",Si.addEventListener("input",(function(){const e=Math.round(this.value/100*wi.value*100)/100;vi.value=e})),vi.addEventListener("input",(function(){const e=Math.round(this.value/wi.value*100*100)/100;Si.value=e}))}function ys(e,t){rs.currentEdit=e;const o=t.find((t=>t.id===e));o&&(o.progress=0)}function xs(){Ii.value="",wi.value="",vi.value="",Si.value="",Ni.value="",Ui.value="",_i.value="",ki.value="",document.getElementById("emailText").value="",document.getElementById("passwordText").value=""}async function Is(){try{const{accessToken:e,idToken:t}=(await no()).tokens??{};let o=e,n=t;return console.log(`current access token: ${o}`),console.log(rs.currentUser,n.payload.email),rs.currentUser===n.payload.email?(console.log("Auth check passed"),!0):(console.log("Auth check failed"),!1)}catch(e){console.log(e)}}function ws(){ji.classList.add("sampler"),ns.style.display="none",Ji.style.display="flex",mi.style.marginBottom="0rem",gi.removeEventListener("change",Es),yi.classList.remove("small-modal")}function vs(){ji.classList.remove("sampler"),ns.style.display="flex",Ji.style.display="none",gi.addEventListener("change",Es),Es(gi)}function Ss(){let e=0,i=0,s=0,r=0;rs.courses.forEach((e=>{r+=e.completedHours(),s+=e.remainingHours()})),0!==r&&(e=Math.round(r/rs.total*1e4)/100,i=100-e),Qi.textContent=r.toFixed(2),Xi.textContent=rs.total.toFixed(2),es.textContent=s.toFixed(2),ts.textContent=`${e.toFixed(2)}`,os.textContent=`${i.toFixed(2)}`,Qi.style.color=t(rs.total),Xi.style.color=o(r),es.style.color=t(s),ts.style.color=n(e),os.style.color=n(i),function(e,t){const o=e/100*360,i=n(e),s=n(t);ns.style.setProperty("--percent",`${o}deg`),ns.style.setProperty("--color",i),ns.style.setProperty("--color2",s),is.textContent=`${e} %`}(e,i),rs.courses.length>=3&&new us(rs)}function Cs(e){const o=rs.courses.find((t=>t.id===e)),i=document.getElementById("chartText");i.innerHTML="";const s=document.createElement("span");s.textContent=`   (${o.percent()}%)`,s.style.color=n(o.percent());const r=document.createElement("span");r.textContent=` -  ${o.completedHours()} hours`,r.style.color=t(o.completedHours()),i.textContent=`${o.name}`,i.appendChild(r),i.appendChild(s)}Mi.addEventListener("change",ls),Ai.addEventListener("click",(()=>{rs.ascending=!rs.ascending,hs(),ps()})),Ri.addEventListener("change",(()=>{hs(),ps()})),Di.addEventListener("click",(()=>{rs.showCompleted=!rs.showCompleted,Di.className=rs.showCompleted?"fas fa-toggle-on":"fas fa-toggle-off",ms()})),Li.addEventListener("change",(()=>{document.body.classList.remove("dark"),document.body.classList.remove("simple"),document.body.classList.remove("colorful");let e=Li.value;document.body.classList.add(`${e}`)})),fi.addEventListener("click",(()=>fs())),Yi.addEventListener("click",(()=>fs())),Ci.addEventListener("click",(()=>{ns.scrollIntoView({behavior:"smooth",block:"center"})})),xi.addEventListener("click",(()=>{const e=document.getElementById("addCourseName").value,t=Number(document.getElementById("addTotalHours").value),o=Number(document.getElementById("addProgress").value);o>=0&&o<=100&&""!==e&&t>0?(new ds(e,t,o),ms(),yi.style.display="none",xs(),console.log(rs.courses,rs.displayCourses)):o<0||o>100?(alert("Must enter a percentage from 0-100"),document.getElementById("addProgress").value="0"):""===e.trim()?alert("Must enter a course name"):alert("Must enter a value for total hours")})),Fi.addEventListener("click",(()=>{const e=Ni.value,t=Number(Ui.value),o=Number(ki.value);""!==e.trim()&&t>0&&o>=0&&o<=100?([rs.courses,rs.displayCourses,rs.hiddenCourses].forEach((n=>{!function(e,t,o,n,i){const s=e.findIndex((e=>e.id===t));-1!==s&&(e[s].name=o,e[s].totalHours=n,e[s].progress=i)}(n,rs.currentEdit,e,t,o)})),bi.style.display="none",ms()):o<0||o>100?(alert("Must enter a percentage from 0-100"),currentProgress.value="0"):""===e?alert("Must enter a course name"):t<=0&&alert("Must enter a value for total hours greater than 0")})),Gi.addEventListener("click",(()=>{yi.style.display="none",xs()})),zi.addEventListener("click",(()=>{bi.style.display="none",xs()})),Wi.addEventListener("click",(()=>{Vi.style.display="none",xs()})),window.onclick=e=>{e.target!==yi&&e.target!==bi&&e.target!==Vi||(yi.style.display="none",bi.style.display="none",Vi.style.display="none",xs())},Zi.addEventListener("click",(async()=>{if(console.log("click"),await Is()){const e=config.API_URL.replace("{id}",rs.currentUser);axios.get(e).then((e=>{const t=e.data.courses;console.log(t),t.forEach((e=>new ds(e.name,e.totalHours,e.progress))),console.log(rs.courses,rs.displayCourses),ms()})).catch((e=>{console.error("Error fetching courses:",e)})),vs()}else console.log("Authorization failed")})),Hi.addEventListener("click",(async()=>{if(await Is()){const e=config.API_PUT_URL.replace("{id}",rs.currentUser);console.log(rs.courses);const t=JSON.stringify(rs.courses);axios.put(e,t).then((e=>console.log("Success:",e.data))).catch((e=>console.error("Error:",e)))}else console.log("Authorization failed")})),ws(),Ss()})();