/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e){return 0===(e=Math.round(e))?"var(--text-color)":e<=5?"var(--primary-color)":e<=15?"var(--yellow-color)":e<=25?"var(--secondary-color)":e<=35?"var(--maroon-color)":"var(--red-color)"}function t(e){return 0===(e=Math.round(e))?"var(--text-color)":e<=25?"var(--primary-color)":e<=55?"var(--teal-color)":e<=95?"var(--secondary-color)":e<=125?"var(--yellow-color)":e<=175?"var(--maroon-color)":"var(--red-color)"}function o(e){return(e=Math.round(e))>=176?"var(--teal-color)":e>=126?"var(--secondary-color)":e>=56?"var(--yellow-color)":e>=26?"var(--maroon-color)":e>0?"var(--red-color)":"var(--primary-color)"}function n(e){return 100===(e=Math.round(e))?"var(--gold2-color)":e>=80?"var(--primary-color)":e>=60?"var(--teal-color)":e>=40?"var(--yellow-color)":e>=21?"var(--secondary-color)":e>=1?"var(--maroon-color)":"var(--red-color)"}function i(e,t){return e.length>t?e.substring(0,t)+"...":e}function s(e){let t=e.toString();switch(t.length){case 3:return t="00"+t,t;case 4:return t="0"+t,t;default:return t}}const r={API_URL:"https://nc2ituc9o9.execute-api.us-west-2.amazonaws.com/dev/users/{id}",API_TEST_URL:"https://nc2ituc9o9.execute-api.us-west-2.amazonaws.com/dev/users/test"};function a({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class c{constructor(){}configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,o,n;return t=await this.getTokens(e),t?(n=t.accessToken?.payload?.sub,o=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:t,authenticated:!0,forceRefresh:e.forceRefresh}))):o=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:t,credentials:o?.credentials,identityId:o?.identityId,userSub:n}}async clearCredentials(){if(this.authOptions?.credentialsProvider)return await this.authOptions.credentialsProvider.clearCredentialsAndIdentityId()}async getTokens(e){return await(this.authOptions?.tokenProvider?.getTokens(e))??void 0}}var d;!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE"}(d||(d={}));const u={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};class l{constructor(e,t=d.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let o=this.level;if(l.LOG_LEVEL&&(o=l.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(o=window.LOG_LEVEL),!(u[e]>=u[o]))return;let n=console.log.bind(console);e===d.ERROR&&console.error&&(n=console.error.bind(console)),e===d.WARN&&console.warn&&(n=console.warn.bind(console));const i=`[${e}] ${this._ts()} ${this.name}`;let s="";if(1===t.length&&"string"==typeof t[0])s=`${i} - ${t[0]}`,n(s);else if(1===t.length)s=`${i} ${t[0]}`,n(i,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),s=`${i} - ${t[0]} ${e}`,n(`${i} - ${t[0]}`,e)}else s=`${i} ${t}`,n(i,t);for(const e of this._pluggables){const t={message:s,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(d.INFO,...e)}info(...e){this._log(d.INFO,...e)}warn(...e){this._log(d.WARN,...e)}error(...e){this._log(d.ERROR,...e)}debug(...e){this._log(d.DEBUG,...e)}verbose(...e){this._log(d.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}l.LOG_LEVEL=null;class p extends Error{constructor({message:e,name:t,recoverySuggestion:o,underlyingError:n}){super(e),this.name=t,this.underlyingError=n,this.recoverySuggestion=o,this.constructor=p,Object.setPrototypeOf(this,p.prototype)}}const h="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",g=new l("Hub");class m{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const o=this.listeners.get(e);o?this.listeners.set(e,[...o.filter((({callback:e})=>e!==t))]):g.warn(`No listeners for ${e}`)}dispatch(e,t,o,n){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&(n===h||g.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const i={channel:e,payload:{...t},source:o,patternInfo:[]};try{this._toListeners(i)}catch(e){g.error(e)}}listen(e,t,o="noname"){let n;if("function"!=typeof t)throw new p({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});n=t;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:o,callback:n}),()=>{this._remove(e,n)}}_toListeners(e){const{channel:t,payload:o}=e,n=this.listeners.get(t);n&&n.forEach((n=>{g.debug(`Dispatching to ${t} with `,o);try{n.callback(e)}catch(e){g.error(e)}}))}}const E=new m("__default__"),f=new m("internal-hub"),y=new l("parseAWSExports"),x={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},I=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new p({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:o,aws_appsync_graphqlEndpoint:n,aws_appsync_region:i,aws_bots_config:s,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:h,aws_cognito_social_providers:g,aws_cognito_username_attributes:m,aws_mandatory_sign_in:E,aws_mobile_analytics_app_id:f,aws_mobile_analytics_app_region:I,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:C,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:A,aws_user_pools_id:T,aws_user_pools_web_client_id:R,geo:P,oauth:b,predictions:N,aws_cloud_logic_custom:U,Notifications:_,modelIntrospection:k}=e,F={};f&&(F.Analytics={Pinpoint:{appId:f,region:I}});const{InAppMessaging:D,Push:M}=_??{};if(D?.AWSPinpoint||M?.AWSPinpoint){if(D?.AWSPinpoint){const{appId:e,region:t}=D.AWSPinpoint;F.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(M?.AWSPinpoint){const{appId:e,region:t}=M.AWSPinpoint;F.Notifications={...F.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(s)&&(F.Interactions={LexV1:Object.fromEntries(s.map((e=>[e.name,e])))}),n){const e=x[o];e||y.debug(`Invalid authentication type ${o}. Falling back to IAM.`),F.API={GraphQL:{endpoint:n,apiKey:t,region:i,defaultAuthMode:e??"iam"}},k&&(F.API.GraphQL.modelIntrospection=k)}const L=c?{status:c&&c.toLowerCase(),totpEnabled:d?.includes("TOTP")??!1,smsEnabled:d?.includes("SMS")??!1}:void 0,O=u?{minLength:u.passwordPolicyMinLength,requireLowercase:u.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:u.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:u.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:u.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,B=Array.from(new Set([...l??[],...h??[]])).reduce(((e,t)=>({...e,[t.toLowerCase()]:{required:!0}})),{}),V=m?.includes("EMAIL")??!1,q=m?.includes("PHONE_NUMBER")??!1;(r||T)&&(F.Auth={Cognito:{identityPoolId:r,allowGuestAccess:"enable"!==E,signUpVerificationMethod:a,userAttributes:B,userPoolClientId:R,userPoolId:T,mfa:L,passwordFormat:O,loginWith:{username:!V&&!q,email:V,phone:q}}});const K=!!b&&Object.keys(b).length>0,$=!!g&&g.length>0;if(F.Auth&&K&&(F.Auth.Cognito.loginWith={...F.Auth.Cognito.loginWith,oauth:{...v(b),...$&&{providers:S(g)}}}),w&&(F.Storage={S3:{bucket:w,region:C,dangerouslyConnectToHttpEndpointForTesting:A}}),P){const{amazon_location_service:e}=P;F.Geo=e?{LocationService:{...e,searchIndices:e.search_indices,region:e.region}}:{...P}}if(U&&(F.API={...F.API,REST:U.reduce(((e,t)=>{const{name:o,endpoint:n,region:i,service:s}=t;return{...e,[o]:{endpoint:n,...s?{service:s}:void 0,...i?{region:i}:void 0}}}),{})}),N){const{VoiceId:e}=N?.convert?.speechGenerator?.defaults??{};F.Predictions=e?{...N,convert:{...N.convert,speechGenerator:{...N.convert.speechGenerator,defaults:{voiceId:e}}}}:N}return F},w=e=>e?.split(",")??[],v=({domain:e,scope:t,redirectSignIn:o,redirectSignOut:n,responseType:i})=>({domain:e,scopes:t,redirectSignIn:w(o),redirectSignOut:w(n),responseType:i}),S=e=>e.map((e=>{const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)})),C=e=>{const t=Reflect.ownKeys(e);for(const o of t){const t=e[o];(t&&"object"==typeof t||"function"==typeof t)&&C(t)}return Object.freeze(e)},A=Symbol("oauth-listener"),T=new class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new c}configure(e,t){let o;o=Object.keys(e).some((e=>e.startsWith("aws_")))?I(e):e,this.resourcesConfig=o,t&&(this.libraryOptions=t),this.resourcesConfig=C(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),E.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",h),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[A](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}};function R(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)e[n]=o[n]}return e}var P,b=function e(t,o){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=R({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var r in i)i[r]&&(s+="; "+r,!0!==i[r]&&(s+="="+i[r].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var o=document.cookie?document.cookie.split("; "):[],n={},i=0;i<o.length;i++){var s=o[i].split("="),r=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(r,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",R({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,R({},this.attributes,t))},withConverter:function(t){return e(R({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class N{constructor(e={}){const{path:t,domain:o,expires:n,sameSite:i,secure:s}=e;if(this.domain=o,this.path=t||"/",this.expires=e.hasOwnProperty("expires")?n:365,this.secure=!e.hasOwnProperty("secure")||s,e.hasOwnProperty("sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){b.set(e,t,this.getData())}async getItem(e){return b.get(e)??null}async removeItem(e){b.remove(e,this.getData())}async clear(){const e=b.get(),t=Object.keys(e).map((e=>this.removeItem(e)));await Promise.all(t)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown"}(P||(P={}));class U extends p{constructor(){super({name:P.PlatformNotSupported,message:"Function not supported on current platform"})}}class _{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new U;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new U;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new U;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new U;this.storage.clear()}}class k{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const F=new class extends _{constructor(){super("undefined"!=typeof window&&window.localStorage?window.localStorage:new k)}},D=(new class extends _{constructor(){super("undefined"!=typeof window&&window.sessionStorage?window.sessionStorage:new k)}},new _(new k),(e,t=p)=>(o,n,i)=>{const{message:s,recoverySuggestion:r}=e[n];if(!o)throw new t({name:n,message:i?`${s} ${i}`:s,recoverySuggestion:r})});var M;!function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"}(M||(M={}));const L=D({[M.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[M.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[M.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[M.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[M.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}}),O=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new p({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},B={convert:e=>(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new p({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(e)};function V(e){let t=!0;return t=!!e&&!!e.userPoolId&&!!e.userPoolClientId,L(t,M.AuthUserPoolException)}function q(e){return L(!!(e?.loginWith?.oauth?.domain&&e?.loginWith?.oauth?.redirectSignOut&&e?.loginWith?.oauth?.redirectSignIn&&e?.loginWith?.oauth?.responseType),M.OAuthNotConfigureException)}function K(e){return L(!!e?.identityPoolId,M.InvalidIdentityPoolIdException)}function $(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(B.convert(o).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));return{toString:()=>e,payload:JSON.parse(n)}}catch(e){throw new Error("Invalid token payload")}}const H=(e,t,o,n)=>async(i,s)=>{const r={...n,...i},a=await r.endpointResolver(r,s),c=await t(s,a),d=await e(c,{...r});return await o(d)},z={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},G={partitions:[z,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},W=e=>{const{partitions:t}=G;for(const{regions:o,outputs:n,regionRegex:i}of t){const t=new RegExp(i);if(o.includes(e)||t.test(e))return n.dnsSuffix}return z.outputs.dnsSuffix},j=(e,t)=>{if(t?.aborted)return Promise.resolve();let o,n;const i=new Promise((t=>{n=t,o=setTimeout(t,e)}));return t?.addEventListener("abort",(function e(i){clearTimeout(o),t?.removeEventListener("abort",e),n()})),i},J=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},Y=(e,t)=>(o,n)=>{const i={};let s=t=>e(t,n);for(let e=t.length-1;e>=0;e--)s=(0,t[e])(n)(s,i);return s(o)},Z=e=>{let t;return()=>(t||(t=e()),t)},Q=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),X=Y((async({url:e,method:t,headers:o,body:n},{abortSignal:i,cache:s,withCrossDomainCredentials:r})=>{let a;try{a=await fetch(e,{method:t,headers:o,body:Q(t)?n:void 0,signal:i,cache:s,credentials:r?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new Error("Network error");throw e}const c={};return a.headers?.forEach(((e,t)=>{c[t.toLowerCase()]=e})),{statusCode:a.status,headers:c,body:null,body:Object.assign(a.body??{},{text:Z((()=>a.text())),blob:Z((()=>a.blob())),json:Z((()=>a.json()))})}}),[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>o=>async function(n){if(0===t.trim().length)return await o(n);{const i=e.toLowerCase();return n.headers[i]=n.headers[i]?`${n.headers[i]} ${t}`:t,await o(n)}},({maxAttempts:e=3,retryDecider:t,computeDelay:o,abortSignal:n})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,s)=>async function(r){let a,c,d=s.attemptsCount??0;const u=()=>{if(c)return J(c,d),c;throw J(a,d),a};for(;!n?.aborted&&d<e;){try{c=await i(r),a=void 0}catch(e){a=e,c=void 0}if(d=(s.attemptsCount??0)>d?s.attemptsCount??0:d+1,s.attemptsCount=d,!await t(c,a))return u();if(!n?.aborted&&d<e){const e=o(d);await j(e,n)}}if(n?.aborted)throw new Error("Request aborted.");return u()}}]),ee=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],te=e=>async(t,o)=>{const n=o??await e(t)??void 0,i=n?.code,s=t?.statusCode;return se(o)||ie(s,i)||(e=>!!e&&ee.includes(e))(i)||re(s,i)},oe=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],ne=["TimeoutError","RequestTimeout","RequestTimeoutException"],ie=(e,t)=>429===e||!!t&&oe.includes(t),se=e=>"Network error"===e?.name,re=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&ne.includes(t),ae=e=>{const{headers:t,statusCode:o}=e;return{...ce(e)?e.$metadata:{},httpStatusCode:o,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},ce=e=>"object"==typeof e?.$metadata,de=async e=>{if(!e||e.statusCode<300)return;const t=await ue(e),o=(e=>{const[t]=e.toString().split(/[\,\:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),n=t.message??t.Message??"Unknown error",i=new Error(n);return Object.assign(i,{name:o,$metadata:ae(e)})},ue=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:ae(e)})},le=3e5,pe=e=>{const t=function(e=3e5){return t=>{const o=2**t*100+100*Math.random();return!(o>e)&&o}}(le),o=t(e);return!1===o?le:o},he=URL;var ge,me,Ee,fe,ye,xe,Ie,we,ve,Se,Ce,Ae,Te,Re;!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(ge||(ge={})),function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(me||(me={})),function(e){e.Record="1",e.IdentifyUser="2"}(Ee||(Ee={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(fe||(fe={})),(Re=ye||(ye={})).SignUp="1",Re.ConfirmSignUp="2",Re.ResendSignUpCode="3",Re.SignIn="4",Re.FetchMFAPreference="6",Re.UpdateMFAPreference="7",Re.SetUpTOTP="10",Re.VerifyTOTPSetup="11",Re.ConfirmSignIn="12",Re.DeleteUserAttributes="15",Re.DeleteUser="16",Re.UpdateUserAttributes="17",Re.FetchUserAttributes="18",Re.ConfirmUserAttribute="22",Re.SignOut="26",Re.UpdatePassword="27",Re.ResetPassword="28",Re.ConfirmResetPassword="29",Re.FederatedSignIn="30",Re.RememberDevice="32",Re.ForgetDevice="33",Re.FetchDevices="34",Re.SendUserAttributeVerificationCode="35",Re.SignInWithRedirect="36",function(e){e.Subscribe="1",e.GraphQl="2"}(xe||(xe={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(Ie||(Ie={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(we||(we={})),function(e){e.None="0"}(ve||(ve={})),function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(Se||(Se={})),function(e){e.Subscribe="1"}(Ce||(Ce={})),function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(Ae||(Ae={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"}(Te||(Te={}));const Pe="6.0.16",be=()=>"undefined"!=typeof global,Ne=()=>"undefined"!=typeof window,Ue=()=>"undefined"!=typeof document,_e=()=>"undefined"!=typeof process,ke=(e,t)=>!!Object.keys(e).find((e=>e.startsWith(t))),Fe=[{platform:ge.Expo,detectionMethod:function(){return be()&&void 0!==global.expo}},{platform:ge.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:ge.NextJs,detectionMethod:function(){return Ne()&&window.next&&"object"==typeof window.next}},{platform:ge.Nuxt,detectionMethod:function(){return Ne()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:ge.Angular,detectionMethod:function(){const e=Boolean(Ue()&&document.querySelector("[ng-version]")),t=Boolean(Ne()&&void 0!==window.ng);return e||t}},{platform:ge.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return Ue()&&Array.from(document.querySelectorAll("[id]")).some((t=>Object.keys(t).find(e)))}},{platform:ge.VueJs,detectionMethod:function(){return Ne()&&ke(window,"__VUE")}},{platform:ge.Svelte,detectionMethod:function(){return Ne()&&ke(window,"__SVELTE")}},{platform:ge.WebUnknown,detectionMethod:function(){return Ne()}},{platform:ge.NextJsSSR,detectionMethod:function(){return be()&&(ke(global,"__next")||ke(global,"__NEXT"))}},{platform:ge.NuxtSSR,detectionMethod:function(){return be()&&void 0!==global.__NUXT_PATHS__}},{platform:ge.ReactSSR,detectionMethod:function(){return _e()&&!!Object.keys("MISSING_ENV_VAR").find((e=>e.includes("react")))}},{platform:ge.VueJsSSR,detectionMethod:function(){return be()&&ke(global,"__VUE")}},{platform:ge.AngularSSR,detectionMethod:function(){return _e(),!1}},{platform:ge.SvelteSSR,detectionMethod:function(){return _e()&&!!Object.keys("MISSING_ENV_VAR").find((e=>e.includes("svelte")))}}];let De;const Me=[];let Le=!1;const Oe=()=>{if(!De){if(De=Fe.find((e=>e.detectionMethod()))?.platform||ge.ServerSideUnknown,Le)for(;Me.length;)Me.pop()?.();else Me.forEach((e=>e()));Ve(ge.ServerSideUnknown,10),Ve(ge.WebUnknown,10)}return De},Be=e=>{Le||Me.push(e)};function Ve(e,t){De!==e||Le||setTimeout((()=>{De=void 0,Le=!0,setTimeout(Oe,1e3)}),t)}const qe={},Ke="aws-amplify";new class{constructor(){this.userAgent=`${Ke}/${Pe}`}get framework(){return Oe()}get isReactNative(){return this.framework===ge.ReactNative||this.framework===ge.Expo}observeFrameworkChanges(e){Be(e)}};const $e=e=>(({category:e,action:t,framework:o}={})=>{const n=[[Ke,Pe]];if(e&&n.push([e,t]),n.push(["framework",Oe()]),e&&t){const o=((e,t)=>qe[e]?.[t]?.additionalDetails)(e,t);o&&o.forEach((e=>{n.push(e)}))}return n})(e).map((([e,t])=>e&&t?`${e}/${t}`:e)).join(" "),He="cognito-idp",ze=Y(X,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Ge={service:He,endpointResolver:({region:e})=>{const t=T.getConfig().Auth?.Cognito,o=t?.userPoolEndpoint,n=new he(`https://${He}.${e}.${W(e)}`);return{url:o?new he(o):n}},retryDecider:te(de),computeDelay:pe,userAgentValue:$e(),cache:"no-store"};class We extends p{constructor(e){super(e),this.constructor=We,Object.setPrototypeOf(this,We.prototype)}}function je(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new We({name:P.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const Je=e=>(t,o)=>{const n=(e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}))(e);return(({url:e},t,o)=>({headers:t,url:e,body:o,method:"POST"}))(o,n,JSON.stringify(t))},Ye=()=>async e=>{if(e.statusCode>=300){const t=await de(e);throw je(t),new We({name:t.name,message:t.message})}return await ue(e)},Ze=()=>async e=>{if(e.statusCode>=300){const t=await de(e);throw je(t),new We({name:t.name,message:t.message})}},Qe=H(ze,Je("InitiateAuth"),Ye(),Ge),Xe=H(ze,Je("RevokeToken"),Ye(),Ge),et=H(ze,Je("SignUp"),Ye(),Ge),tt=H(ze,Je("ConfirmSignUp"),Ye(),Ge),ot=(H(ze,Je("ForgotPassword"),Ye(),Ge),H(ze,Je("ConfirmForgotPassword"),Ye(),Ge),H(ze,Je("RespondToAuthChallenge"),Ye(),Ge)),nt=(H(ze,Je("ResendConfirmationCode"),Ye(),Ge),H(ze,Je("VerifySoftwareToken"),Ye(),Ge),H(ze,Je("AssociateSoftwareToken"),Ye(),Ge)),it=(H(ze,Je("SetUserMFAPreference"),Ye(),Ge),H(ze,Je("GetUser"),Ye(),Ge),H(ze,Je("ChangePassword"),Ye(),Ge),H(ze,Je("ConfirmDevice"),Ye(),Ge)),st=(H(ze,Je("ForgetDevice"),Ze(),Ge),H(ze,Je("DeleteUser"),Ze(),Ge),H(ze,Je("GetUserAttributeVerificationCode"),Ye(),Ge),H(ze,Je("GlobalSignOut"),Ye(),Ge));function rt(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new We({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function at(e){if(!e||!e.includes(":"))throw new We({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}H(ze,Je("UpdateUserAttributes"),Ye(),Ge),H(ze,Je("VerifyUserAttribute"),Ye(),Ge),H(ze,Je("UpdateDeviceStatus"),Ye(),Ge),H(ze,Je("ListDevices"),Ye(),Ge),H(ze,Je("DeleteUserAttributes"),Ye(),Ge);const ct="UserUnAuthenticatedException",dt="DeviceMetadataNotFoundException",ut="AutoSignInException",lt=new We({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),pt=new We({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),ht="OAuthSignOutException";function gt(e){if(!e||!e.accessToken)throw new We({name:ct,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const mt=new We({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),Et=new We({name:ct,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function ft(e){if(function(e){return It(e)&&!e?.refreshToken}(e))throw mt;if(!function(e){return It(e)&&e?.refreshToken}(e))throw Et}function yt(e){if(!(e&&e.deviceKey&&e.deviceGroupKey&&e.randomPassword))throw new We({name:dt,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const xt={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function It(e){return e?.accessToken||e?.idToken}function wt({username:e,userPoolId:t,userPoolClientId:o}){if("undefined"==typeof window)return;const n=window.AmazonCognitoAdvancedSecurityData;if(void 0===n)return;const i=n.getData(e,t,o);return i?{EncodedData:i}:{}}const vt=(e=>{let t;return async(...e)=>t||(t=new Promise((async(o,n)=>{try{o(await(async({tokens:e,authConfig:t,username:o})=>{V(t?.Cognito);const n=rt(t.Cognito.userPoolId);ft(e);const i=e.refreshToken,s={REFRESH_TOKEN:i};e.deviceMetadata?.deviceKey&&(s.DEVICE_KEY=e.deviceMetadata.deviceKey);const r=wt({username:o,userPoolId:t.Cognito.userPoolId,userPoolClientId:t.Cognito.userPoolClientId}),{AuthenticationResult:a}=await Qe({region:n},{ClientId:t?.Cognito?.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:s,UserContextData:r}),c=$(a?.AccessToken??""),d=a?.IdToken?$(a.IdToken):void 0,u=c.payload.iat;if(!u)throw new We({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:c,idToken:d,clockDrift:1e3*u-(new Date).getTime(),refreshToken:i,username:o}})(...e))}catch(e){n(e)}finally{t=void 0}})),t)})(),St={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var Ct;!function(e){e.InvalidAuthTokens="InvalidAuthTokens"}(Ct||(Ct={}));const At=D({[Ct.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}});class Tt{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new We({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new We({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const o=$(t),n=await this.getKeyValueStorage().getItem(e.idToken),i=n?$(n):void 0,s=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,r=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",a=Number.parseInt(r),c=await this.getKeyValueStorage().getItem(e.signInDetails),d={accessToken:o,idToken:i,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return c&&(d.signInDetails=JSON.parse(c)),d}catch(e){return null}}async storeTokens(e){At(void 0!==e,Ct.InvalidAuthTokens),await this.clearTokens();const t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);const o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,e.accessToken.toString()),e.idToken&&await this.getKeyValueStorage().setItem(o.idToken,e.idToken.toString()),e.refreshToken&&await this.getKeyValueStorage().setItem(o.refreshToken,e.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails&&await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(e.signInDetails)),await this.getKeyValueStorage().setItem(o.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(e){const t=await this.getAuthKeys(e),o=await this.getKeyValueStorage().getItem(t.deviceKey),n=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i?{deviceKey:o??void 0,deviceGroupKey:n??void 0,randomPassword:i}:null}async clearDeviceMetadata(e){const t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){V(this.authConfig?.Cognito);const t=e??await this.getLastAuthUser();return Rt(this.name,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){V(this.authConfig?.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}const Rt=(e,t)=>Pt(St)(`${e}`,t);function Pt(e){const t=Object.values({...e});return(e,o)=>t.reduce(((t,n)=>({...t,[n]:`${e}.${o}.${n}`})),{})}class bt{constructor(){this.waitForInflightOAuth=async()=>{}}setAuthConfig(e){this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}setWaitForInflightOAuth(e){this.waitForInflightOAuth=e}getTokenStore(){if(!this.tokenStore)throw new We({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new We({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{V(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),t=await this.getTokenStore().loadTokens();const o=await this.getTokenStore().getLastAuthUser();if(null===t)return null;const n=!!t?.idToken&&a({expiresAt:1e3*(t.idToken?.payload?.exp??0),clockDrift:t.clockDrift??0}),i=a({expiresAt:1e3*(t.accessToken?.payload?.exp??0),clockDrift:t.clockDrift??0});return(e?.forceRefresh||n||i)&&(t=await this.refreshTokens({tokens:t,username:o}),null===t)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{const o=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return await this.setTokens({tokens:o}),E.dispatch("auth",{event:"tokenRefresh"},"Auth",h),o}catch(e){return this.handleErrors(e)}}handleErrors(e){if(je(e),"Network error"!==e.message&&this.clearTokens(),E.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",h),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}}const Nt=new class{constructor(){this.authTokenStore=new Tt,this.authTokenStore.setKeyValueStorage(F),this.tokenOrchestrator=new bt,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(vt)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setWaitForInflightOAuth(e){this.tokenOrchestrator.setWaitForInflightOAuth(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}},Ut=Nt.tokenOrchestrator,_t={identityId:"identityId"},kt=new l("DefaultIdentityIdStore");Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var Ft=64,Dt=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Mt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Lt=Math.pow(2,53)-1,Ot=function(){function e(){this.state=Int32Array.from(Mt),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,o=e.byteLength;if(this.bytesHashed+=o,8*this.bytesHashed>Lt)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=e[t++],o--,this.bufferLength===Ft&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(t.setUint8(this.bufferLength++,128),o%Ft>=56){for(var n=this.bufferLength;n<Ft;n++)t.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(n=this.bufferLength;n<56;n++)t.setUint8(n,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(32);for(n=0;n<8;n++)i[4*n]=this.state[n]>>>24&255,i[4*n+1]=this.state[n]>>>16&255,i[4*n+2]=this.state[n]>>>8&255,i[4*n+3]=this.state[n]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,o=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],d=t[7],u=0;u<Ft;u++){if(u<16)this.temp[u]=(255&e[4*u])<<24|(255&e[4*u+1])<<16|(255&e[4*u+2])<<8|255&e[4*u+3];else{var l=this.temp[u-2],p=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,h=((l=this.temp[u-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[u]=(p+this.temp[u-7]|0)+(h+this.temp[u-16]|0)}var g=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&a^~r&c)|0)+(d+(Dt[u]+this.temp[u]|0)|0)|0,m=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&n^o&i^n&i)|0;d=c,c=a,a=r,r=s+g|0,s=i,i=n,n=o,o=g+m|0}t[0]+=o,t[1]+=n,t[2]+=i,t[3]+=s,t[4]+=r,t[5]+=a,t[6]+=c,t[7]+=d},e}(),Bt="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function Vt(e){return e instanceof Uint8Array?e:"string"==typeof e?Bt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var qt=function(){function e(e){this.secret=e,this.hash=new Ot,this.reset()}return e.prototype.update=function(e){var t;if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(Vt(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return e=this,t=void 0,n=function(){return function(e,t){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(e){return[2,this.digestSync()]}))},new((o=void 0)||(o=Promise))((function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}));var e,t,o,n},e.prototype.reset=function(){if(this.hash=new Ot,this.secret){this.outer=new Ot;var e=function(e){var t=Vt(e);if(t.byteLength>Ft){var o=new Ot;o.update(t),t=o.digest()}var n=new Uint8Array(Ft);return n.set(t),n}(this.secret),t=new Uint8Array(Ft);t.set(e);for(var o=0;o<Ft;o++)e[o]^=54,t[o]^=92;for(this.hash.update(e),this.outer.update(t),o=0;o<e.byteLength;o++)e[o]=0}},e}();const Kt={},$t={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),Kt[e]=t,$t[t]=e}const Ht=Y(X,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),zt={service:"cognito-identity",endpointResolver:({region:e})=>({url:new he(`https://cognito-identity.${e}.${W(e)}`)}),retryDecider:te(de),computeDelay:pe,userAgentValue:$e(),cache:"no-store"};Be((()=>{zt.userAgentValue=$e()}));const Gt=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Wt=({url:e},t,o)=>({headers:t,url:e,body:o,method:"POST"}),jt=H(Ht,((e,t)=>{const o=Gt("GetId"),n=JSON.stringify(e);return Wt(t,o,n)}),(async e=>{if(e.statusCode>=300)throw await de(e);return{IdentityId:(await ue(e)).IdentityId,$metadata:ae(e)}}),zt);function Jt(e){const t=$(e).payload.iss,o={};if(!t)throw new We({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return o[t.replace(/(^\w+:|^)\/\//,"")]=e,o}const Yt=new l("CognitoIdentityIdProvider");async function Zt(e,t){const o=t?.identityPoolId,n=at(o),i=(await jt({region:n},{IdentityPoolId:o,Logins:e})).IdentityId;if(!i)throw new We({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const Qt=({AccessKeyId:e,SecretKey:t,SessionToken:o,Expiration:n}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:o,Expiration:n&&new Date(1e3*n)}),Xt=H(Ht,((e,t)=>{const o=Gt("GetCredentialsForIdentity"),n=JSON.stringify(e);return Wt(t,o,n)}),(async e=>{if(e.statusCode>=300)throw await de(e);{const t=await ue(e);return{IdentityId:t.IdentityId,Credentials:Qt(t.Credentials),$metadata:ae(e)}}}),zt),eo=new l("CognitoCredentialsProvider"),to=3e6,oo=new class{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){eo.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){eo.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const t=e.authenticated,o=e.tokens,n=e.authConfig;try{K(n?.Cognito)}catch{return}if(!t&&!n.Cognito.allowGuestAccess)return;const i=e.forceRefresh,s=this.hasTokenChanged(o),r=await async function({tokens:e,authConfig:t,identityIdStore:o}){o.setAuthConfig({Cognito:t});let n=await o.loadIdentityId();if(e){if(n&&"primary"===n.type)return n.id;{const o=e.idToken?Jt(e.idToken.toString()):{},i=await Zt(o,t);n&&n.id===i&&Yt.debug(`The guest identity ${n.id} has become the primary identity.`),n={id:i,type:"primary"}}}else{if(n&&"guest"===n.type)return n.id;n={id:await Zt({},t),type:"guest"}}return o.storeIdentityId(n),n.id}({tokens:o,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return(i||s)&&this.clearCredentials(),t?(function(e){if(!e||!e.idToken)throw new We({name:ct,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(o),this.credsForOIDCTokens(n.Cognito,o,r)):this.getGuestCredentials(r,n.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return eo.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=at(t.identityPoolId),n=await Xt({region:o},{IdentityId:e});if(n.Credentials&&n.Credentials.AccessKeyId&&n.Credentials.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+to;const t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e},o=n.IdentityId;return o&&(t.identityId=o,this._identityIdStore.storeIdentityId({id:o,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new We({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,o){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return eo.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const n=t.idToken?Jt(t.idToken.toString()):{},i=at(e.identityPoolId),s=await Xt({region:i},{IdentityId:o,Logins:n});if(s.Credentials&&s.Credentials.AccessKeyId&&s.Credentials.SecretKey){const e={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:o};this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},this._nextCredentialsRefresh=(new Date).getTime()+to;const n=s.IdentityId;return n&&(e.identityId=n,this._identityIdStore.storeIdentityId({id:n,type:"primary"})),e}throw new We({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}(new class{setAuthConfig(e){var t,o;K(e.Cognito),this.authConfig=e,this._authKeys=(t="Cognito",o=e.Cognito.identityPoolId,Pt(_t)(`com.amplify.${t}`,o))}constructor(e){this._authKeys={},this.keyValueStorage=e}async loadIdentityId(){K(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const e=await this.keyValueStorage.getItem(this._authKeys.identityId);return e?{id:e,type:"guest"}:null}}catch(e){return kt.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){K(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=e.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}(F)),no={configure(e,t){let o;return o=Object.keys(e).some((e=>e.startsWith("aws_")))?I(e):e,o.Auth?t?.Auth?T.configure(o,t):T.libraryOptions.Auth?t?(void 0!==t.ssr&&Nt.setKeyValueStorage(t.ssr?new N({sameSite:"lax"}):F),T.configure(o,{Auth:T.libraryOptions.Auth,...t})):void T.configure(o):(Nt.setAuthConfig(o.Auth),Nt.setKeyValueStorage(t?.ssr?new N({sameSite:"lax"}):F),T.configure(o,{...t,Auth:{tokenProvider:Nt,credentialsProvider:oo}})):T.configure(o,t)},getConfig:()=>T.getConfig()},io=async()=>(async e=>{const t=e.getConfig().Auth?.Cognito;V(t);const o=await e.Auth.getTokens({forceRefresh:!1});gt(o);const{"cognito:username":n,sub:i}=o.idToken?.payload??{},s={username:n,userId:i},r=function(e){return e?.signInDetails}(o);return r&&(s.signInDetails=r),s})(T),so=e=>((e,t)=>e.Auth.fetchAuthSession(t))(T,e);var ro,ao;(ao=ro||(ro={})).EmptySignInUsername="EmptySignInUsername",ao.EmptySignInPassword="EmptySignInPassword",ao.CustomAuthSignInPassword="CustomAuthSignInPassword",ao.EmptySignUpUsername="EmptySignUpUsername",ao.EmptySignUpPassword="EmptySignUpPassword",ao.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",ao.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",ao.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",ao.EmptyChallengeResponse="EmptyChallengeResponse",ao.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",ao.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",ao.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",ao.EmptyResetPasswordUsername="EmptyResetPasswordUsername",ao.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",ao.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",ao.IncorrectMFAMethod="IncorrectMFAMethod",ao.EmptyUpdatePassword="EmptyUpdatePassword";const co={[ro.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[ro.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[ro.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[ro.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[ro.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[ro.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[ro.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[ro.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[ro.EmptySignInPassword]:{message:"password is required to signIn"},[ro.EmptySignInUsername]:{message:"username is required to signIn"},[ro.EmptySignUpPassword]:{message:"password is required to signUp"},[ro.EmptySignUpUsername]:{message:"username is required to signUp"},[ro.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[ro.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[ro.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[ro.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[ro.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var uo,lo,po;function ho(e,t){const{message:o,recoverySuggestion:n}=co[t];if(!e)throw new We({name:t,message:o,recoverySuggestion:n})}function go(e){return Object.entries(e).map((([e,t])=>({Name:e,Value:t})))}!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"}(uo||(uo={})),(po=lo||(lo={})).SignInException="SignInException",po.OAuthSignInError="OAuthSignInException";const mo={convert(e,{urlSafe:t}={urlSafe:!1}){const o="string"==typeof e?e:function(e){return Array.from(e,(e=>String.fromCodePoint(e))).join("")}(e),n=(()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new p({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(o);return t?n.replace(/\+/g,"-").replace(/\//g,"_"):n}};function Eo(e,t){null!=e&&this.fromString(e,t)}function fo(){return new Eo(null,null)}let yo;const xo="undefined"!=typeof navigator;xo&&"Microsoft Internet Explorer"===navigator.appName?(Eo.prototype.am=function(e,t,o,n,i,s){const r=32767&t,a=t>>15;for(;--s>=0;){let t=32767&this[e];const s=this[e++]>>15,c=a*t+s*r;t=r*t+((32767&c)<<15)+o[n]+(1073741823&i),i=(t>>>30)+(c>>>15)+a*s+(i>>>30),o[n++]=1073741823&t}return i},yo=30):xo&&"Netscape"!==navigator.appName?(Eo.prototype.am=function(e,t,o,n,i,s){for(;--s>=0;){const s=t*this[e++]+o[n]+i;i=Math.floor(s/67108864),o[n++]=67108863&s}return i},yo=26):(Eo.prototype.am=function(e,t,o,n,i,s){const r=16383&t,a=t>>14;for(;--s>=0;){let t=16383&this[e];const s=this[e++]>>14,c=a*t+s*r;t=r*t+((16383&c)<<14)+o[n]+i,i=(t>>28)+(c>>14)+a*s,o[n++]=268435455&t}return i},yo=28),Eo.prototype.DB=yo,Eo.prototype.DM=(1<<yo)-1,Eo.prototype.DV=1<<yo,Eo.prototype.FV=Math.pow(2,52),Eo.prototype.F1=52-yo,Eo.prototype.F2=2*yo-52;const Io=new Array;let wo,vo;for(wo="0".charCodeAt(0),vo=0;vo<=9;++vo)Io[wo++]=vo;for(wo="a".charCodeAt(0),vo=10;vo<36;++vo)Io[wo++]=vo;for(wo="A".charCodeAt(0),vo=10;vo<36;++vo)Io[wo++]=vo;function So(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Co(e,t){var o=Io[e.charCodeAt(t)];return null==o?-1:o}function Ao(e){var t=fo();return t.fromInt(e),t}function To(e){var t,o=1;return 0!=(t=e>>>16)&&(e=t,o+=16),0!=(t=e>>8)&&(e=t,o+=8),0!=(t=e>>4)&&(e=t,o+=4),0!=(t=e>>2)&&(e=t,o+=2),0!=(t=e>>1)&&(e=t,o+=1),o}function Ro(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}Ro.prototype.convert=function(e){var t=fo();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Eo.ZERO)>0&&this.m.subTo(t,t),t},Ro.prototype.revert=function(e){var t=fo();return e.copyTo(t),this.reduce(t),t},Ro.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var o=32767&e[t],n=o*this.mpl+((o*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[o=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Ro.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},Ro.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Eo.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Eo.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Eo.prototype.fromString=function(e,t){let o;if(16===t)o=4;else if(8===t)o=3;else if(2===t)o=1;else if(32===t)o=5;else{if(4!==t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");o=2}this.t=0,this.s=0;let n=e.length,i=!1,s=0;for(;--n>=0;){const t=Co(e,n);t<0?"-"===e.charAt(n)&&(i=!0):(i=!1,0===s?this[this.t++]=t:s+o>this.DB?(this[this.t-1]|=(t&(1<<this.DB-s)-1)<<s,this[this.t++]=t>>this.DB-s):this[this.t-1]|=t<<s,s+=o,s>=this.DB&&(s-=this.DB))}this.clamp(),i&&Eo.ZERO.subTo(this,this)},Eo.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},Eo.prototype.dlShiftTo=function(e,t){let o;for(o=this.t-1;o>=0;--o)t[o+e]=this[o];for(o=e-1;o>=0;--o)t[o]=0;t.t=this.t+e,t.s=this.s},Eo.prototype.drShiftTo=function(e,t){for(let o=e;o<this.t;++o)t[o-e]=this[o];t.t=Math.max(this.t-e,0),t.s=this.s},Eo.prototype.lShiftTo=function(e,t){const o=e%this.DB,n=this.DB-o,i=(1<<n)-1;let s,r=Math.floor(e/this.DB),a=this.s<<o&this.DM;for(s=this.t-1;s>=0;--s)t[s+r+1]=this[s]>>n|a,a=(this[s]&i)<<o;for(s=r-1;s>=0;--s)t[s]=0;t[r]=a,t.t=this.t+r+1,t.s=this.s,t.clamp()},Eo.prototype.rShiftTo=function(e,t){t.s=this.s;const o=Math.floor(e/this.DB);if(o>=this.t)return void(t.t=0);const n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[o]>>n;for(let e=o+1;e<this.t;++e)t[e-o-1]|=(this[e]&s)<<i,t[e-o]=this[e]>>n;n>0&&(t[this.t-o-1]|=(this.s&s)<<i),t.t=this.t-o,t.clamp()},Eo.prototype.subTo=function(e,t){let o=0,n=0,i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]-e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n-=e[o],t[o++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[o++]=this.DV+n:n>0&&(t[o++]=n),t.t=o,t.clamp()},Eo.prototype.multiplyTo=function(e,t){const o=this.abs(),n=e.abs();let i=o.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+o.t]=o.am(0,n[i],t,i,0,o.t);t.s=0,t.clamp(),this.s!==e.s&&Eo.ZERO.subTo(t,t)},Eo.prototype.squareTo=function(e){for(var t=this.abs(),o=e.t=2*t.t;--o>=0;)e[o]=0;for(o=0;o<t.t-1;++o){var n=t.am(o,t[o],e,2*o,0,1);(e[o+t.t]+=t.am(o+1,2*t[o],e,2*o+1,n,t.t-o-1))>=t.DV&&(e[o+t.t]-=t.DV,e[o+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(o,t[o],e,2*o,0,1)),e.s=0,e.clamp()},Eo.prototype.divRemTo=function(e,t,o){var n=e.abs();if(n.t<=0)return;var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=o&&this.copyTo(o));null===o&&(o=fo());var s=fo(),r=this.s,a=e.s,c=this.DB-To(n[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,o)):(n.copyTo(s),i.copyTo(o));const d=s.t,u=s[d-1];if(0===u)return;const l=u*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),p=this.FV/l,h=(1<<this.F1)/l,g=1<<this.F2;let m=o.t,E=m-d,f=null===t?fo():t;for(s.dlShiftTo(E,f),o.compareTo(f)>=0&&(o[o.t++]=1,o.subTo(f,o)),Eo.ONE.dlShiftTo(d,f),f.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--E>=0;){var y=o[--m]===u?this.DM:Math.floor(o[m]*p+(o[m-1]+g)*h);if((o[m]+=s.am(0,y,o,E,0,d))<y)for(s.dlShiftTo(E,f),o.subTo(f,o);o[m]<--y;)o.subTo(f,o)}null!==t&&(o.drShiftTo(d,t),r!==a&&Eo.ZERO.subTo(t,t)),o.t=d,o.clamp(),c>0&&o.rShiftTo(c,o),r<0&&Eo.ZERO.subTo(o,o)},Eo.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},Eo.prototype.addTo=function(e,t){let o=0,n=0,i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]+e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n+=e[o],t[o++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[o++]=n:n<-1&&(t[o++]=this.DV+n),t.t=o,t.clamp()},Eo.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else{if(4!==e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}let o,n=(1<<t)-1,i=!1,s="",r=this.t,a=this.DB-r*this.DB%t;if(r-- >0)for(a<this.DB&&(o=this[r]>>a)>0&&(i=!0,s=So(o));r>=0;)a<t?(o=(this[r]&(1<<a)-1)<<t-a,o|=this[--r]>>(a+=this.DB-t)):(o=this[r]>>(a-=t)&n,a<=0&&(a+=this.DB,--r)),o>0&&(i=!0),i&&(s+=So(o));return i?s:"0"},Eo.prototype.negate=function(){var e=fo();return Eo.ZERO.subTo(this,e),e},Eo.prototype.abs=function(){return this.s<0?this.negate():this},Eo.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var o=this.t;if(0!=(t=o-e.t))return this.s<0?-t:t;for(;--o>=0;)if(0!=(t=this[o]-e[o]))return t;return 0},Eo.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+To(this[this.t-1]^this.s&this.DM)},Eo.prototype.mod=function(e){var t=fo();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Eo.ZERO)>0&&e.subTo(t,t),t},Eo.prototype.equals=function(e){return 0===this.compareTo(e)},Eo.prototype.add=function(e){var t=fo();return this.addTo(e,t),t},Eo.prototype.subtract=function(e){var t=fo();return this.subTo(e,t),t},Eo.prototype.multiply=function(e){var t=fo();return this.multiplyTo(e,t),t},Eo.prototype.divide=function(e){var t=fo();return this.divRemTo(e,t,null),t},Eo.prototype.modPow=function(e,t,o){let n,i=e.bitLength(),s=Ao(1),r=new Ro(t);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6;let a=new Array,c=3,d=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),n>1){const e=fo();for(r.sqrTo(a[1],e);c<=u;)a[c]=fo(),r.mulTo(e,a[c-2],a[c]),c+=2}let l,p,h=e.t-1,g=!0,m=fo();for(i=To(e[h])-1;h>=0;){for(i>=d?l=e[h]>>i-d&u:(l=(e[h]&(1<<i+1)-1)<<d-i,h>0&&(l|=e[h-1]>>this.DB+i-d)),c=n;0==(1&l);)l>>=1,--c;if((i-=c)<0&&(i+=this.DB,--h),g)a[l].copyTo(s),g=!1;else{for(;c>1;)r.sqrTo(s,m),r.sqrTo(m,s),c-=2;c>0?r.sqrTo(s,m):(p=s,s=m,m=p),r.mulTo(m,a[l],s)}for(;h>=0&&0==(e[h]&1<<i);)r.sqrTo(s,m),p=s,s=m,m=p,--i<0&&(i=this.DB-1,--h)}var E=r.revert(s);return o(null,E),E},Eo.ZERO=Ao(0),Eo.ONE=Ao(1);const Po={convert:e=>(new TextEncoder).encode(e)},bo={},No={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),bo[e]=t,No[t]=e}const Uo=e=>{if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2){const n=e.slice(o,o+2).toLowerCase();if(!(n in No))throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`);t[o/2]=No[n]}return t},_o=e=>{let t="";for(let o=0;o<e.byteLength;o++)t+=bo[e[o]];return t},ko=e=>{const t=new qt;t.update(e);const o=t.digestSync(),n=_o(o);return new Array(64-n.length).join("0")+n},Fo=e=>ko(Uo(e)),Do=/^[89a-f]/i,Mo=e=>{if(!(e instanceof Eo))throw new Error("Not a BigInteger");const t=e.compareTo(Eo.ZERO)<0;let o=e.abs().toString(16);if(o=o.length%2!=0?`0${o}`:o,o=Do.test(o)?`00${o}`:o,t){const e=o.split("").map((e=>{const t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");o=new Eo(e,16).add(Eo.ONE).toString(16),o.toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o};class Lo{constructor(e,t){this.words=[];let o=e;o=this.words=o||[],this.sigBytes=void 0!==t?t:4*o.length}random(e){const t=[];for(let o=0;o<e;o+=4)t.push(O().getRandomValues(new Uint32Array(1))[0]);return new Lo(t,e)}toString(){return function(e){const t=e.words,o=e.sigBytes,n=[];for(let e=0;e<o;e++){const o=t[e>>>2]>>>24-e%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")}(this)}}const Oo=e=>{const t=(new Lo).random(e).toString();return Uo(t)};class Bo{constructor({userPoolName:e,a:t,g:o,A:n,N:i}){this.encoder=Po,this.userPoolName=e,this.a=t,this.g=o,this.A=n,this.N=i,this.k=new Eo(Fo(`${Mo(i)}${Mo(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new We({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new We({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new We({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=mo.convert(Oo(40));const o=`${e}${t}:${this.randomPassword}`,n=ko(o),i=_o(Oo(16));return this.saltToHashDevices=Mo(new Eo(i,16)),new Promise(((e,t)=>{this.g.modPow(new Eo(Fo(this.saltToHashDevices+n),16),this.N,((o,n)=>{o?t(o):(this.verifierDevices=Mo(n),e())}))}))}async getPasswordAuthenticationKey({username:e,password:t,serverBValue:o,salt:n}){if(o.mod(this.N).equals(Eo.ZERO))throw new Error("B cannot be zero.");const i=(({A:e,B:t})=>{const o=new Eo(Fo(Mo(e)+Mo(t)),16);if(o.equals(Eo.ZERO))throw new Error("U cannot be zero.");return o})({A:this.A,B:o}),s=`${this.userPoolName}${e}:${t}`,r=ko(s),a=new Eo(Fo(Mo(n)+r),16),c=await(async({a:e,g:t,k:o,x:n,B:i,N:s,U:r})=>new Promise(((a,c)=>{t.modPow(n,s,((t,d)=>{t?c(t):i.subtract(o.multiply(d)).modPow(e.add(r.multiply(n)),s,((e,t)=>{e?c(e):a(t.mod(s))}))}))})))({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:i}),d=this.encoder.convert("Caldera Derived Key"),u=this.encoder.convert(String.fromCharCode(1)),l=new Uint8Array(d.byteLength+u.byteLength);l.set(d,0),l.set(u,d.byteLength);const p=((e,t,o)=>{const n=new qt(t);n.update(e);const i=n.digestSync(),s=new qt(i);return s.update(o),s.digestSync().slice(0,16)})(Uo(Mo(c)),Uo(Mo(i)),l);return p}}const Vo=async e=>{const t=new Eo("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),o=new Eo("2",16),n=qo(),i=await(async({a:e,g:t,N:o})=>new Promise(((n,i)=>{t.modPow(e,o,((e,t)=>{e?i(e):t.mod(o).equals(Eo.ZERO)?i(new Error("Illegal parameter. A mod N cannot be 0.")):n(t)}))})))({a:n,g:o,N:t});return new Bo({userPoolName:e,a:n,g:o,A:i,N:t})},qo=()=>new Eo(_o(Oo(128)),16),Ko=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ho=()=>{const e=new Date,t=$o[e.getUTCDay()],o=Ko[e.getUTCMonth()],n=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();return r<10&&(r=`0${r}`),`${t} ${o} ${n} ${i}:${s}:${r} UTC ${e.getUTCFullYear()}`},zo=({userPoolName:e,username:t,challengeParameters:o,dateNow:n,hkdf:i})=>{const s=Po.convert(e),r=Po.convert(t),a=Go(o.SECRET_BLOCK),c=Po.convert(n),d=new Uint8Array(s.byteLength+r.byteLength+a.byteLength+c.byteLength);d.set(s,0),d.set(r,s.byteLength),d.set(a,s.byteLength+r.byteLength),d.set(c,s.byteLength+r.byteLength+a.byteLength);const u=new qt(i);u.update(d);const l=u.digestSync();return mo.convert(l)},Go=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=B.convert(t),n=new Uint8Array(o.length);for(let e=0;e<o.length;++e)n[e]=o.charCodeAt(e);return n};var Wo,jo,Jo,Yo,Zo,Qo,Xo,en,tn,on,nn,sn,rn,an,cn,dn,un,ln,pn,hn,gn,mn,En,fn;!function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"}(Wo||(Wo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(jo||(jo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Jo||(Jo={})),function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Yo||(Yo={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(Zo||(Zo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Qo||(Qo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Xo||(Xo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(en||(en={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(tn||(tn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(on||(on={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(nn||(nn={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(sn||(sn={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(rn||(rn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"}(an||(an={})),function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(cn||(cn={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(dn||(dn={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(un||(un={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(ln||(ln={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"}(pn||(pn={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(hn||(hn={})),function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(gn||(gn={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(mn||(mn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(En||(En={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(fn||(fn={}));const yn=(e=>{let t=e({username:void 0,challengeName:void 0,signInSession:void 0},{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:o=>{t=e(t,o)}}})(((e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return{username:void 0,challengeName:void 0,signInSession:void 0};default:return e}}));function xn(e){yn.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function In(){yn.dispatch({type:"SET_INITIAL_STATE"})}const wn=(e,t)=>$e({category:me.Auth,action:e,...t}),vn="userAttributes.";async function Sn(e,t,o,n,i){const{userPoolClientId:s,userPoolId:r}=n,a={USERNAME:e,PASSWORD:t},c=await i.getDeviceMetadata(e);c&&c.deviceKey&&(a.DEVICE_KEY=c.deviceKey);const d={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:o,ClientId:s,UserContextData:wt({username:e,userPoolId:r,userPoolClientId:s})},u=await Qe({region:rt(r),userAgentValue:wn(ye.SignIn)},d),l=u.ChallengeParameters?.USERNAME??u.ChallengeParameters?.USER_ID_FOR_SRP??e;return Mn(l),"DEVICE_SRP_AUTH"===u.ChallengeName?An({username:l,config:n,clientMetadata:o,session:u.Session,tokenOrchestrator:i}):u}async function Cn(e,t,o,n){const{userPoolClientId:i,userPoolId:s}=o,r={USERNAME:e},a=await n.getDeviceMetadata(e);a&&a.deviceKey&&(r.DEVICE_KEY=a.deviceKey);const c={AuthFlow:"CUSTOM_AUTH",AuthParameters:r,ClientMetadata:t,ClientId:i,UserContextData:wt({username:e,userPoolId:s,userPoolClientId:i})},d=await Qe({region:rt(s),userAgentValue:wn(ye.SignIn)},c),u=d.ChallengeParameters?.USERNAME??e;return Mn(u),"DEVICE_SRP_AUTH"===d.ChallengeName?An({username:u,config:o,clientMetadata:t,session:d.Session,tokenOrchestrator:n}):d}async function An({username:e,config:t,clientMetadata:o,session:n,tokenOrchestrator:i}){const s=t.userPoolId,r=t.userPoolClientId,a=await(i?.getDeviceMetadata(e));yt(a);const c=await Vo(a.deviceGroupKey),d={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r,ChallengeResponses:{USERNAME:e,SRP_A:c.A.toString(16),DEVICE_KEY:a.deviceKey},ClientMetadata:o,Session:n},{ChallengeParameters:u,Session:l}=await ot({region:rt(s)},d);return async function(e,t,o,n,i,{userPoolId:s,userPoolClientId:r},a){const c=await(a?.getDeviceMetadata(e));yt(c);const d=new Eo(t?.SRP_B,16),u=new Eo(t?.SALT,16),l=c.deviceKey,p=c.deviceGroupKey,h=await i.getPasswordAuthenticationKey({username:c.deviceKey,password:c.randomPassword,serverBValue:d,salt:u}),g=Ho(),m={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:{USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:zo({username:l,userPoolName:p,challengeParameters:t,dateNow:g,hkdf:h}),DEVICE_KEY:l},Session:n,ClientMetadata:o,UserContextData:wt({username:e,userPoolId:s,userPoolClientId:r})};return ot({region:rt(s)},m)}(e,u,o,l,c,t,i)}async function Tn(e,t,o,n,i,s,r){const{userPoolId:a,userPoolClientId:c}=s,d=a?.split("_")[1]||"",u=new Eo(t?.SRP_B,16),l=new Eo(t?.SALT,16),p=t?.USER_ID_FOR_SRP;if(!p)throw new We({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const h=await i.getPasswordAuthenticationKey({username:p,password:e,serverBValue:u,salt:l}),g=Ho(),m={USERNAME:p,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:zo({username:p,userPoolName:d,challengeParameters:t,dateNow:g,hkdf:h})},E=await r.getDeviceMetadata(p);E&&E.deviceKey&&(m.DEVICE_KEY=E.deviceKey);const f={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:m,ClientMetadata:o,Session:n,ClientId:c,UserContextData:wt({username:p,userPoolId:a,userPoolClientId:c})},y=await ot({region:rt(a)},f);return"DEVICE_SRP_AUTH"===y.ChallengeName?An({username:p,config:s,clientMetadata:o,session:y.Session,tokenOrchestrator:r}):y}async function Rn(e){const{challengeName:t,challengeParameters:o}=e,n=T.getConfig().Auth?.Cognito;switch(V(n),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:o}};case"MFA_SETUP":const{signInSession:e,username:t}=yn.getState();if(!function(e,t){const{MFAS_CAN_SETUP:o}=e,n=_n(kn(o));return!!n&&n.includes("TOTP")}(o))throw new We({name:lo.SignInException,message:`Cannot initiate MFA setup from available types: ${_n(kn(o.MFAS_CAN_SETUP))}`});const{Session:i,SecretCode:s}=await nt({region:rt(n.userPoolId)},{Session:e});return yn.dispatch({type:"SET_SIGN_IN_SESSION",value:i}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Pn(s,t)}};case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:Nn(o.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:_n(kn(o.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new We({name:lo.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function Pn(e,t){return{sharedSecret:e,getSetupUri:(o,n)=>new he(`otpauth://totp/${o}:${n??t}?secret=${e}&issuer=${o}`)}}function bn(e){return e===cn.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===cn.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function Nn(e){return e?JSON.parse(e).map((e=>e.includes(vn)?e.replace(vn,""):e)):[]}function Un(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":void 0}function _n(e){if(e)return e.map(Un).filter(Boolean)}function kn(e){return e?JSON.parse(e):[]}async function Fn(e,t,o){if(!t)return;const n=e.split("_")[1]||"",i=await Vo(n),s=t?.DeviceKey,r=t?.DeviceGroupKey;try{await i.generateHashDevice(r??"",s??"")}catch(e){return}const a={Salt:mo.convert(Uo(i.getSaltToHashDevices())),PasswordVerifier:mo.convert(Uo(i.getVerifierDevices()))},c=i.getRandomPassword();try{return await it({region:rt(e)},{AccessToken:o,DeviceKey:t?.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:s,deviceGroupKey:r,randomPassword:c}}catch(e){return}}async function Dn(e,t,o,n){try{return await e(...t)}catch(i){if(i instanceof We&&"ResourceNotFoundException"===i.name&&i.message.includes("Device does not exist."))return await n.clearDeviceMetadata(o),await e(...t);throw i}}function Mn(e){const{dispatch:t}=yn;t({type:"SET_USERNAME",value:e})}function Ln(e){return yn.getState().username??e}async function On(e){if(!e.AccessToken)throw new p({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"});{const t=$(e.AccessToken),o=1e3*(t.payload.iat||0),n=(new Date).getTime(),i=o>0?o-n:0;let s,r,a;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=$(e.IdToken)),e?.NewDeviceMetadata&&(a=e.NewDeviceMetadata);const c={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:a,username:e.username};e?.signInDetails&&(c.signInDetails=e.signInDetails),await Ut.setTokens({tokens:c})}}async function Bn(e){const t=e.options?.authFlowType;switch(await async function(){let e;try{e=await io()}catch(e){}if(e&&e.userId&&e.username)throw new We({name:"UserAlreadyAuthenticatedException",message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}(),t){case"USER_SRP_AUTH":default:return async function(e){const{username:t,password:o}=e,n=T.getConfig().Auth?.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};V(n);const s=e.options?.clientMetadata;ho(!!t,ro.EmptySignInUsername),ho(!!o,ro.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:r,AuthenticationResult:a,Session:c}=await async function(e,t,o,n,i){const{userPoolId:s,userPoolClientId:r}=n,a=s?.split("_")[1]||"",c=await Vo(a),d={AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16)},ClientMetadata:o,ClientId:r,UserContextData:wt({username:e,userPoolId:s,userPoolClientId:r})},u=await Qe({region:rt(s),userAgentValue:wn(ye.SignIn)},d),{ChallengeParameters:l,Session:p}=u,h=l?.USERNAME??e;return Mn(h),Dn(Tn,[t,l,o,p,c,n,i],h,i)}(t,o,s,n,Ut),d=Ln(t);return xn({signInSession:c,username:d,challengeName:e,signInDetails:i}),a?(In(),await On({username:d,...a,NewDeviceMetadata:await Fn(n.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:i}),E.dispatch("auth",{event:"signedIn",data:await io()},"Auth",h),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Rn({challengeName:e,challengeParameters:r})}catch(e){In(),je(e);const t=bn(e.name);if(t)return t;throw e}}(e);case"USER_PASSWORD_AUTH":return async function(e){const{username:t,password:o,options:n}=e,i=T.getConfig().Auth?.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};V(i);const r=n?.clientMetadata;ho(!!t,ro.EmptySignInUsername),ho(!!o,ro.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:a,Session:c}=await Dn(Sn,[t,o,r,i,Ut],t,Ut),d=Ln(t);return xn({signInSession:c,username:d,challengeName:e,signInDetails:s}),a?(await On({...a,username:d,NewDeviceMetadata:await Fn(i.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:s}),In(),E.dispatch("auth",{event:"signedIn",data:await io()},"Auth",h),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Rn({challengeName:e,challengeParameters:n})}catch(e){In(),je(e);const t=bn(e.name);if(t)return t;throw e}}(e);case"CUSTOM_WITHOUT_SRP":return async function(e){const t=T.getConfig().Auth?.Cognito;V(t);const{username:o,password:n,options:i}=e,s={loginId:o,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i?.clientMetadata;ho(!!o,ro.EmptySignInUsername),ho(!n,ro.CustomAuthSignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:i,Session:a}=await Dn(Cn,[o,r,t,Ut],o,Ut),c=Ln(o);return xn({signInSession:a,username:c,challengeName:e,signInDetails:s}),i?(In(),await On({username:c,...i,NewDeviceMetadata:await Fn(t.userPoolId,i.NewDeviceMetadata,i.AccessToken),signInDetails:s}),E.dispatch("auth",{event:"signedIn",data:await io()},"Auth",h),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Rn({challengeName:e,challengeParameters:n})}catch(e){In(),je(e);const t=bn(e.name);if(t)return t;throw e}}(e);case"CUSTOM_WITH_SRP":return async function(e){const{username:t,password:o,options:n}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=T.getConfig().Auth?.Cognito;V(s);const r=n?.clientMetadata;ho(!!t,ro.EmptySignInUsername),ho(!!o,ro.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:a,Session:c}=await async function(e,t,o,n,i){V(n);const{userPoolId:s,userPoolClientId:r}=n,a=s?.split("_")[1]||"",c=await Vo(a),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16),CHALLENGE_NAME:"SRP_A"},ClientMetadata:o,ClientId:r,UserContextData:wt({username:e,userPoolId:s,userPoolClientId:r})},{ChallengeParameters:u,Session:l}=await Qe({region:rt(s),userAgentValue:wn(ye.SignIn)},d),p=u?.USERNAME??e;return Mn(p),Dn(Tn,[t,u,o,l,c,n,i],p,i)}(t,o,r,s,Ut),d=Ln(t);return xn({signInSession:c,username:d,challengeName:e,signInDetails:i}),a?(await On({username:d,...a,NewDeviceMetadata:await Fn(s.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:i}),In(),E.dispatch("auth",{event:"signedIn",data:await io()},"Auth",h),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Rn({challengeName:e,challengeParameters:n})}catch(e){In(),je(e);const t=bn(e.name);if(t)return t;throw e}}(e)}}const Vn=async()=>{throw new We({name:ut,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})};let qn=null;function Kn(e){qn=e}function $n(){qn=Vn}const Hn=18e4;function zn(e,t){let o;return function(n){o||e(...n),clearTimeout(o),o=setTimeout((()=>{o=void 0}),t)}}const Gn=zn((function(e,t,o){const n=Date.now(),i=setInterval((async()=>{if(Date.now()-n>Hn)return clearInterval(i),Qn(!1),o(new We({name:ut,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),void $n();try{const o=await Bn(e);if("CONFIRM_SIGN_UP"!==o.nextStep.signInStep)return t(o),clearInterval(i),Qn(!1),void $n()}catch(e){clearInterval(i),Qn(!1),o(e),$n()}}),5e3)}),300),Wn=zn((async function(e,t,o){try{t(await Bn(e)),$n()}catch(e){o(e),$n()}}),300);let jn,Jn=!1;function Yn(e){jn=e}function Zn(){return Jn}function Qn(e){!1===e&&Yn(void 0),Jn=e}function Xn(e){return!!e.UserConfirmed}function ei(e){return async()=>new Promise((async(t,o)=>{Wn([e,t,o])}))}const ti=ei;async function oi(e){const{username:t,password:o,options:n}=e,i=T.getConfig().Auth?.Cognito,s=i?.signUpVerificationMethod??"code",{clientMetadata:r,validationData:a,autoSignIn:c}=e.options??{};V(i),ho(!!t,ro.EmptySignUpUsername),ho(!!o,ro.EmptySignUpPassword);const d="boolean"!=typeof c?c:void 0,u={username:t,options:d};"CUSTOM_WITHOUT_SRP"!==d?.authFlowType&&(u.password=o),(d||!0===c)&&(Yn(t),Qn(!0));const l=await et({region:rt(i.userPoolId),userAgentValue:wn(ye.SignUp)},{Username:t,Password:o,UserAttributes:n?.userAttributes&&go(n?.userAttributes),ClientMetadata:r,ValidationData:a&&go(a),ClientId:i.userPoolClientId}),{UserSub:p,CodeDeliveryDetails:h}=l;if(Xn(l)&&Zn())return Kn(ti(u)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}};if(Xn(l)&&!Zn())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Xn(l)&&Zn()&&"code"===s)!function(e){const t=f.listen("auth-internal",(async({payload:o})=>{if("confirmSignUp"===o.event){const n=o.data;n?.isSignUpComplete&&(f.dispatch("auth-internal",{event:"autoSignIn"}),Kn(ei(e)),t())}})),o=setTimeout((()=>{t(),Qn(!1),clearTimeout(o),$n()}),Hn)}(u);else if(!Xn(l)&&Zn()&&"link"===s)return Kn(function(e){return async()=>new Promise((async(t,o)=>{Gn([e,t,o])}))}(u)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:h?.DeliveryMedium,destination:h?.Destination,attributeName:h?.AttributeName}},userId:p};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:h?.DeliveryMedium,destination:h?.Destination,attributeName:h?.AttributeName}},userId:p}}function ni(){return T.Auth.clearCredentials()}const ii=e=>e.startsWith(String(window.location.origin+window.location.pathname??"/")),si=e=>e.includes(String(window.location.hostname)),ri=e=>e.startsWith("http://"),ai=e=>e.startsWith("https://"),ci=async(e,t)=>{const{isOAuthSignIn:o}=await t.loadOAuthSignIn();if(await(async e=>{await e.clearOAuthData(),Ut.clearTokens(),await ni(),E.dispatch("auth",{event:"signedOut"},"Auth",h)})(t),o)return(async(e,t=!1)=>{q(e);const{loginWith:o,userPoolClientId:n}=e,{domain:i,redirectSignOut:s}=o.oauth,r=function(e){const t=e?.find(ii)??e?.find(si),o=e?.find(ai)??e?.find(ri);if(t)return t;if(o)throw pt;throw lt}(s);return(async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))})(`https://${i}/logout?${Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map((([e,t])=>`${e}=${t}`)).join("&")}`)})(e)},di="amplify-signin-with-hostedUI",ui="CognitoIdentityServiceProvider";class li{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){V(this.cognitoConfig);const e=pi(ui,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){V(this.cognitoConfig);const e=pi(ui,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(di),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){V(this.cognitoConfig);const e=pi(ui,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){V(this.cognitoConfig);const t=pi(ui,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){V(this.cognitoConfig);const e=pi(ui,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){V(this.cognitoConfig);const t=pi(ui,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){V(this.cognitoConfig);const e=pi(ui,this.cognitoConfig.userPoolClientId);return"true"===await this.keyValueStorage.getItem(e.inflightOAuth)}async storeOAuthInFlight(e){V(this.cognitoConfig);const t=pi(ui,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){V(this.cognitoConfig);const e=pi(ui,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(di),[o,n]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===o||"true"===t,preferPrivateSession:"true"===n}}async storeOAuthSignIn(e,t=!1){V(this.cognitoConfig);const o=pi(ui,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.setItem(o.oauthSignIn,`${e},${t}`)}}const pi=(e,t)=>Pt(xt)(e,t),hi=new l("Auth");const gi=e=>!!e?.payload?.origin_jti;no.configure({Auth:{Cognito:{userPoolId:"us-west-2_98u65X5GV",userPoolClientId:"28eomo5pfl4tsavbn9rha1t3tn"}}});const mi=no.getConfig();console.log(mi);const Ei=window.matchMedia("(max-width: 375px)"),fi=document.querySelector(".top-cont"),yi=document.querySelector(".courses"),xi=document.querySelector(".add-new"),Ii=document.querySelector(".addC-modal"),wi=document.getElementById("addCourseBtn"),vi=document.getElementById("addCourseName"),Si=document.getElementById("addTotalHours"),Ci=document.getElementById("addCurrHours"),Ai=document.getElementById("addProgress"),Ti=document.querySelector(".jump-down"),Ri=document.querySelector(".sort-icon"),Pi=document.getElementById("sortCriteria"),bi=document.getElementById("ascend-icon"),Ni=document.getElementById("descend-icon"),Ui=document.querySelector(".modal-edit"),_i=document.getElementById("courseNameE"),ki=document.getElementById("totalHoursE"),Fi=document.getElementById("totalHoursC"),Di=document.getElementById("percentCompE"),Mi=document.getElementById("editCourseBtn"),Li=document.getElementById("toggle-completed"),Oi=document.getElementById("displayType"),Bi=document.getElementById("colorScheme"),Vi=document.querySelector(".login"),qi=document.querySelector(".authd"),Ki=document.querySelector(".authdUser"),$i=document.querySelector(".modal-login"),Hi=document.querySelector(".code-wrapper"),zi=document.querySelector(".logout-icon"),Gi=document.querySelector(".cloud-icon"),Wi=document.querySelector(".close"),ji=document.querySelector(".closeEdit"),Ji=document.querySelector(".closeLogin"),Yi=document.querySelector(".ultra-cont"),Zi=document.querySelector(".message-cont"),Qi=document.querySelector(".addLink"),Xi=document.querySelector(".sampleLink"),es=document.querySelector(".current-hours"),ts=document.querySelector(".all-hours"),os=document.querySelector(".remaining-hours"),ns=document.querySelector(".completion-percent"),is=document.querySelector(".remaining-percent"),ss=document.getElementById("pieChart"),rs=document.querySelector(".pie-label"),as=document.getElementById("columnChart");let cs={courses:[],displayCourses:[],hiddenCourses:[],currentEdit:null,showCompleted:!0,total:0,colors:"dark",sortCriteria:"percent",ascending:!0,id:0,verified:!1,currentUser:"",token:"",codes:!1,got:!1};async function ds(){try{await async function(e){const t=T.getConfig().Auth?.Cognito;let o;V(t),e?.global?await async function(e){try{const t=await Ut.getTokenStore().loadTokens();gt(t),await st({region:rt(e.userPoolId),userAgentValue:wn(ye.SignOut)},{AccessToken:t.accessToken.toString()})}catch(e){hi.debug("Global signOut error caught but will proceed with token removal")}}(t):await async function(e){try{const t=await Ut.getTokenStore().loadTokens();ft(t),gi(t.accessToken)&&await Xe({region:rt(e.userPoolId),userAgentValue:wn(ye.SignOut)},{ClientId:e.userPoolClientId,Token:t.refreshToken})}catch(e){hi.debug("Client signOut error caught but will proceed with token removal")}}(t);try{q(t),o=!0}catch(e){o=!1}if(o){const e=new li(F);e.setAuthConfig(t);const{type:o}=await ci(t,e)??{};if("error"===o)throw new We({name:ht,message:"An error occurred when attempting to log out from OAuth provider."})}else Ut.clearTokens(),await ni(),E.dispatch("auth",{event:"signedOut"},"Auth",h)}(),console.log("Signed out"),Vi.style.display="block",Gi.style.display="none",qi.style.display="none",cs.courses.forEach((e=>e.delete())),cs.displayCourses.forEach((e=>e.delete())),console.log(cs.courses,cs.displayCourses),as.innerHTML="",ws(),cs.got=!1,cs.id=0,cs.token="",cs.currentUser=""}catch(e){console.log("Error signing out",e)}}Vi.addEventListener("click",(()=>($i.style.display="block",document.querySelector(".regBtn").addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("emailText").value,o=document.getElementById("passwordText").value;!function(e){return/^[A-Za-z0-9_!#$%&'*+\/=?`{|}~^.-]+@[A-Za-z0-9.-]+$/gm.test(e)}(t)?alert("Please enter a valid email address"):function(e){const t=e.length>=8,o=/[A-Z]/.test(e),n=/[a-z]/.test(e),i=/[0-9]/.test(e),s=/[\!\@\#\$\%\^\&\*\(\)\_\+\-\=\[\]\{\}\;\'\:\"\,\<\.\>\/\?\|\\~`]/.test(e);return t&&n&&o&&i&&s}(o)?async function({email:e,password:t}){try{const{isSignUpComplete:o,userId:n,nextStep:i}=await oi({username:e,password:t,options:{userAttributes:{email:e}}});console.log(n),function(e){cs.codes=!0;const t=document.getElementById("confirmation-codes");Hi.style.display="block",t.innerHTML="";for(let e=0;e<6;e++){const e=document.createElement("input");e.type="text",e.maxLength="1",e.classList.add("code-input"),t.appendChild(e)}t.querySelectorAll(".code-input")[0].focus(),function(e){const t=document.querySelectorAll(".code-input");t.forEach(((o,n)=>{o.addEventListener("keyup",(i=>{if(i.key.match(/[^0-9]/))o.value="";else if(""!==o.value&&n<t.length-1&&t[n+1].focus(),Array.from(t).every((e=>""!==e.value))){const o=Array.from(t).map((e=>e.value)).join("");!async function({user:e,confCode:t}){console.log(e,t);try{const{isSignUpComplete:o,nextStep:n}=await async function(e){const{username:t,confirmationCode:o,options:n}=e,i=T.getConfig().Auth?.Cognito;V(i);const{userPoolId:s,userPoolClientId:r}=i,a=n?.clientMetadata;ho(!!t,ro.EmptyConfirmSignUpUsername),ho(!!o,ro.EmptyConfirmSignUpCode);const c=wt({username:t,userPoolId:s,userPoolClientId:r});return await tt({region:rt(i.userPoolId),userAgentValue:wn(ye.ConfirmSignUp)},{Username:t,ConfirmationCode:o,ClientMetadata:a,ForceAliasCreation:n?.forceAliasCreation,ClientId:i.userPoolClientId,UserContextData:c}),new Promise(((e,o)=>{try{const o={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Zn()||!function(e){return jn===e}(t))return e(o);const n=f.listen("auth-internal",(({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),Qn(!1),n())}));f.dispatch("auth-internal",{event:"confirmSignUp",data:o})}catch(e){o(e)}}))}({username:e,confirmationCode:t});console.log("Code accepted!"),Hi.innerHTML="",cs.codes=!1,Hi.textContent="Success! Click to Login"}catch(e){console.log("Error",e)}}({user:e,confCode:o})}}))}))}(e)}(e)}catch(e){console.log(e)}}({email:t,password:o}):alert("Password must be less than 8 characters, and contain at least: one upper case letter, one lower case letter, one number and one special character")})),void document.querySelector(".loginBtn").addEventListener("click",(e=>{e.preventDefault(),async function({email:e,password:t}){const o=e;try{const{isSignedIn:e,nextStep:n}=await Bn({username:o,password:t});console.log(`${o} signed in!`),$i.style.display="none",cs.verified=!0,cs.currentUser=o,ws(),setTimeout((async()=>{await vs()?(Ss(),hs(),Vi.style.display="none",Gi.style.display="flex",qi.style.display="block",Ki.textContent=i(cs.currentUser,14)):console.log("Authorization failed")}),2500)}catch(e){console.log("Error",e)}}({email:document.getElementById("emailText").value,password:document.getElementById("passwordText").value})}))))),document.querySelector(".eye-icon").addEventListener("click",(function(){const e=document.getElementById("passwordText");e.setAttribute("type","password"===e.getAttribute("type")?"text":"password")})),zi.addEventListener("click",(()=>ds()));class us{constructor(e,t,o){this.name=e,this.id=function(){const e=cs.id+1;return cs.id=e,e}(),this.totalHours=t,this.progress=o,cs.courses.push(this),cs.displayCourses.push(this),cs.total+=t}completedHours(){return Math.round(this.progress/100*this.totalHours*100)/100}remainingHours(){return Math.round(100*(this.totalHours-this.completedHours()))/100}percent(){return(this.completedHours()/cs.total*100).toFixed(2)}percentOfTotal(){return(this.totalHours/cs.total*100).toFixed(2)}}class ls extends us{constructor(e,t,o){super(e,t,o),As()}render(){this.progressColor=n(this.progress),this.colorR=e(this.remainingHours()),this.element=document.createElement("div"),this.element.className="course-line",100===this.progress&&(this.element.style.backgroundColor="var(--highlight-color)",this.complete=!0),this.element.innerHTML=`\n    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="minus-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg>\n    <div class="course-details">\n     <div class="detail-text"><div class="text1"> <span style="color: ${this.complete?"var(--text-color)":this.progressColor};">${this.progress}%</span> of the ${this.totalHours}-hour ${this.name} course has been completed, which is roughly ${this.completedHours()} hours.</div><div class="text2"> <span style="color: ${this.complete?"var(--text-color)":this.colorR};">${this.remainingHours().toFixed(2)}</span> hours remain for this course.\n    </div></div></div>\n    <div class="course-percent-text">${this.percent()}% completed out of ${this.percentOfTotal()}% of the entire courseload</div>\n    <div class="course-actions">\n      <button class="reset-button">Reset</button>\n      <button class="edit-button">Edit</button>\n    </div>\n  `}renderSimple(){this.progressColor=n(this.progress),this.colorR=e(this.remainingHours()),this.colorC=e(this.completedHours()),this.element=document.createElement("div"),this.simplePerc=function(e){let t=e.toString();switch(t.length){case 1:return t+="&nbsp;&nbsp;",t;case 2:return t+="&nbsp;",t;default:return t}}(this.progress),this.simpleCompleted=s(this.completedHours().toFixed(2)),this.simpleRemaining=s(this.remainingHours().toFixed(2)),this.element.className="course-line",100===this.progress&&(this.element.style.backgroundColor="var(--highlight-color)",this.complete=!0),this.element.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="minus-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg><div class="name-small">${i(this.name,19)}</div>\n    <div class="course-details alternate">\n    <div class="detail-simple">\n    <div class="nameBox">${this.name}</div>\n    <div class="percBox"><span style="color: ${this.complete?"var(--text-color)":this.progressColor};">${this.simplePerc}%</span></div>\n    <div class="currBox"><span style="color: ${this.complete?"var(--text-color)":this.colorC};">${this.simpleCompleted}</span>&nbsp;&nbsp;&nbsp;hours completed</div>\n    <div class="remBox"><span style="color: ${this.complete?"var(--text-color)":this.colorR};">${this.simpleRemaining}</span>&nbsp;&nbsp;&nbsp;hours remaining</div>\n    \n    </div></div>\n    <div class="course-percent">${this.percent()} / ${this.percentOfTotal()} %</div>\n    <div class="course-percent-small">${this.percent()}% out of ${this.percentOfTotal()}% of total</div>\n    <div class="course-actions">\n    <button class="reset-button">Reset</button>\n    <button class="edit-button">Edit</button>\n  </div>\n    `}delete(){var e,t;this.element.remove(),e=this.id,t=this.totalHours,cs.total-=t,cs.courses=cs.courses.filter((t=>t.id!==e)),cs.displayCourses=cs.displayCourses.filter((t=>t.id!==e)),cs.hiddenCourses=cs.hiddenCourses.filter((t=>t.id!==e)),0===cs.courses.length&&Cs(),fs()}}class ps{constructor(e){e.courses.length>=3&&(this.total=e.total,this.sortedCourses=[...e.courses].sort(((e,t)=>{const o=e.completedHours()/this.total*100;return t.completedHours()/this.total*100-o})),this.numberOfCourses=this.sortedCourses.length,this.thickness=Math.max(100/(2*this.numberOfCourses),5),this.render())}render(){as.innerHTML='<span id="chartText" class="chart-text">Hours Completed</span>',Ei.matches?this.columnHoriz(this.sortedCourses,this.thickness):this.columnVert(this.sortedCourses,this.thickness)}columnHoriz(e,t){console.log("horz"),as.classList.remove("column-chart"),as.classList.add("column-chartH"),e.forEach((e=>{const n=document.createElement("div"),i=document.createElement("div"),s=e.completedHours()/this.total*100;n.classList.add("column"),n.style.width=`${s}%`,n.style.height=`${t}%`,n.style.backgroundColor=o(s),i.classList.add("column-labelH"),i.textContent=e.name,n.appendChild(i),n.addEventListener("mouseenter",(()=>Rs(e.id))),as.appendChild(n)}))}columnVert(e,n){const i=document.getElementById("chartText");as.classList.remove("column-chartH"),as.classList.add("column-chart"),e.forEach((e=>{const s=document.createElement("div"),r=document.createElement("div"),a=e.completedHours()/this.total*100;s.classList.add("column"),s.style.height=`${a}%`,s.style.width=`${n}%`,s.style.backgroundColor=o(a),r.classList.add("column-label"),r.textContent=function(e){const t=e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("").match(/[A-Z]/g)||[];return t.length>=2?t.slice(0,3).join(""):e.substring(0,4)}(e.name),s.appendChild(r),s.addEventListener("mouseenter",(()=>{Rs(e.id),s.style.backgroundColor=t(a)})),s.addEventListener("mouseleave",(()=>s.style.backgroundColor=o(a))),as.addEventListener("mouseleave",(()=>i.textContent="Hours Completed")),as.appendChild(s)}))}}function hs(){yi.innerHTML="";const e=document.getElementById("displayType").value;let t;"basic-display"===e?t=e=>e.renderSimple():"text-display"===e&&(t=e=>e.render()),cs.displayCourses.forEach((e=>{t(e);const o=document.createElement("li");o.appendChild(e.element);const n=o.querySelector(".minus-icon");o.querySelector(".reset-button").addEventListener("click",(()=>{var t;Is(t=e.id,cs.courses),Is(t,cs.displayCourses),Is(t,cs.hiddenCourses),fs()})),o.querySelector(".edit-button").addEventListener("click",(()=>{!function(e){cs.currentEdit=e;const t=cs.courses.find((t=>t.id===e));_i.value=t.name,ki.value=t.totalHours,Fi.value=t.completedHours(),Di.value=t.progress,Ui.style.display="block",Di.addEventListener("input",(function(){const e=Math.round(this.value/100*ki.value*100)/100;Fi.value=e})),Fi.addEventListener("input",(function(){const e=Math.round(this.value/ki.value*100*100)/100;Di.value=e}))}(e.id)})),n.addEventListener("click",(()=>{e.delete(),console.log(cs.courses,cs.displayCourses)})),yi.appendChild(o)})),Ts()}function gs(){cs.ascending?(bi.style.display="none",Ni.style.display="inline"):(bi.style.display="inline",Ni.style.display="none")}function ms(){Es(cs.courses),Es(cs.displayCourses),Es(cs.hiddenCourses),fs()}function Es(e){const t=Pi.value;e.sort(((e,o)=>{let n,i;return"progress"===t?(n=e.progress,i=o.progress):(n=e.remainingHours(),i=o.remainingHours()),cs.ascending?n-i:i-n}))}function fs(){cs.showCompleted?(cs.hiddenCourses.forEach((e=>{cs.displayCourses.push(e)})),cs.hiddenCourses=[]):(cs.displayCourses.forEach((e=>{100===e.progress&&cs.hiddenCourses.push(e)})),cs.displayCourses=cs.displayCourses.filter((e=>100!==e.progress))),hs()}function ys(e){e.matches?Ii.classList.add("small-modal"):Ii.classList.remove("small-modal")}function xs(){Ii.style.display="block",Ai.addEventListener("input",(function(){const e=Math.round(this.value/100*Si.value*100)/100;Ci.value=e})),Ci.addEventListener("input",(function(){const e=Math.round(this.value/Si.value*100*100)/100;Ai.value=e}))}function Is(e,t){cs.currentEdit=e;const o=t.find((t=>t.id===e));o&&(o.progress=0)}function ws(){vi.value="",Si.value="",Ci.value="",Ai.value="",_i.value="",ki.value="",Fi.value="",Di.value="",cs.codes||(document.getElementById("emailText").value="",document.getElementById("passwordText").value="")}async function vs(){try{const{accessToken:e,idToken:t}=(await so()).tokens??{};let o=t;return cs.currentUser===o.payload.email?(console.log("Auth check passed"),!0):(console.log("Auth check failed"),console.log(`1: ${cs.currentUser}, 2: ${o.payload.email}`),!1)}catch(e){console.log(e)}}async function Ss(){const e=r.API_URL.replace("{id}",cs.currentUser);axios.get(e).then((e=>{e.data.courses.forEach((e=>new ls(e.name,e.totalHours,e.progress))),console.log(cs.courses,cs.displayCourses),cs.got=!0,fs()})).catch((e=>{console.error("Error fetching courses:",e)})),As()}function Cs(){Yi.classList.add("sampler"),ss.style.display="none",Zi.style.display="flex",fi.style.marginBottom="0rem",Ei.removeEventListener("change",ys),Ii.classList.remove("small-modal")}function As(){Yi.classList.remove("sampler"),ss.style.display="flex",Zi.style.display="none",Ei.addEventListener("change",ys),ys(Ei)}function Ts(){let e=0,i=0,s=0,r=0;cs.courses.forEach((e=>{r+=e.completedHours(),s+=e.remainingHours()})),0!==r&&(e=Math.round(r/cs.total*1e4)/100,i=100-e),es.textContent=r.toFixed(2),ts.textContent=cs.total.toFixed(2),os.textContent=s.toFixed(2),ns.textContent=`${e.toFixed(2)}`,is.textContent=`${i.toFixed(2)}`,es.style.color=t(cs.total),ts.style.color=o(r),os.style.color=t(s),ns.style.color=n(e),is.style.color=n(i),function(e,t){const o=e/100*360,i=n(e),s=n(t);ss.style.setProperty("--percent",`${o}deg`),ss.style.setProperty("--color",i),ss.style.setProperty("--color2",s),rs.textContent=`${e} %`}(e,i),cs.courses.length>=3&&new ps(cs)}function Rs(e){const o=cs.courses.find((t=>t.id===e)),i=document.getElementById("chartText");i.innerHTML="";const s=document.createElement("span");s.textContent=`   (${o.percent()}%)`,s.style.color=n(o.percent());const r=document.createElement("span");r.textContent=` -  ${o.completedHours()} hours`,r.style.color=t(o.completedHours()),i.textContent=`${o.name}`,i.appendChild(r),i.appendChild(s)}Oi.addEventListener("change",hs),Ri.addEventListener("click",(()=>{cs.ascending=!cs.ascending,ms(),gs()})),Pi.addEventListener("change",(()=>{ms(),gs()})),Li.addEventListener("click",(()=>{cs.showCompleted=!cs.showCompleted,Li.className=cs.showCompleted?"fas fa-toggle-on":"fas fa-toggle-off",fs()})),Bi.addEventListener("change",(()=>{document.body.classList.remove("dark"),document.body.classList.remove("simple"),document.body.classList.remove("colorful");let e=Bi.value;document.body.classList.add(`${e}`)})),xi.addEventListener("click",(()=>xs())),Qi.addEventListener("click",(()=>xs())),Ti.addEventListener("click",(()=>{ss.scrollIntoView({behavior:"smooth",block:"center"})})),wi.addEventListener("click",(()=>{const e=document.getElementById("addCourseName").value,t=Number(document.getElementById("addTotalHours").value),o=Number(document.getElementById("addProgress").value);o>=0&&o<=100&&""!==e&&t>0?(new ls(e,t,o),fs(),Ii.style.display="none",ws(),console.log(cs.courses,cs.displayCourses)):o<0||o>100?(alert("Must enter a percentage from 0-100"),document.getElementById("addProgress").value="0"):""===e.trim()?alert("Must enter a course name"):alert("Must enter a value for total hours")})),Mi.addEventListener("click",(()=>{const e=_i.value,t=Number(ki.value),o=Number(Di.value);""!==e.trim()&&t>0&&o>=0&&o<=100?([cs.courses,cs.displayCourses,cs.hiddenCourses].forEach((n=>{!function(e,t,o,n,i){const s=e.findIndex((e=>e.id===t));-1!==s&&(e[s].name=o,e[s].totalHours=n,e[s].progress=i)}(n,cs.currentEdit,e,t,o)})),Ui.style.display="none",fs()):o<0||o>100?(alert("Must enter a percentage from 0-100"),currentProgress.value="0"):""===e?alert("Must enter a course name"):t<=0&&alert("Must enter a value for total hours greater than 0")})),Wi.addEventListener("click",(()=>{Ii.style.display="none",ws()})),ji.addEventListener("click",(()=>{Ui.style.display="none",ws()})),Ji.addEventListener("click",(()=>{$i.style.display="none",ws()})),window.onclick=e=>{e.target!==Ii&&e.target!==Ui&&e.target!==$i||(Ii.style.display="none",Ui.style.display="none",$i.style.display="none",ws())},Xi.addEventListener("click",(async()=>{console.log("click"),cs.got||async function(){const e=r.API_TEST_URL;axios.get(e).then((e=>{e.data.courses.forEach((e=>new ls(e.name,e.totalHours,e.progress))),console.log(cs.courses,cs.displayCourses),cs.got=!0,fs()})).catch((e=>{console.error("Error fetching courses:",e)})),As()}()})),Gi.addEventListener("click",(async()=>{if(await vs()){const e=r.API_PUT_URL.replace("{id}",cs.currentUser);console.log(cs.courses);const t=JSON.stringify(cs.courses);axios.put(e,t).then((e=>console.log("Success:",e.data))).catch((e=>console.error("Error:",e)))}else console.log("Authorization failed")})),async function(){try{const{username:e,userId:t}=await io();console.log(`Username: ${e}`),console.log(`User Id: ${t}`),cs.currentUser=e,cs.verified=!0,console.log(cs.currentUser,cs.verified),async function(){try{const{accessToken:e,idToken:t}=(await so()).tokens??{};console.log(t),console.log(t.payload.email),cs.token=e,cs.currentUser=t.payload.email}catch(e){console.log(e)}}()}catch(e){console.log(e)}}(),setTimeout((()=>{cs.verified?(Vi.style.display="none",Gi.style.display="flex",qi.style.display="block",Ki.textContent=i(cs.currentUser,14),setTimeout((async()=>{await vs()?(cs.got||Ss(),hs()):(console.log("Authorization failed"),cs.verified=!1,ds())}),2500)):(Vi.style.display="block",Gi.style.display="none",qi.style.display="none")}),2e3),Cs(),Ts()})();