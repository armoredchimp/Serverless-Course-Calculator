/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e){return 0===(e=Math.round(e))?"var(--text-color)":e<=5?"var(--primary-color)":e<=15?"var(--yellow-color)":e<=25?"var(--secondary-color)":e<=35?"var(--maroon-color)":"var(--red-color)"}function t(e){return 0===(e=Math.round(e))?"var(--text-color)":e<=25?"var(--primary-color)":e<=55?"var(--teal-color)":e<=95?"var(--secondary-color)":e<=125?"var(--yellow-color)":e<=175?"var(--maroon-color)":"var(--red-color)"}function o(e){return(e=Math.round(e))>=176?"var(--teal-color)":e>=126?"var(--secondary-color)":e>=56?"var(--yellow-color)":e>=26?"var(--maroon-color)":e>0?"var(--red-color)":"var(--primary-color)"}function n(e){return 100===(e=Math.round(e))?"var(--gold2-color)":e>=80?"var(--primary-color)":e>=60?"var(--teal-color)":e>=40?"var(--yellow-color)":e>=21?"var(--secondary-color)":e>=1?"var(--maroon-color)":"var(--red-color)"}function i(e){let t=e.toString();switch(t.length){case 3:return t="00"+t,t;case 4:return t="0"+t,t;default:return t}}function s({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class r{constructor(){}configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,o,n;return t=await this.getTokens(e),t?(n=t.accessToken?.payload?.sub,o=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:t,authenticated:!0,forceRefresh:e.forceRefresh}))):o=await(this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh})),{tokens:t,credentials:o?.credentials,identityId:o?.identityId,userSub:n}}async clearCredentials(){if(this.authOptions?.credentialsProvider)return await this.authOptions.credentialsProvider.clearCredentialsAndIdentityId()}async getTokens(e){return await(this.authOptions?.tokenProvider?.getTokens(e))??void 0}}var a;!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE"}(a||(a={}));const c={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5};class d{constructor(e,t=a.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let o=this.level;if(d.LOG_LEVEL&&(o=d.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(o=window.LOG_LEVEL),!(c[e]>=c[o]))return;let n=console.log.bind(console);e===a.ERROR&&console.error&&(n=console.error.bind(console)),e===a.WARN&&console.warn&&(n=console.warn.bind(console));const i=`[${e}] ${this._ts()} ${this.name}`;let s="";if(1===t.length&&"string"==typeof t[0])s=`${i} - ${t[0]}`,n(s);else if(1===t.length)s=`${i} ${t[0]}`,n(i,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),s=`${i} - ${t[0]} ${e}`,n(`${i} - ${t[0]}`,e)}else s=`${i} ${t}`,n(i,t);for(const e of this._pluggables){const t={message:s,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(a.INFO,...e)}info(...e){this._log(a.INFO,...e)}warn(...e){this._log(a.WARN,...e)}error(...e){this._log(a.ERROR,...e)}debug(...e){this._log(a.DEBUG,...e)}verbose(...e){this._log(a.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}d.LOG_LEVEL=null;class u extends Error{constructor({message:e,name:t,recoverySuggestion:o,underlyingError:n}){super(e),this.name=t,this.underlyingError=n,this.recoverySuggestion=o,this.constructor=u,Object.setPrototypeOf(this,u.prototype)}}const l="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",p=new d("Hub");class h{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){const o=this.listeners.get(e);o?this.listeners.set(e,[...o.filter((({callback:e})=>e!==t))]):p.warn(`No listeners for ${e}`)}dispatch(e,t,o,n){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&(n===l||p.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`));const i={channel:e,payload:{...t},source:o,patternInfo:[]};try{this._toListeners(i)}catch(e){p.error(e)}}listen(e,t,o="noname"){let n;if("function"!=typeof t)throw new u({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});n=t;let i=this.listeners.get(e);return i||(i=[],this.listeners.set(e,i)),i.push({name:o,callback:n}),()=>{this._remove(e,n)}}_toListeners(e){const{channel:t,payload:o}=e,n=this.listeners.get(t);n&&n.forEach((n=>{p.debug(`Dispatching to ${t} with `,o);try{n.callback(e)}catch(e){p.error(e)}}))}}const m=new h("__default__"),E=new h("internal-hub"),g=new d("parseAWSExports"),f={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},y=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new u({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:o,aws_appsync_graphqlEndpoint:n,aws_appsync_region:i,aws_bots_config:s,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:l,aws_cognito_verification_mechanisms:p,aws_cognito_signup_attributes:h,aws_cognito_social_providers:m,aws_cognito_username_attributes:E,aws_mandatory_sign_in:y,aws_mobile_analytics_app_id:x,aws_mobile_analytics_app_region:w,aws_user_files_s3_bucket:S,aws_user_files_s3_bucket_region:C,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:A,aws_user_pools_id:R,aws_user_pools_web_client_id:T,geo:P,oauth:b,predictions:N,aws_cloud_logic_custom:U,Notifications:_,modelIntrospection:F}=e,D={};x&&(D.Analytics={Pinpoint:{appId:x,region:w}});const{InAppMessaging:k,Push:M}=_??{};if(k?.AWSPinpoint||M?.AWSPinpoint){if(k?.AWSPinpoint){const{appId:e,region:t}=k.AWSPinpoint;D.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(M?.AWSPinpoint){const{appId:e,region:t}=M.AWSPinpoint;D.Notifications={...D.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(s)&&(D.Interactions={LexV1:Object.fromEntries(s.map((e=>[e.name,e])))}),n){const e=f[o];e||g.debug(`Invalid authentication type ${o}. Falling back to IAM.`),D.API={GraphQL:{endpoint:n,apiKey:t,region:i,defaultAuthMode:e??"iam"}},F&&(D.API.GraphQL.modelIntrospection=F)}const L=c?{status:c&&c.toLowerCase(),totpEnabled:d?.includes("TOTP")??!1,smsEnabled:d?.includes("SMS")??!1}:void 0,O=l?{minLength:l.passwordPolicyMinLength,requireLowercase:l.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:l.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:l.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:l.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,B=Array.from(new Set([...p??[],...h??[]])).reduce(((e,t)=>({...e,[t.toLowerCase()]:{required:!0}})),{}),q=E?.includes("EMAIL")??!1,V=E?.includes("PHONE_NUMBER")??!1;(r||R)&&(D.Auth={Cognito:{identityPoolId:r,allowGuestAccess:"enable"!==y,signUpVerificationMethod:a,userAttributes:B,userPoolClientId:T,userPoolId:R,mfa:L,passwordFormat:O,loginWith:{username:!q&&!V,email:q,phone:V}}});const K=!!b&&Object.keys(b).length>0,$=!!m&&m.length>0;if(D.Auth&&K&&(D.Auth.Cognito.loginWith={...D.Auth.Cognito.loginWith,oauth:{...I(b),...$&&{providers:v(m)}}}),S&&(D.Storage={S3:{bucket:S,region:C,dangerouslyConnectToHttpEndpointForTesting:A}}),P){const{amazon_location_service:e}=P;D.Geo=e?{LocationService:{...e,searchIndices:e.search_indices,region:e.region}}:{...P}}if(U&&(D.API={...D.API,REST:U.reduce(((e,t)=>{const{name:o,endpoint:n,region:i,service:s}=t;return{...e,[o]:{endpoint:n,...s?{service:s}:void 0,...i?{region:i}:void 0}}}),{})}),N){const{VoiceId:e}=N?.convert?.speechGenerator?.defaults??{};D.Predictions=e?{...N,convert:{...N.convert,speechGenerator:{...N.convert.speechGenerator,defaults:{voiceId:e}}}}:N}return D},x=e=>e?.split(",")??[],I=({domain:e,scope:t,redirectSignIn:o,redirectSignOut:n,responseType:i})=>({domain:e,scopes:t,redirectSignIn:x(o),redirectSignOut:x(n),responseType:i}),v=e=>e.map((e=>{const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)})),w=e=>{const t=Reflect.ownKeys(e);for(const o of t){const t=e[o];(t&&"object"==typeof t||"function"==typeof t)&&w(t)}return Object.freeze(e)},S=Symbol("oauth-listener"),C=new class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new r}configure(e,t){let o;o=Object.keys(e).some((e=>e.startsWith("aws_")))?y(e):e,this.resourcesConfig=o,t&&(this.libraryOptions=t),this.resourcesConfig=w(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),m.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",l),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[S](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}};function A(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)e[n]=o[n]}return e}var R,T=function e(t,o){function n(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=A({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var r in i)i[r]&&(s+="; "+r,!0!==i[r]&&(s+="="+i[r].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var o=document.cookie?document.cookie.split("; "):[],n={},i=0;i<o.length;i++){var s=o[i].split("="),r=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(r,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",A({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,A({},this.attributes,t))},withConverter:function(t){return e(A({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class P{constructor(e={}){const{path:t,domain:o,expires:n,sameSite:i,secure:s}=e;if(this.domain=o,this.path=t||"/",this.expires=e.hasOwnProperty("expires")?n:365,this.secure=!e.hasOwnProperty("secure")||s,e.hasOwnProperty("sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){T.set(e,t,this.getData())}async getItem(e){return T.get(e)??null}async removeItem(e){T.remove(e,this.getData())}async clear(){const e=T.get(),t=Object.keys(e).map((e=>this.removeItem(e)));await Promise.all(t)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown"}(R||(R={}));class b extends u{constructor(){super({name:R.PlatformNotSupported,message:"Function not supported on current platform"})}}class N{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new b;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new b;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new b;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new b;this.storage.clear()}}class U{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}const _=new class extends N{constructor(){super("undefined"!=typeof window&&window.localStorage?window.localStorage:new U)}},F=(new class extends N{constructor(){super("undefined"!=typeof window&&window.sessionStorage?window.sessionStorage:new U)}},new N(new U),(e,t=u)=>(o,n,i)=>{const{message:s,recoverySuggestion:r}=e[n];if(!o)throw new t({name:n,message:i?`${s} ${i}`:s,recoverySuggestion:r})});var D,k;(k=D||(D={})).AuthTokenConfigException="AuthTokenConfigException",k.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",k.AuthUserPoolException="AuthUserPoolException",k.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",k.OAuthNotConfigureException="OAuthNotConfigureException";const M=F({[D.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[D.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[D.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[D.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[D.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}}),L=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new u({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},O={convert:e=>(()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new u({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})})()(e)};function B(e){let t=!0;return t=!!e&&!!e.userPoolId&&!!e.userPoolClientId,M(t,D.AuthUserPoolException)}function q(e){return M(!!e?.identityPoolId,D.InvalidIdentityPoolIdException)}function V(e){const t=e.split(".");if(3!==t.length)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(O.convert(o).split("").map((e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));return{toString:()=>e,payload:JSON.parse(n)}}catch(e){throw new Error("Invalid token payload")}}const K=(e,t,o,n)=>async(i,s)=>{const r={...n,...i},a=await r.endpointResolver(r,s),c=await t(s,a),d=await e(c,{...r});return await o(d)},$={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},H={partitions:[$,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},G=e=>{const{partitions:t}=H;for(const{regions:o,outputs:n,regionRegex:i}of t){const t=new RegExp(i);if(o.includes(e)||t.test(e))return n.dnsSuffix}return $.outputs.dnsSuffix},z=(e,t)=>{if(t?.aborted)return Promise.resolve();let o,n;const i=new Promise((t=>{n=t,o=setTimeout(t,e)}));return t?.addEventListener("abort",(function e(i){clearTimeout(o),t?.removeEventListener("abort",e),n()})),i},W=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},j=(e,t)=>(o,n)=>{const i={};let s=t=>e(t,n);for(let e=t.length-1;e>=0;e--)s=(0,t[e])(n)(s,i);return s(o)},J=e=>{let t;return()=>(t||(t=e()),t)},Y=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Z=j((async({url:e,method:t,headers:o,body:n},{abortSignal:i,cache:s,withCrossDomainCredentials:r})=>{let a;try{a=await fetch(e,{method:t,headers:o,body:Y(t)?n:void 0,signal:i,cache:s,credentials:r?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new Error("Network error");throw e}const c={};return a.headers?.forEach(((e,t)=>{c[t.toLowerCase()]=e})),{statusCode:a.status,headers:c,body:null,body:Object.assign(a.body??{},{text:J((()=>a.text())),blob:J((()=>a.blob())),json:J((()=>a.json()))})}}),[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>o=>async function(n){if(0===t.trim().length)return await o(n);{const i=e.toLowerCase();return n.headers[i]=n.headers[i]?`${n.headers[i]} ${t}`:t,await o(n)}},({maxAttempts:e=3,retryDecider:t,computeDelay:o,abortSignal:n})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,s)=>async function(r){let a,c,d=s.attemptsCount??0;const u=()=>{if(c)return W(c,d),c;throw W(a,d),a};for(;!n?.aborted&&d<e;){try{c=await i(r),a=void 0}catch(e){a=e,c=void 0}if(d=(s.attemptsCount??0)>d?s.attemptsCount??0:d+1,s.attemptsCount=d,!await t(c,a))return u();if(!n?.aborted&&d<e){const e=o(d);await z(e,n)}}if(n?.aborted)throw new Error("Request aborted.");return u()}}]),Q=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],X=e=>async(t,o)=>{const n=o??await e(t)??void 0,i=n?.code,s=t?.statusCode;return ne(o)||oe(s,i)||(e=>!!e&&Q.includes(e))(i)||ie(s,i)},ee=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],te=["TimeoutError","RequestTimeout","RequestTimeoutException"],oe=(e,t)=>429===e||!!t&&ee.includes(t),ne=e=>"Network error"===e?.name,ie=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&te.includes(t),se=e=>{const{headers:t,statusCode:o}=e;return{...re(e)?e.$metadata:{},httpStatusCode:o,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},re=e=>"object"==typeof e?.$metadata,ae=async e=>{if(!e||e.statusCode<300)return;const t=await ce(e),o=(e=>{const[t]=e.toString().split(/[\,\:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),n=t.message??t.Message??"Unknown error",i=new Error(n);return Object.assign(i,{name:o,$metadata:se(e)})},ce=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:se(e)})},de=3e5,ue=e=>{const t=function(e=3e5){return t=>{const o=2**t*100+100*Math.random();return!(o>e)&&o}}(de),o=t(e);return!1===o?de:o},le=URL;var pe,he,me,Ee,ge,fe,ye,xe,Ie,ve,we,Se,Ce,Ae;!function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(pe||(pe={})),function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(he||(he={})),function(e){e.Record="1",e.IdentifyUser="2"}(me||(me={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(Ee||(Ee={})),(Ae=ge||(ge={})).SignUp="1",Ae.ConfirmSignUp="2",Ae.ResendSignUpCode="3",Ae.SignIn="4",Ae.FetchMFAPreference="6",Ae.UpdateMFAPreference="7",Ae.SetUpTOTP="10",Ae.VerifyTOTPSetup="11",Ae.ConfirmSignIn="12",Ae.DeleteUserAttributes="15",Ae.DeleteUser="16",Ae.UpdateUserAttributes="17",Ae.FetchUserAttributes="18",Ae.ConfirmUserAttribute="22",Ae.SignOut="26",Ae.UpdatePassword="27",Ae.ResetPassword="28",Ae.ConfirmResetPassword="29",Ae.FederatedSignIn="30",Ae.RememberDevice="32",Ae.ForgetDevice="33",Ae.FetchDevices="34",Ae.SendUserAttributeVerificationCode="35",Ae.SignInWithRedirect="36",function(e){e.Subscribe="1",e.GraphQl="2"}(fe||(fe={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(ye||(ye={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(xe||(xe={})),function(e){e.None="0"}(Ie||(Ie={})),function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(ve||(ve={})),function(e){e.Subscribe="1"}(we||(we={})),function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(Se||(Se={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"}(Ce||(Ce={}));const Re="6.0.16",Te=()=>"undefined"!=typeof global,Pe=()=>"undefined"!=typeof window,be=()=>"undefined"!=typeof document,Ne=()=>"undefined"!=typeof process,Ue=(e,t)=>!!Object.keys(e).find((e=>e.startsWith(t))),_e=[{platform:pe.Expo,detectionMethod:function(){return Te()&&void 0!==global.expo}},{platform:pe.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:pe.NextJs,detectionMethod:function(){return Pe()&&window.next&&"object"==typeof window.next}},{platform:pe.Nuxt,detectionMethod:function(){return Pe()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:pe.Angular,detectionMethod:function(){const e=Boolean(be()&&document.querySelector("[ng-version]")),t=Boolean(Pe()&&void 0!==window.ng);return e||t}},{platform:pe.React,detectionMethod:function(){const e=e=>e.startsWith("_react")||e.startsWith("__react");return be()&&Array.from(document.querySelectorAll("[id]")).some((t=>Object.keys(t).find(e)))}},{platform:pe.VueJs,detectionMethod:function(){return Pe()&&Ue(window,"__VUE")}},{platform:pe.Svelte,detectionMethod:function(){return Pe()&&Ue(window,"__SVELTE")}},{platform:pe.WebUnknown,detectionMethod:function(){return Pe()}},{platform:pe.NextJsSSR,detectionMethod:function(){return Te()&&(Ue(global,"__next")||Ue(global,"__NEXT"))}},{platform:pe.NuxtSSR,detectionMethod:function(){return Te()&&void 0!==global.__NUXT_PATHS__}},{platform:pe.ReactSSR,detectionMethod:function(){return Ne()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("react")))}},{platform:pe.VueJsSSR,detectionMethod:function(){return Te()&&Ue(global,"__VUE")}},{platform:pe.AngularSSR,detectionMethod:function(){return Ne()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:pe.SvelteSSR,detectionMethod:function(){return Ne()&&void 0!==process.env&&!!Object.keys(process.env).find((e=>e.includes("svelte")))}}];let Fe;const De=[];let ke=!1;const Me=()=>{if(!Fe){if(Fe=_e.find((e=>e.detectionMethod()))?.platform||pe.ServerSideUnknown,ke)for(;De.length;)De.pop()?.();else De.forEach((e=>e()));Oe(pe.ServerSideUnknown,10),Oe(pe.WebUnknown,10)}return Fe},Le=e=>{ke||De.push(e)};function Oe(e,t){Fe!==e||ke||setTimeout((()=>{Fe=void 0,ke=!0,setTimeout(Me,1e3)}),t)}const Be={},qe="aws-amplify";new class{constructor(){this.userAgent=`${qe}/${Re}`}get framework(){return Me()}get isReactNative(){return this.framework===pe.ReactNative||this.framework===pe.Expo}observeFrameworkChanges(e){Le(e)}};const Ve=e=>(({category:e,action:t,framework:o}={})=>{const n=[[qe,Re]];if(e&&n.push([e,t]),n.push(["framework",Me()]),e&&t){const o=((e,t)=>Be[e]?.[t]?.additionalDetails)(e,t);o&&o.forEach((e=>{n.push(e)}))}return n})(e).map((([e,t])=>e&&t?`${e}/${t}`:e)).join(" "),Ke="cognito-idp",$e=j(Z,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),He={service:Ke,endpointResolver:({region:e})=>{const t=C.getConfig().Auth?.Cognito,o=t?.userPoolEndpoint,n=new le(`https://${Ke}.${e}.${G(e)}`);return{url:o?new le(o):n}},retryDecider:X(ae),computeDelay:ue,userAgentValue:Ve(),cache:"no-store"};class Ge extends u{constructor(e){super(e),this.constructor=Ge,Object.setPrototypeOf(this,Ge.prototype)}}function ze(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new Ge({name:R.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const We=e=>(t,o)=>{const n=(e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}))(e);return(({url:e},t,o)=>({headers:t,url:e,body:o,method:"POST"}))(o,n,JSON.stringify(t))},je=()=>async e=>{if(e.statusCode>=300){const t=await ae(e);throw ze(t),new Ge({name:t.name,message:t.message})}return await ce(e)},Je=()=>async e=>{if(e.statusCode>=300){const t=await ae(e);throw ze(t),new Ge({name:t.name,message:t.message})}},Ye=K($e,We("InitiateAuth"),je(),He),Ze=(K($e,We("RevokeToken"),je(),He),K($e,We("SignUp"),je(),He)),Qe=(K($e,We("ConfirmSignUp"),je(),He),K($e,We("ForgotPassword"),je(),He),K($e,We("ConfirmForgotPassword"),je(),He),K($e,We("RespondToAuthChallenge"),je(),He)),Xe=(K($e,We("ResendConfirmationCode"),je(),He),K($e,We("VerifySoftwareToken"),je(),He),K($e,We("AssociateSoftwareToken"),je(),He)),et=(K($e,We("SetUserMFAPreference"),je(),He),K($e,We("GetUser"),je(),He),K($e,We("ChangePassword"),je(),He),K($e,We("ConfirmDevice"),je(),He));function tt(e){const t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||"string"!=typeof t)throw new Ge({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function ot(e){if(!e||!e.includes(":"))throw new Ge({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}K($e,We("ForgetDevice"),Je(),He),K($e,We("DeleteUser"),Je(),He),K($e,We("GetUserAttributeVerificationCode"),je(),He),K($e,We("GlobalSignOut"),je(),He),K($e,We("UpdateUserAttributes"),je(),He),K($e,We("VerifyUserAttribute"),je(),He),K($e,We("UpdateDeviceStatus"),je(),He),K($e,We("ListDevices"),je(),He),K($e,We("DeleteUserAttributes"),je(),He);const nt="UserUnAuthenticatedException",it="DeviceMetadataNotFoundException",st="AutoSignInException";new Ge({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new Ge({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const rt=new Ge({name:"TokenRefreshException",message:"Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.",recoverySuggestion:"Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }"}),at=new Ge({name:nt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function ct(e){if(!(e&&e.deviceKey&&e.deviceGroupKey&&e.randomPassword))throw new Ge({name:it,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}function dt(e){return e?.accessToken||e?.idToken}function ut({username:e,userPoolId:t,userPoolClientId:o}){if("undefined"==typeof window)return;const n=window.AmazonCognitoAdvancedSecurityData;if(void 0===n)return;const i=n.getData(e,t,o);return i?{EncodedData:i}:{}}const lt=(e=>{let t;return async(...e)=>t||(t=new Promise((async(o,n)=>{try{o(await(async({tokens:e,authConfig:t,username:o})=>{B(t?.Cognito);const n=tt(t.Cognito.userPoolId);!function(e){if(function(e){return dt(e)&&!e?.refreshToken}(e))throw rt;if(!function(e){return dt(e)&&e?.refreshToken}(e))throw at}(e);const i=e.refreshToken,s={REFRESH_TOKEN:i};e.deviceMetadata?.deviceKey&&(s.DEVICE_KEY=e.deviceMetadata.deviceKey);const r=ut({username:o,userPoolId:t.Cognito.userPoolId,userPoolClientId:t.Cognito.userPoolClientId}),{AuthenticationResult:a}=await Ye({region:n},{ClientId:t?.Cognito?.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:s,UserContextData:r}),c=V(a?.AccessToken??""),d=a?.IdToken?V(a.IdToken):void 0,u=c.payload.iat;if(!u)throw new Ge({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:c,idToken:d,clockDrift:1e3*u-(new Date).getTime(),refreshToken:i,username:o}})(...e))}catch(e){n(e)}finally{t=void 0}})),t)})(),pt={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var ht;!function(e){e.InvalidAuthTokens="InvalidAuthTokens"}(ht||(ht={}));const mt=F({[ht.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}});class Et{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new Ge({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{const e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new Ge({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const o=V(t),n=await this.getKeyValueStorage().getItem(e.idToken),i=n?V(n):void 0,s=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,r=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",a=Number.parseInt(r),c=await this.getKeyValueStorage().getItem(e.signInDetails),d={accessToken:o,idToken:i,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return c&&(d.signInDetails=JSON.parse(c)),d}catch(e){return null}}async storeTokens(e){mt(void 0!==e,ht.InvalidAuthTokens),await this.clearTokens();const t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);const o=await this.getAuthKeys();await this.getKeyValueStorage().setItem(o.accessToken,e.accessToken.toString()),e.idToken&&await this.getKeyValueStorage().setItem(o.idToken,e.idToken.toString()),e.refreshToken&&await this.getKeyValueStorage().setItem(o.refreshToken,e.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(o.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(o.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(o.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails&&await this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(e.signInDetails)),await this.getKeyValueStorage().setItem(o.clockDrift,`${e.clockDrift}`)}async clearTokens(){const e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(e){const t=await this.getAuthKeys(e),o=await this.getKeyValueStorage().getItem(t.deviceKey),n=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i?{deviceKey:o??void 0,deviceGroupKey:n??void 0,randomPassword:i}:null}async clearDeviceMetadata(e){const t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){B(this.authConfig?.Cognito);const t=e??await this.getLastAuthUser();return gt(this.name,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){B(this.authConfig?.Cognito);const e=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}const gt=(e,t)=>ft(pt)(`${e}`,t);function ft(e){const t=Object.values({...e});return(e,o)=>t.reduce(((t,n)=>({...t,[n]:`${e}.${o}.${n}`})),{})}class yt{constructor(){this.waitForInflightOAuth=async()=>{}}setAuthConfig(e){this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}setWaitForInflightOAuth(e){this.waitForInflightOAuth=e}getTokenStore(){if(!this.tokenStore)throw new Ge({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new Ge({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{B(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),t=await this.getTokenStore().loadTokens();const o=await this.getTokenStore().getLastAuthUser();if(null===t)return null;const n=!!t?.idToken&&s({expiresAt:1e3*(t.idToken?.payload?.exp??0),clockDrift:t.clockDrift??0}),i=s({expiresAt:1e3*(t.accessToken?.payload?.exp??0),clockDrift:t.clockDrift??0});return(e?.forceRefresh||n||i)&&(t=await this.refreshTokens({tokens:t,username:o}),null===t)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{const o=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return await this.setTokens({tokens:o}),m.dispatch("auth",{event:"tokenRefresh"},"Auth",l),o}catch(e){return this.handleErrors(e)}}handleErrors(e){if(ze(e),"Network error"!==e.message&&this.clearTokens(),m.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",l),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}}const xt=new class{constructor(){this.authTokenStore=new Et,this.authTokenStore.setKeyValueStorage(_),this.tokenOrchestrator=new yt,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(lt)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setWaitForInflightOAuth(e){this.tokenOrchestrator.setWaitForInflightOAuth(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}},It=xt.tokenOrchestrator,vt={identityId:"identityId"},wt=new d("DefaultIdentityIdStore");Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var St=64,Ct=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),At=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Rt=Math.pow(2,53)-1,Tt=function(){function e(){this.state=Int32Array.from(At),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,o=e.byteLength;if(this.bytesHashed+=o,8*this.bytesHashed>Rt)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=e[t++],o--,this.bufferLength===St&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(t.setUint8(this.bufferLength++,128),o%St>=56){for(var n=this.bufferLength;n<St;n++)t.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(n=this.bufferLength;n<56;n++)t.setUint8(n,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(32);for(n=0;n<8;n++)i[4*n]=this.state[n]>>>24&255,i[4*n+1]=this.state[n]>>>16&255,i[4*n+2]=this.state[n]>>>8&255,i[4*n+3]=this.state[n]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,o=t[0],n=t[1],i=t[2],s=t[3],r=t[4],a=t[5],c=t[6],d=t[7],u=0;u<St;u++){if(u<16)this.temp[u]=(255&e[4*u])<<24|(255&e[4*u+1])<<16|(255&e[4*u+2])<<8|255&e[4*u+3];else{var l=this.temp[u-2],p=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,h=((l=this.temp[u-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[u]=(p+this.temp[u-7]|0)+(h+this.temp[u-16]|0)}var m=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&a^~r&c)|0)+(d+(Ct[u]+this.temp[u]|0)|0)|0,E=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&n^o&i^n&i)|0;d=c,c=a,a=r,r=s+m|0,s=i,i=n,n=o,o=m+E|0}t[0]+=o,t[1]+=n,t[2]+=i,t[3]+=s,t[4]+=r,t[5]+=a,t[6]+=c,t[7]+=d},e}(),Pt="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function bt(e){return e instanceof Uint8Array?e:"string"==typeof e?Pt(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}var Nt=function(){function e(e){this.secret=e,this.hash=new Tt,this.reset()}return e.prototype.update=function(e){var t;if(("string"==typeof(t=e)?0!==t.length:0!==t.byteLength)&&!this.error)try{this.hash.update(bt(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return e=this,t=void 0,n=function(){return function(e,t){var o,n,i,s,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(r=0)),r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((i=(i=r.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(e){return[2,this.digestSync()]}))},new((o=void 0)||(o=Promise))((function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}));var e,t,o,n},e.prototype.reset=function(){if(this.hash=new Tt,this.secret){this.outer=new Tt;var e=function(e){var t=bt(e);if(t.byteLength>St){var o=new Tt;o.update(t),t=o.digest()}var n=new Uint8Array(St);return n.set(t),n}(this.secret),t=new Uint8Array(St);t.set(e);for(var o=0;o<St;o++)e[o]^=54,t[o]^=92;for(this.hash.update(e),this.outer.update(t),o=0;o<e.byteLength;o++)e[o]=0}},e}();const Ut={},_t={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),Ut[e]=t,_t[t]=e}const Ft=j(Z,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),Dt={service:"cognito-identity",endpointResolver:({region:e})=>({url:new le(`https://cognito-identity.${e}.${G(e)}`)}),retryDecider:X(ae),computeDelay:ue,userAgentValue:Ve(),cache:"no-store"};Le((()=>{Dt.userAgentValue=Ve()}));const kt=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Mt=({url:e},t,o)=>({headers:t,url:e,body:o,method:"POST"}),Lt=K(Ft,((e,t)=>{const o=kt("GetId"),n=JSON.stringify(e);return Mt(t,o,n)}),(async e=>{if(e.statusCode>=300)throw await ae(e);return{IdentityId:(await ce(e)).IdentityId,$metadata:se(e)}}),Dt);function Ot(e){const t=V(e).payload.iss,o={};if(!t)throw new Ge({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return o[t.replace(/(^\w+:|^)\/\//,"")]=e,o}const Bt=new d("CognitoIdentityIdProvider");async function qt(e,t){const o=t?.identityPoolId,n=ot(o),i=(await Lt({region:n},{IdentityPoolId:o,Logins:e})).IdentityId;if(!i)throw new Ge({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const Vt=({AccessKeyId:e,SecretKey:t,SessionToken:o,Expiration:n}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:o,Expiration:n&&new Date(1e3*n)}),Kt=K(Ft,((e,t)=>{const o=kt("GetCredentialsForIdentity"),n=JSON.stringify(e);return Mt(t,o,n)}),(async e=>{if(e.statusCode>=300)throw await ae(e);{const t=await ce(e);return{IdentityId:t.IdentityId,Credentials:Vt(t.Credentials),$metadata:se(e)}}}),Dt),$t=new d("CognitoCredentialsProvider"),Ht=3e6,Gt=new class{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){$t.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){$t.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){const t=e.authenticated,o=e.tokens,n=e.authConfig;try{q(n?.Cognito)}catch{return}if(!t&&!n.Cognito.allowGuestAccess)return;const i=e.forceRefresh,s=this.hasTokenChanged(o),r=await async function({tokens:e,authConfig:t,identityIdStore:o}){o.setAuthConfig({Cognito:t});let n=await o.loadIdentityId();if(e){if(n&&"primary"===n.type)return n.id;{const o=e.idToken?Ot(e.idToken.toString()):{},i=await qt(o,t);n&&n.id===i&&Bt.debug(`The guest identity ${n.id} has become the primary identity.`),n={id:i,type:"primary"}}}else{if(n&&"guest"===n.type)return n.id;n={id:await qt({},t),type:"guest"}}return o.storeIdentityId(n),n.id}({tokens:o,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return(i||s)&&this.clearCredentials(),t?(function(e){if(!e||!e.idToken)throw new Ge({name:nt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(o),this.credsForOIDCTokens(n.Cognito,o,r)):this.getGuestCredentials(r,n.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return $t.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=ot(t.identityPoolId),n=await Kt({region:o},{IdentityId:e});if(n.Credentials&&n.Credentials.AccessKeyId&&n.Credentials.SecretKey){this._nextCredentialsRefresh=(new Date).getTime()+Ht;const t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e},o=n.IdentityId;return o&&(t.identityId=o,this._identityIdStore.storeIdentityId({id:o,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new Ge({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,o){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return $t.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const n=t.idToken?Ot(t.idToken.toString()):{},i=ot(e.identityPoolId),s=await Kt({region:i},{IdentityId:o,Logins:n});if(s.Credentials&&s.Credentials.AccessKeyId&&s.Credentials.SecretKey){const e={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:o};this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},this._nextCredentialsRefresh=(new Date).getTime()+Ht;const n=s.IdentityId;return n&&(e.identityId=n,this._identityIdStore.storeIdentityId({id:n,type:"primary"})),e}throw new Ge({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}(new class{setAuthConfig(e){var t,o;q(e.Cognito),this.authConfig=e,this._authKeys=(t="Cognito",o=e.Cognito.identityPoolId,ft(vt)(`com.amplify.${t}`,o))}constructor(e){this._authKeys={},this.keyValueStorage=e}async loadIdentityId(){q(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const e=await this.keyValueStorage.getItem(this._authKeys.identityId);return e?{id:e,type:"guest"}:null}}catch(e){return wt.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){q(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=e.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}(_)),zt={configure(e,t){let o;return o=Object.keys(e).some((e=>e.startsWith("aws_")))?y(e):e,o.Auth?t?.Auth?C.configure(o,t):C.libraryOptions.Auth?t?(void 0!==t.ssr&&xt.setKeyValueStorage(t.ssr?new P({sameSite:"lax"}):_),C.configure(o,{Auth:C.libraryOptions.Auth,...t})):void C.configure(o):(xt.setAuthConfig(o.Auth),xt.setKeyValueStorage(t?.ssr?new P({sameSite:"lax"}):_),C.configure(o,{...t,Auth:{tokenProvider:xt,credentialsProvider:Gt}})):C.configure(o,t)},getConfig:()=>C.getConfig()};var Wt,jt;(jt=Wt||(Wt={})).EmptySignInUsername="EmptySignInUsername",jt.EmptySignInPassword="EmptySignInPassword",jt.CustomAuthSignInPassword="CustomAuthSignInPassword",jt.EmptySignUpUsername="EmptySignUpUsername",jt.EmptySignUpPassword="EmptySignUpPassword",jt.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",jt.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",jt.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",jt.EmptyChallengeResponse="EmptyChallengeResponse",jt.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",jt.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",jt.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",jt.EmptyResetPasswordUsername="EmptyResetPasswordUsername",jt.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",jt.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",jt.IncorrectMFAMethod="IncorrectMFAMethod",jt.EmptyUpdatePassword="EmptyUpdatePassword";const Jt={[Wt.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[Wt.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[Wt.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[Wt.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[Wt.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[Wt.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[Wt.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[Wt.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[Wt.EmptySignInPassword]:{message:"password is required to signIn"},[Wt.EmptySignInUsername]:{message:"username is required to signIn"},[Wt.EmptySignUpPassword]:{message:"password is required to signUp"},[Wt.EmptySignUpUsername]:{message:"username is required to signUp"},[Wt.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[Wt.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[Wt.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[Wt.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[Wt.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var Yt,Zt,Qt;function Xt(e,t){const{message:o,recoverySuggestion:n}=Jt[t];if(!e)throw new Ge({name:t,message:o,recoverySuggestion:n})}function eo(e){return Object.entries(e).map((([e,t])=>({Name:e,Value:t})))}!function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"}(Yt||(Yt={})),(Qt=Zt||(Zt={})).SignInException="SignInException",Qt.OAuthSignInError="OAuthSignInException";const to={convert(e,{urlSafe:t}={urlSafe:!1}){const o="string"==typeof e?e:function(e){return Array.from(e,(e=>String.fromCodePoint(e))).join("")}(e),n=(()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new u({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})})()(o);return t?n.replace(/\+/g,"-").replace(/\//g,"_"):n}};function oo(e,t){null!=e&&this.fromString(e,t)}function no(){return new oo(null,null)}let io;const so="undefined"!=typeof navigator;so&&"Microsoft Internet Explorer"===navigator.appName?(oo.prototype.am=function(e,t,o,n,i,s){const r=32767&t,a=t>>15;for(;--s>=0;){let t=32767&this[e];const s=this[e++]>>15,c=a*t+s*r;t=r*t+((32767&c)<<15)+o[n]+(1073741823&i),i=(t>>>30)+(c>>>15)+a*s+(i>>>30),o[n++]=1073741823&t}return i},io=30):so&&"Netscape"!==navigator.appName?(oo.prototype.am=function(e,t,o,n,i,s){for(;--s>=0;){const s=t*this[e++]+o[n]+i;i=Math.floor(s/67108864),o[n++]=67108863&s}return i},io=26):(oo.prototype.am=function(e,t,o,n,i,s){const r=16383&t,a=t>>14;for(;--s>=0;){let t=16383&this[e];const s=this[e++]>>14,c=a*t+s*r;t=r*t+((16383&c)<<14)+o[n]+i,i=(t>>28)+(c>>14)+a*s,o[n++]=268435455&t}return i},io=28),oo.prototype.DB=io,oo.prototype.DM=(1<<io)-1,oo.prototype.DV=1<<io,oo.prototype.FV=Math.pow(2,52),oo.prototype.F1=52-io,oo.prototype.F2=2*io-52;const ro=new Array;let ao,co;for(ao="0".charCodeAt(0),co=0;co<=9;++co)ro[ao++]=co;for(ao="a".charCodeAt(0),co=10;co<36;++co)ro[ao++]=co;for(ao="A".charCodeAt(0),co=10;co<36;++co)ro[ao++]=co;function uo(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function lo(e,t){var o=ro[e.charCodeAt(t)];return null==o?-1:o}function po(e){var t=no();return t.fromInt(e),t}function ho(e){var t,o=1;return 0!=(t=e>>>16)&&(e=t,o+=16),0!=(t=e>>8)&&(e=t,o+=8),0!=(t=e>>4)&&(e=t,o+=4),0!=(t=e>>2)&&(e=t,o+=2),0!=(t=e>>1)&&(e=t,o+=1),o}function mo(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}mo.prototype.convert=function(e){var t=no();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(oo.ZERO)>0&&this.m.subTo(t,t),t},mo.prototype.revert=function(e){var t=no();return e.copyTo(t),this.reduce(t),t},mo.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var o=32767&e[t],n=o*this.mpl+((o*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[o=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},mo.prototype.mulTo=function(e,t,o){e.multiplyTo(t,o),this.reduce(o)},mo.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},oo.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},oo.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},oo.prototype.fromString=function(e,t){let o;if(16===t)o=4;else if(8===t)o=3;else if(2===t)o=1;else if(32===t)o=5;else{if(4!==t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");o=2}this.t=0,this.s=0;let n=e.length,i=!1,s=0;for(;--n>=0;){const t=lo(e,n);t<0?"-"===e.charAt(n)&&(i=!0):(i=!1,0===s?this[this.t++]=t:s+o>this.DB?(this[this.t-1]|=(t&(1<<this.DB-s)-1)<<s,this[this.t++]=t>>this.DB-s):this[this.t-1]|=t<<s,s+=o,s>=this.DB&&(s-=this.DB))}this.clamp(),i&&oo.ZERO.subTo(this,this)},oo.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},oo.prototype.dlShiftTo=function(e,t){let o;for(o=this.t-1;o>=0;--o)t[o+e]=this[o];for(o=e-1;o>=0;--o)t[o]=0;t.t=this.t+e,t.s=this.s},oo.prototype.drShiftTo=function(e,t){for(let o=e;o<this.t;++o)t[o-e]=this[o];t.t=Math.max(this.t-e,0),t.s=this.s},oo.prototype.lShiftTo=function(e,t){const o=e%this.DB,n=this.DB-o,i=(1<<n)-1;let s,r=Math.floor(e/this.DB),a=this.s<<o&this.DM;for(s=this.t-1;s>=0;--s)t[s+r+1]=this[s]>>n|a,a=(this[s]&i)<<o;for(s=r-1;s>=0;--s)t[s]=0;t[r]=a,t.t=this.t+r+1,t.s=this.s,t.clamp()},oo.prototype.rShiftTo=function(e,t){t.s=this.s;const o=Math.floor(e/this.DB);if(o>=this.t)return void(t.t=0);const n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[o]>>n;for(let e=o+1;e<this.t;++e)t[e-o-1]|=(this[e]&s)<<i,t[e-o]=this[e]>>n;n>0&&(t[this.t-o-1]|=(this.s&s)<<i),t.t=this.t-o,t.clamp()},oo.prototype.subTo=function(e,t){let o=0,n=0,i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]-e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n-=e[o],t[o++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[o++]=this.DV+n:n>0&&(t[o++]=n),t.t=o,t.clamp()},oo.prototype.multiplyTo=function(e,t){const o=this.abs(),n=e.abs();let i=o.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+o.t]=o.am(0,n[i],t,i,0,o.t);t.s=0,t.clamp(),this.s!==e.s&&oo.ZERO.subTo(t,t)},oo.prototype.squareTo=function(e){for(var t=this.abs(),o=e.t=2*t.t;--o>=0;)e[o]=0;for(o=0;o<t.t-1;++o){var n=t.am(o,t[o],e,2*o,0,1);(e[o+t.t]+=t.am(o+1,2*t[o],e,2*o+1,n,t.t-o-1))>=t.DV&&(e[o+t.t]-=t.DV,e[o+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(o,t[o],e,2*o,0,1)),e.s=0,e.clamp()},oo.prototype.divRemTo=function(e,t,o){var n=e.abs();if(n.t<=0)return;var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=o&&this.copyTo(o));null===o&&(o=no());var s=no(),r=this.s,a=e.s,c=this.DB-ho(n[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,o)):(n.copyTo(s),i.copyTo(o));const d=s.t,u=s[d-1];if(0===u)return;const l=u*(1<<this.F1)+(d>1?s[d-2]>>this.F2:0),p=this.FV/l,h=(1<<this.F1)/l,m=1<<this.F2;let E=o.t,g=E-d,f=null===t?no():t;for(s.dlShiftTo(g,f),o.compareTo(f)>=0&&(o[o.t++]=1,o.subTo(f,o)),oo.ONE.dlShiftTo(d,f),f.subTo(s,s);s.t<d;)s[s.t++]=0;for(;--g>=0;){var y=o[--E]===u?this.DM:Math.floor(o[E]*p+(o[E-1]+m)*h);if((o[E]+=s.am(0,y,o,g,0,d))<y)for(s.dlShiftTo(g,f),o.subTo(f,o);o[E]<--y;)o.subTo(f,o)}null!==t&&(o.drShiftTo(d,t),r!==a&&oo.ZERO.subTo(t,t)),o.t=d,o.clamp(),c>0&&o.rShiftTo(c,o),r<0&&oo.ZERO.subTo(o,o)},oo.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},oo.prototype.addTo=function(e,t){let o=0,n=0,i=Math.min(e.t,this.t);for(;o<i;)n+=this[o]+e[o],t[o++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;o<this.t;)n+=this[o],t[o++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;o<e.t;)n+=e[o],t[o++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[o++]=n:n<-1&&(t[o++]=this.DV+n),t.t=o,t.clamp()},oo.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else{if(4!==e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}let o,n=(1<<t)-1,i=!1,s="",r=this.t,a=this.DB-r*this.DB%t;if(r-- >0)for(a<this.DB&&(o=this[r]>>a)>0&&(i=!0,s=uo(o));r>=0;)a<t?(o=(this[r]&(1<<a)-1)<<t-a,o|=this[--r]>>(a+=this.DB-t)):(o=this[r]>>(a-=t)&n,a<=0&&(a+=this.DB,--r)),o>0&&(i=!0),i&&(s+=uo(o));return i?s:"0"},oo.prototype.negate=function(){var e=no();return oo.ZERO.subTo(this,e),e},oo.prototype.abs=function(){return this.s<0?this.negate():this},oo.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var o=this.t;if(0!=(t=o-e.t))return this.s<0?-t:t;for(;--o>=0;)if(0!=(t=this[o]-e[o]))return t;return 0},oo.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ho(this[this.t-1]^this.s&this.DM)},oo.prototype.mod=function(e){var t=no();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(oo.ZERO)>0&&e.subTo(t,t),t},oo.prototype.equals=function(e){return 0===this.compareTo(e)},oo.prototype.add=function(e){var t=no();return this.addTo(e,t),t},oo.prototype.subtract=function(e){var t=no();return this.subTo(e,t),t},oo.prototype.multiply=function(e){var t=no();return this.multiplyTo(e,t),t},oo.prototype.divide=function(e){var t=no();return this.divRemTo(e,t,null),t},oo.prototype.modPow=function(e,t,o){let n,i=e.bitLength(),s=po(1),r=new mo(t);if(i<=0)return s;n=i<18?1:i<48?3:i<144?4:i<768?5:6;let a=new Array,c=3,d=n-1,u=(1<<n)-1;if(a[1]=r.convert(this),n>1){const e=no();for(r.sqrTo(a[1],e);c<=u;)a[c]=no(),r.mulTo(e,a[c-2],a[c]),c+=2}let l,p,h=e.t-1,m=!0,E=no();for(i=ho(e[h])-1;h>=0;){for(i>=d?l=e[h]>>i-d&u:(l=(e[h]&(1<<i+1)-1)<<d-i,h>0&&(l|=e[h-1]>>this.DB+i-d)),c=n;0==(1&l);)l>>=1,--c;if((i-=c)<0&&(i+=this.DB,--h),m)a[l].copyTo(s),m=!1;else{for(;c>1;)r.sqrTo(s,E),r.sqrTo(E,s),c-=2;c>0?r.sqrTo(s,E):(p=s,s=E,E=p),r.mulTo(E,a[l],s)}for(;h>=0&&0==(e[h]&1<<i);)r.sqrTo(s,E),p=s,s=E,E=p,--i<0&&(i=this.DB-1,--h)}var g=r.revert(s);return o(null,g),g},oo.ZERO=po(0),oo.ONE=po(1);const Eo={convert:e=>(new TextEncoder).encode(e)},go={},fo={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),go[e]=t,fo[t]=e}const yo=e=>{if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2){const n=e.slice(o,o+2).toLowerCase();if(!(n in fo))throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`);t[o/2]=fo[n]}return t},xo=e=>{let t="";for(let o=0;o<e.byteLength;o++)t+=go[e[o]];return t},Io=e=>{const t=new Nt;t.update(e);const o=t.digestSync(),n=xo(o);return new Array(64-n.length).join("0")+n},vo=e=>Io(yo(e)),wo=/^[89a-f]/i,So=e=>{if(!(e instanceof oo))throw new Error("Not a BigInteger");const t=e.compareTo(oo.ZERO)<0;let o=e.abs().toString(16);if(o=o.length%2!=0?`0${o}`:o,o=wo.test(o)?`00${o}`:o,t){const e=o.split("").map((e=>{const t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)})).join("");o=new oo(e,16).add(oo.ONE).toString(16),o.toUpperCase().startsWith("FF8")&&(o=o.substring(2))}return o};class Co{constructor(e,t){this.words=[];let o=e;o=this.words=o||[],this.sigBytes=void 0!==t?t:4*o.length}random(e){const t=[];for(let o=0;o<e;o+=4)t.push(L().getRandomValues(new Uint32Array(1))[0]);return new Co(t,e)}toString(){return function(e){const t=e.words,o=e.sigBytes,n=[];for(let e=0;e<o;e++){const o=t[e>>>2]>>>24-e%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")}(this)}}const Ao=e=>{const t=(new Co).random(e).toString();return yo(t)};class Ro{constructor({userPoolName:e,a:t,g:o,A:n,N:i}){this.encoder=Eo,this.userPoolName=e,this.a=t,this.g=o,this.A=n,this.N=i,this.k=new oo(vo(`${So(i)}${So(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new Ge({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new Ge({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new Ge({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=to.convert(Ao(40));const o=`${e}${t}:${this.randomPassword}`,n=Io(o),i=xo(Ao(16));return this.saltToHashDevices=So(new oo(i,16)),new Promise(((e,t)=>{this.g.modPow(new oo(vo(this.saltToHashDevices+n),16),this.N,((o,n)=>{o?t(o):(this.verifierDevices=So(n),e())}))}))}async getPasswordAuthenticationKey({username:e,password:t,serverBValue:o,salt:n}){if(o.mod(this.N).equals(oo.ZERO))throw new Error("B cannot be zero.");const i=(({A:e,B:t})=>{const o=new oo(vo(So(e)+So(t)),16);if(o.equals(oo.ZERO))throw new Error("U cannot be zero.");return o})({A:this.A,B:o}),s=`${this.userPoolName}${e}:${t}`,r=Io(s),a=new oo(vo(So(n)+r),16),c=await(async({a:e,g:t,k:o,x:n,B:i,N:s,U:r})=>new Promise(((a,c)=>{t.modPow(n,s,((t,d)=>{t?c(t):i.subtract(o.multiply(d)).modPow(e.add(r.multiply(n)),s,((e,t)=>{e?c(e):a(t.mod(s))}))}))})))({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:i}),d=this.encoder.convert("Caldera Derived Key"),u=this.encoder.convert(String.fromCharCode(1)),l=new Uint8Array(d.byteLength+u.byteLength);l.set(d,0),l.set(u,d.byteLength);const p=((e,t,o)=>{const n=new Nt(t);n.update(e);const i=n.digestSync(),s=new Nt(i);return s.update(o),s.digestSync().slice(0,16)})(yo(So(c)),yo(So(i)),l);return p}}const To=async e=>{const t=new oo("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),o=new oo("2",16),n=Po(),i=await(async({a:e,g:t,N:o})=>new Promise(((n,i)=>{t.modPow(e,o,((e,t)=>{e?i(e):t.mod(o).equals(oo.ZERO)?i(new Error("Illegal parameter. A mod N cannot be 0.")):n(t)}))})))({a:n,g:o,N:t});return new Ro({userPoolName:e,a:n,g:o,A:i,N:t})},Po=()=>new oo(xo(Ao(128)),16),bo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],No=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Uo=()=>{const e=new Date,t=No[e.getUTCDay()],o=bo[e.getUTCMonth()],n=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();return r<10&&(r=`0${r}`),`${t} ${o} ${n} ${i}:${s}:${r} UTC ${e.getUTCFullYear()}`},_o=({userPoolName:e,username:t,challengeParameters:o,dateNow:n,hkdf:i})=>{const s=Eo.convert(e),r=Eo.convert(t),a=Fo(o.SECRET_BLOCK),c=Eo.convert(n),d=new Uint8Array(s.byteLength+r.byteLength+a.byteLength+c.byteLength);d.set(s,0),d.set(r,s.byteLength),d.set(a,s.byteLength+r.byteLength),d.set(c,s.byteLength+r.byteLength+a.byteLength);const u=new Nt(i);u.update(d);const l=u.digestSync();return to.convert(l)},Fo=e=>{const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),o=O.convert(t),n=new Uint8Array(o.length);for(let e=0;e<o.length;++e)n[e]=o.charCodeAt(e);return n};var Do,ko,Mo,Lo,Oo,Bo,qo,Vo,Ko,$o,Ho,Go,zo,Wo,jo,Jo,Yo,Zo,Qo,Xo,en,tn,on,nn;!function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"}(Do||(Do={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(ko||(ko={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Mo||(Mo={})),function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Lo||(Lo={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(Oo||(Oo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Bo||(Bo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(qo||(qo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Vo||(Vo={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(Ko||(Ko={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}($o||($o={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(Ho||(Ho={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(Go||(Go={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(zo||(zo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"}(Wo||(Wo={})),function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(jo||(jo={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(Jo||(Jo={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Yo||(Yo={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Zo||(Zo={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"}(Qo||(Qo={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(Xo||(Xo={})),function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(en||(en={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(tn||(tn={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(on||(on={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(nn||(nn={}));const sn=(e=>{let t=e({username:void 0,challengeName:void 0,signInSession:void 0},{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:o=>{t=e(t,o)}}})(((e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return{username:void 0,challengeName:void 0,signInSession:void 0};default:return e}}));function rn(e){sn.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function an(){sn.dispatch({type:"SET_INITIAL_STATE"})}const cn=async()=>(async e=>{const t=e.getConfig().Auth?.Cognito;B(t);const o=await e.Auth.getTokens({forceRefresh:!1});!function(e){if(!e||!e.accessToken)throw new Ge({name:nt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(o);const{"cognito:username":n,sub:i}=o.idToken?.payload??{},s={username:n,userId:i},r=function(e){return e?.signInDetails}(o);return r&&(s.signInDetails=r),s})(C),dn=(e,t)=>Ve({category:he.Auth,action:e,...t}),un="userAttributes.";async function ln(e,t,o,n,i){const{userPoolClientId:s,userPoolId:r}=n,a={USERNAME:e,PASSWORD:t},c=await i.getDeviceMetadata(e);c&&c.deviceKey&&(a.DEVICE_KEY=c.deviceKey);const d={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:o,ClientId:s,UserContextData:ut({username:e,userPoolId:r,userPoolClientId:s})},u=await Ye({region:tt(r),userAgentValue:dn(ge.SignIn)},d),l=u.ChallengeParameters?.USERNAME??u.ChallengeParameters?.USER_ID_FOR_SRP??e;return Cn(l),"DEVICE_SRP_AUTH"===u.ChallengeName?hn({username:l,config:n,clientMetadata:o,session:u.Session,tokenOrchestrator:i}):u}async function pn(e,t,o,n){const{userPoolClientId:i,userPoolId:s}=o,r={USERNAME:e},a=await n.getDeviceMetadata(e);a&&a.deviceKey&&(r.DEVICE_KEY=a.deviceKey);const c={AuthFlow:"CUSTOM_AUTH",AuthParameters:r,ClientMetadata:t,ClientId:i,UserContextData:ut({username:e,userPoolId:s,userPoolClientId:i})},d=await Ye({region:tt(s),userAgentValue:dn(ge.SignIn)},c),u=d.ChallengeParameters?.USERNAME??e;return Cn(u),"DEVICE_SRP_AUTH"===d.ChallengeName?hn({username:u,config:o,clientMetadata:t,session:d.Session,tokenOrchestrator:n}):d}async function hn({username:e,config:t,clientMetadata:o,session:n,tokenOrchestrator:i}){const s=t.userPoolId,r=t.userPoolClientId,a=await(i?.getDeviceMetadata(e));ct(a);const c=await To(a.deviceGroupKey),d={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r,ChallengeResponses:{USERNAME:e,SRP_A:c.A.toString(16),DEVICE_KEY:a.deviceKey},ClientMetadata:o,Session:n},{ChallengeParameters:u,Session:l}=await Qe({region:tt(s)},d);return async function(e,t,o,n,i,{userPoolId:s,userPoolClientId:r},a){const c=await(a?.getDeviceMetadata(e));ct(c);const d=new oo(t?.SRP_B,16),u=new oo(t?.SALT,16),l=c.deviceKey,p=c.deviceGroupKey,h=await i.getPasswordAuthenticationKey({username:c.deviceKey,password:c.randomPassword,serverBValue:d,salt:u}),m=Uo(),E={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:{USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:m,PASSWORD_CLAIM_SIGNATURE:_o({username:l,userPoolName:p,challengeParameters:t,dateNow:m,hkdf:h}),DEVICE_KEY:l},Session:n,ClientMetadata:o,UserContextData:ut({username:e,userPoolId:s,userPoolClientId:r})};return Qe({region:tt(s)},E)}(e,u,o,l,c,t,i)}async function mn(e,t,o,n,i,s,r){const{userPoolId:a,userPoolClientId:c}=s,d=a?.split("_")[1]||"",u=new oo(t?.SRP_B,16),l=new oo(t?.SALT,16),p=t?.USER_ID_FOR_SRP;if(!p)throw new Ge({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const h=await i.getPasswordAuthenticationKey({username:p,password:e,serverBValue:u,salt:l}),m=Uo(),E={USERNAME:p,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:m,PASSWORD_CLAIM_SIGNATURE:_o({username:p,userPoolName:d,challengeParameters:t,dateNow:m,hkdf:h})},g=await r.getDeviceMetadata(p);g&&g.deviceKey&&(E.DEVICE_KEY=g.deviceKey);const f={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:E,ClientMetadata:o,Session:n,ClientId:c,UserContextData:ut({username:p,userPoolId:a,userPoolClientId:c})},y=await Qe({region:tt(a)},f);return"DEVICE_SRP_AUTH"===y.ChallengeName?hn({username:p,config:s,clientMetadata:o,session:y.Session,tokenOrchestrator:r}):y}async function En(e){const{challengeName:t,challengeParameters:o}=e,n=C.getConfig().Auth?.Cognito;switch(B(n),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:o}};case"MFA_SETUP":const{signInSession:e,username:t}=sn.getState();if(!function(e,t){const{MFAS_CAN_SETUP:o}=e,n=In(vn(o));return!!n&&n.includes("TOTP")}(o))throw new Ge({name:Zt.SignInException,message:`Cannot initiate MFA setup from available types: ${In(vn(o.MFAS_CAN_SETUP))}`});const{Session:i,SecretCode:s}=await Xe({region:tt(n.userPoolId)},{Session:e});return sn.dispatch({type:"SET_SIGN_IN_SESSION",value:i}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:gn(s,t)}};case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:yn(o.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:In(vn(o.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:o.CODE_DELIVERY_DELIVERY_MEDIUM,destination:o.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new Ge({name:Zt.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function gn(e,t){return{sharedSecret:e,getSetupUri:(o,n)=>new le(`otpauth://totp/${o}:${n??t}?secret=${e}&issuer=${o}`)}}function fn(e){return e===jo.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===jo.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function yn(e){return e?JSON.parse(e).map((e=>e.includes(un)?e.replace(un,""):e)):[]}function xn(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":void 0}function In(e){if(e)return e.map(xn).filter(Boolean)}function vn(e){return e?JSON.parse(e):[]}async function wn(e,t,o){if(!t)return;const n=e.split("_")[1]||"",i=await To(n),s=t?.DeviceKey,r=t?.DeviceGroupKey;try{await i.generateHashDevice(r??"",s??"")}catch(e){return}const a={Salt:to.convert(yo(i.getSaltToHashDevices())),PasswordVerifier:to.convert(yo(i.getVerifierDevices()))},c=i.getRandomPassword();try{return await et({region:tt(e)},{AccessToken:o,DeviceKey:t?.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:s,deviceGroupKey:r,randomPassword:c}}catch(e){return}}async function Sn(e,t,o,n){try{return await e(...t)}catch(i){if(i instanceof Ge&&"ResourceNotFoundException"===i.name&&i.message.includes("Device does not exist."))return await n.clearDeviceMetadata(o),await e(...t);throw i}}function Cn(e){const{dispatch:t}=sn;t({type:"SET_USERNAME",value:e})}function An(e){return sn.getState().username??e}async function Rn(e){if(!e.AccessToken)throw new u({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"});{const t=V(e.AccessToken),o=1e3*(t.payload.iat||0),n=(new Date).getTime(),i=o>0?o-n:0;let s,r,a;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=V(e.IdToken)),e?.NewDeviceMetadata&&(a=e.NewDeviceMetadata);const c={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:a,username:e.username};e?.signInDetails&&(c.signInDetails=e.signInDetails),await It.setTokens({tokens:c})}}async function Tn(e){const t=e.options?.authFlowType;switch(await async function(){let e;try{e=await cn()}catch(e){}if(e&&e.userId&&e.username)throw new Ge({name:"UserAlreadyAuthenticatedException",message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}(),t){case"USER_SRP_AUTH":default:return async function(e){const{username:t,password:o}=e,n=C.getConfig().Auth?.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};B(n);const s=e.options?.clientMetadata;Xt(!!t,Wt.EmptySignInUsername),Xt(!!o,Wt.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:r,AuthenticationResult:a,Session:c}=await async function(e,t,o,n,i){const{userPoolId:s,userPoolClientId:r}=n,a=s?.split("_")[1]||"",c=await To(a),d={AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16)},ClientMetadata:o,ClientId:r,UserContextData:ut({username:e,userPoolId:s,userPoolClientId:r})},u=await Ye({region:tt(s),userAgentValue:dn(ge.SignIn)},d),{ChallengeParameters:l,Session:p}=u,h=l?.USERNAME??e;return Cn(h),Sn(mn,[t,l,o,p,c,n,i],h,i)}(t,o,s,n,It),d=An(t);return rn({signInSession:c,username:d,challengeName:e,signInDetails:i}),a?(an(),await Rn({username:d,...a,NewDeviceMetadata:await wn(n.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:i}),m.dispatch("auth",{event:"signedIn",data:await cn()},"Auth",l),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):En({challengeName:e,challengeParameters:r})}catch(e){an(),ze(e);const t=fn(e.name);if(t)return t;throw e}}(e);case"USER_PASSWORD_AUTH":return async function(e){const{username:t,password:o,options:n}=e,i=C.getConfig().Auth?.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};B(i);const r=n?.clientMetadata;Xt(!!t,Wt.EmptySignInUsername),Xt(!!o,Wt.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:a,Session:c}=await Sn(ln,[t,o,r,i,It],t,It),d=An(t);return rn({signInSession:c,username:d,challengeName:e,signInDetails:s}),a?(await Rn({...a,username:d,NewDeviceMetadata:await wn(i.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:s}),an(),m.dispatch("auth",{event:"signedIn",data:await cn()},"Auth",l),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):En({challengeName:e,challengeParameters:n})}catch(e){an(),ze(e);const t=fn(e.name);if(t)return t;throw e}}(e);case"CUSTOM_WITHOUT_SRP":return async function(e){const t=C.getConfig().Auth?.Cognito;B(t);const{username:o,password:n,options:i}=e,s={loginId:o,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i?.clientMetadata;Xt(!!o,Wt.EmptySignInUsername),Xt(!n,Wt.CustomAuthSignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:i,Session:a}=await Sn(pn,[o,r,t,It],o,It),c=An(o);return rn({signInSession:a,username:c,challengeName:e,signInDetails:s}),i?(an(),await Rn({username:c,...i,NewDeviceMetadata:await wn(t.userPoolId,i.NewDeviceMetadata,i.AccessToken),signInDetails:s}),m.dispatch("auth",{event:"signedIn",data:await cn()},"Auth",l),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):En({challengeName:e,challengeParameters:n})}catch(e){an(),ze(e);const t=fn(e.name);if(t)return t;throw e}}(e);case"CUSTOM_WITH_SRP":return async function(e){const{username:t,password:o,options:n}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=C.getConfig().Auth?.Cognito;B(s);const r=n?.clientMetadata;Xt(!!t,Wt.EmptySignInUsername),Xt(!!o,Wt.EmptySignInPassword);try{const{ChallengeName:e,ChallengeParameters:n,AuthenticationResult:a,Session:c}=await async function(e,t,o,n,i){B(n);const{userPoolId:s,userPoolClientId:r}=n,a=s?.split("_")[1]||"",c=await To(a),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:{USERNAME:e,SRP_A:c.A.toString(16),CHALLENGE_NAME:"SRP_A"},ClientMetadata:o,ClientId:r,UserContextData:ut({username:e,userPoolId:s,userPoolClientId:r})},{ChallengeParameters:u,Session:l}=await Ye({region:tt(s),userAgentValue:dn(ge.SignIn)},d),p=u?.USERNAME??e;return Cn(p),Sn(mn,[t,u,o,l,c,n,i],p,i)}(t,o,r,s,It),d=An(t);return rn({signInSession:c,username:d,challengeName:e,signInDetails:i}),a?(await Rn({username:d,...a,NewDeviceMetadata:await wn(s.userPoolId,a.NewDeviceMetadata,a.AccessToken),signInDetails:i}),an(),m.dispatch("auth",{event:"signedIn",data:await cn()},"Auth",l),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):En({challengeName:e,challengeParameters:n})}catch(e){an(),ze(e);const t=fn(e.name);if(t)return t;throw e}}(e)}}const Pn=async()=>{throw new Ge({name:st,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})};let bn=null;function Nn(e){bn=e}function Un(){bn=Pn}const _n=18e4;function Fn(e,t){let o;return function(n){o||e(...n),clearTimeout(o),o=setTimeout((()=>{o=void 0}),t)}}const Dn=Fn((function(e,t,o){const n=Date.now(),i=setInterval((async()=>{if(Date.now()-n>_n)return clearInterval(i),qn(!1),o(new Ge({name:st,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),void Un();try{const o=await Tn(e);if("CONFIRM_SIGN_UP"!==o.nextStep.signInStep)return t(o),clearInterval(i),qn(!1),void Un()}catch(e){clearInterval(i),qn(!1),o(e),Un()}}),5e3)}),300),kn=Fn((async function(e,t,o){try{t(await Tn(e)),Un()}catch(e){o(e),Un()}}),300);let Mn,Ln=!1;function On(e){Mn=e}function Bn(){return Ln}function qn(e){!1===e&&On(void 0),Ln=e}function Vn(e){return!!e.UserConfirmed}function Kn(e){return async()=>new Promise((async(t,o)=>{kn([e,t,o])}))}const $n=Kn;async function Hn(e){const{username:t,password:o,options:n}=e,i=C.getConfig().Auth?.Cognito,s=i?.signUpVerificationMethod??"code",{clientMetadata:r,validationData:a,autoSignIn:c}=e.options??{};B(i),Xt(!!t,Wt.EmptySignUpUsername),Xt(!!o,Wt.EmptySignUpPassword);const d="boolean"!=typeof c?c:void 0,u={username:t,options:d};"CUSTOM_WITHOUT_SRP"!==d?.authFlowType&&(u.password=o),(d||!0===c)&&(On(t),qn(!0));const l=await Ze({region:tt(i.userPoolId),userAgentValue:dn(ge.SignUp)},{Username:t,Password:o,UserAttributes:n?.userAttributes&&eo(n?.userAttributes),ClientMetadata:r,ValidationData:a&&eo(a),ClientId:i.userPoolClientId}),{UserSub:p,CodeDeliveryDetails:h}=l;if(Vn(l)&&Bn())return Nn($n(u)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}};if(Vn(l)&&!Bn())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Vn(l)&&Bn()&&"code"===s)!function(e){const t=E.listen("auth-internal",(async({payload:o})=>{if("confirmSignUp"===o.event){const n=o.data;n?.isSignUpComplete&&(E.dispatch("auth-internal",{event:"autoSignIn"}),Nn(Kn(e)),t())}})),o=setTimeout((()=>{t(),qn(!1),clearTimeout(o),Un()}),_n)}(u);else if(!Vn(l)&&Bn()&&"link"===s)return Nn(function(e){return async()=>new Promise((async(t,o)=>{Dn([e,t,o])}))}(u)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:h?.DeliveryMedium,destination:h?.Destination,attributeName:h?.AttributeName}},userId:p};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:h?.DeliveryMedium,destination:h?.Destination,attributeName:h?.AttributeName}},userId:p}}zt.configure({Auth:{Cognito:{userPoolId:"us-west-2_98u65X5GV",userPoolClientId:"28eomo5pfl4tsavbn9rha1t3tn"}}});const Gn=zt.getConfig();console.log(Gn);const zn=window.matchMedia("(max-width: 375px)"),Wn=document.querySelector(".top-cont"),jn=document.querySelector(".courses"),Jn=document.querySelector(".add-new"),Yn=document.querySelector(".addC-modal"),Zn=document.getElementById("addCourseBtn"),Qn=document.getElementById("addCourseName"),Xn=document.getElementById("addTotalHours"),ei=document.getElementById("addCurrHours"),ti=document.getElementById("addProgress"),oi=document.querySelector(".jump-down"),ni=document.querySelector(".sort-icon"),ii=document.getElementById("sortCriteria"),si=document.getElementById("ascend-icon"),ri=document.getElementById("descend-icon"),ai=document.querySelector(".modal-edit"),ci=document.getElementById("courseNameE"),di=document.getElementById("totalHoursE"),ui=document.getElementById("totalHoursC"),li=document.getElementById("percentCompE"),pi=document.getElementById("editCourseBtn"),hi=document.getElementById("toggle-completed"),mi=document.getElementById("displayType"),Ei=document.getElementById("colorScheme"),gi=document.querySelector(".login"),fi=document.querySelector(".authd"),yi=document.querySelector(".modal-login"),xi=document.querySelector(".code-wrapper"),Ii=document.querySelector(".cloud-icon"),vi=document.querySelector(".close"),wi=document.querySelector(".closeEdit"),Si=document.querySelector(".closeLogin"),Ci=document.querySelector(".ultra-cont"),Ai=document.querySelector(".message-cont"),Ri=document.querySelector(".addLink"),Ti=document.querySelector(".sampleLink"),Pi=document.querySelector(".current-hours"),bi=document.querySelector(".all-hours"),Ni=document.querySelector(".remaining-hours"),Ui=document.querySelector(".completion-percent"),_i=document.querySelector(".remaining-percent"),Fi=document.getElementById("pieChart"),Di=document.querySelector(".pie-label"),ki=document.getElementById("columnChart");let Mi={courses:[],displayCourses:[],hiddenCourses:[],currentEdit:null,showCompleted:!0,total:0,colors:"dark",sortCriteria:"percent",ascending:!0,id:0,verified:!1};Mi.verified?(gi.style.display="none",Ii.style.display="flex",fi.style.display="block"):(gi.style.display="block",Ii.style.display="none",fi.style.display="none"),gi.addEventListener("click",(()=>(yi.style.display="block",document.querySelector(".regBtn").addEventListener("click",(e=>{e.preventDefault(),async function({email:e,password:t}){try{const{isSignUpComplete:o,userId:n,nextStep:i}=await Hn({username:e,password:t,options:{userAttributes:{email:e}}});console.log(n),function(){const e=document.getElementById("confirmation-codes");xi.style.display="block";for(let t=0;t<6;t++){const t=document.createElement("input");t.type="text",t.maxLength="1",t.classList.add("code-input"),e.appendChild(t)}document.createElement("button")}()}catch(e){console.log(e)}}({email:document.getElementById("emailText").value,password:document.getElementById("passwordText").value})})),void document.querySelector(".loginBtn").addEventListener("click",(e=>{e.preventDefault(),async function({email:e,password:t}){console.log(e,t);const o=e;try{const{isSignedIn:e,nextStep:n}=await Tn({username:o,password:t})}catch(e){console.log("Error",e)}}({email:document.getElementById("emailText").value,password:document.getElementById("passwordText").value})})))));class Li{constructor(e,t,o){this.name=e,this.id=function(){const e=Mi.id+1;return Mi.id=e,e}(),this.totalHours=t,this.progress=o,Mi.courses.push(this),Mi.displayCourses.push(this),Mi.total+=t}completedHours(){return Math.round(this.progress/100*this.totalHours*100)/100}remainingHours(){return Math.round(100*(this.totalHours-this.completedHours()))/100}percent(){return(this.completedHours()/Mi.total*100).toFixed(2)}percentOfTotal(){return(this.totalHours/Mi.total*100).toFixed(2)}}class Oi extends Li{constructor(e,t,o){super(e,t,o),Yi()}render(){this.progressColor=n(this.progress),this.colorR=e(this.remainingHours()),this.element=document.createElement("div"),this.element.className="course-line",100===this.progress&&(this.element.style.backgroundColor="var(--highlight-color)",this.complete=!0),this.element.innerHTML=`\n    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="minus-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg>\n    <div class="course-details">\n     <div class="detail-text"><div class="text1"> <span style="color: ${this.complete?"var(--text-color)":this.progressColor};">${this.progress}%</span> of the ${this.totalHours}-hour ${this.name} course has been completed, which is roughly ${this.completedHours()} hours.</div><div class="text2"> <span style="color: ${this.complete?"var(--text-color)":this.colorR};">${this.remainingHours().toFixed(2)}</span> hours remain for this course.\n    </div></div></div>\n    <div class="course-percent-text">${this.percent()}% completed out of ${this.percentOfTotal()}% of the entire courseload</div>\n    <div class="course-actions">\n      <button class="reset-button">Reset</button>\n      <button class="edit-button">Edit</button>\n    </div>\n  `}renderSimple(){var t;this.progressColor=n(this.progress),this.colorR=e(this.remainingHours()),this.colorC=e(this.completedHours()),this.element=document.createElement("div"),this.simplePerc=function(e){let t=e.toString();switch(t.length){case 1:return t+="&nbsp;&nbsp;",t;case 2:return t+="&nbsp;",t;default:return t}}(this.progress),this.simpleCompleted=i(this.completedHours().toFixed(2)),this.simpleRemaining=i(this.remainingHours().toFixed(2)),this.element.className="course-line",100===this.progress&&(this.element.style.backgroundColor="var(--highlight-color)",this.complete=!0),this.element.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="minus-icon"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />\n    </svg><div class="name-small">${t=this.name,t.length>19?t.substring(0,19)+"...":t}</div>\n    <div class="course-details alternate">\n    <div class="detail-simple">\n    <div class="nameBox">${this.name}</div>\n    <div class="percBox"><span style="color: ${this.complete?"var(--text-color)":this.progressColor};">${this.simplePerc}%</span></div>\n    <div class="currBox"><span style="color: ${this.complete?"var(--text-color)":this.colorC};">${this.simpleCompleted}</span>&nbsp;&nbsp;&nbsp;hours completed</div>\n    <div class="remBox"><span style="color: ${this.complete?"var(--text-color)":this.colorR};">${this.simpleRemaining}</span>&nbsp;&nbsp;&nbsp;hours remaining</div>\n    \n    </div></div>\n    <div class="course-percent">${this.percent()} / ${this.percentOfTotal()} %</div>\n    <div class="course-percent-small">${this.percent()}% out of ${this.percentOfTotal()}% of total</div>\n    <div class="course-actions">\n    <button class="reset-button">Reset</button>\n    <button class="edit-button">Edit</button>\n  </div>\n    `}delete(){var e,t;this.element.remove(),e=this.id,t=this.totalHours,Mi.total-=t,Mi.courses=Mi.courses.filter((t=>t.id!==e)),Mi.displayCourses=Mi.displayCourses.filter((t=>t.id!==e)),Mi.hiddenCourses=Mi.hiddenCourses.filter((t=>t.id!==e)),0===Mi.courses.length&&Ji(),Hi()}}class Bi{constructor(e){e.courses.length>=3&&(this.total=e.total,this.sortedCourses=[...e.courses].sort(((e,t)=>{const o=e.completedHours()/this.total*100;return t.completedHours()/this.total*100-o})),this.numberOfCourses=this.sortedCourses.length,this.thickness=Math.max(100/(2*this.numberOfCourses),5),this.render())}render(){ki.innerHTML='<span id="chartText" class="chart-text">Hours Completed</span>',zn.matches?this.columnHoriz(this.sortedCourses,this.thickness):this.columnVert(this.sortedCourses,this.thickness)}columnHoriz(e,t){console.log("horz"),ki.classList.remove("column-chart"),ki.classList.add("column-chartH"),e.forEach((e=>{const n=document.createElement("div"),i=document.createElement("div"),s=e.completedHours()/this.total*100;n.classList.add("column"),n.style.width=`${s}%`,n.style.height=`${t}%`,n.style.backgroundColor=o(s),i.classList.add("column-labelH"),i.textContent=e.name,n.appendChild(i),n.addEventListener("mouseenter",(()=>Qi(e.id))),ki.appendChild(n)}))}columnVert(e,n){const i=document.getElementById("chartText");ki.classList.remove("column-chartH"),ki.classList.add("column-chart"),e.forEach((e=>{const s=document.createElement("div"),r=document.createElement("div"),a=e.completedHours()/this.total*100;s.classList.add("column"),s.style.height=`${a}%`,s.style.width=`${n}%`,s.style.backgroundColor=o(a),r.classList.add("column-label"),r.textContent=function(e){const t=e.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("").match(/[A-Z]/g)||[];return t.length>=2?t.slice(0,3).join(""):e.substring(0,4)}(e.name),s.appendChild(r),s.addEventListener("mouseenter",(()=>{Qi(e.id),s.style.backgroundColor=t(a)})),s.addEventListener("mouseleave",(()=>s.style.backgroundColor=o(a))),ki.addEventListener("mouseleave",(()=>i.textContent="Hours Completed")),ki.appendChild(s)}))}}function qi(){jn.innerHTML="";const e=document.getElementById("displayType").value;let t;"basic-display"===e?t=e=>e.renderSimple():"text-display"===e&&(t=e=>e.render()),Mi.displayCourses.forEach((e=>{t(e);const o=document.createElement("li");o.appendChild(e.element);const n=o.querySelector(".minus-icon");o.querySelector(".reset-button").addEventListener("click",(()=>{var t;Wi(t=e.id,Mi.courses),Wi(t,Mi.displayCourses),Wi(t,Mi.hiddenCourses),Hi()})),o.querySelector(".edit-button").addEventListener("click",(()=>{!function(e){Mi.currentEdit=e;const t=Mi.courses.find((t=>t.id===e));ci.value=t.name,di.value=t.totalHours,ui.value=t.completedHours(),li.value=t.progress,ai.style.display="block",li.addEventListener("input",(function(){const e=Math.round(this.value/100*di.value*100)/100;ui.value=e})),ui.addEventListener("input",(function(){const e=Math.round(this.value/di.value*100*100)/100;li.value=e}))}(e.id)})),n.addEventListener("click",(()=>{e.delete(),console.log(Mi.courses,Mi.displayCourses)})),jn.appendChild(o)})),Zi()}function Vi(){Mi.ascending?(si.style.display="none",ri.style.display="inline"):(si.style.display="inline",ri.style.display="none")}function Ki(){$i(Mi.courses),$i(Mi.displayCourses),$i(Mi.hiddenCourses),Hi()}function $i(e){const t=ii.value;e.sort(((e,o)=>{let n,i;return"progress"===t?(n=e.progress,i=o.progress):(n=e.remainingHours(),i=o.remainingHours()),Mi.ascending?n-i:i-n}))}function Hi(){Mi.showCompleted?(Mi.hiddenCourses.forEach((e=>{Mi.displayCourses.push(e)})),Mi.hiddenCourses=[]):(Mi.displayCourses.forEach((e=>{100===e.progress&&Mi.hiddenCourses.push(e)})),Mi.displayCourses=Mi.displayCourses.filter((e=>100!==e.progress))),qi()}function Gi(e){e.matches?Yn.classList.add("small-modal"):Yn.classList.remove("small-modal")}function zi(){Yn.style.display="block",ti.addEventListener("input",(function(){const e=Math.round(this.value/100*Xn.value*100)/100;ei.value=e})),ei.addEventListener("input",(function(){const e=Math.round(this.value/Xn.value*100*100)/100;ti.value=e}))}function Wi(e,t){Mi.currentEdit=e;const o=t.find((t=>t.id===e));o&&(o.progress=0)}function ji(){Qn.value="",Xn.value="",ei.value="",ti.value="",ci.value="",di.value="",ui.value="",li.value=""}function Ji(){Ci.classList.add("sampler"),Fi.style.display="none",Ai.style.display="flex",Wn.style.marginBottom="0rem",zn.removeEventListener("change",Gi),Yn.classList.remove("small-modal")}function Yi(){Ci.classList.remove("sampler"),Fi.style.display="flex",Ai.style.display="none",zn.addEventListener("change",Gi),Gi(zn)}function Zi(){let e=0,i=0,s=0,r=0;Mi.courses.forEach((e=>{r+=e.completedHours(),s+=e.remainingHours()})),0!==r&&(e=Math.round(r/Mi.total*1e4)/100,i=100-e),Pi.textContent=r.toFixed(2),bi.textContent=Mi.total.toFixed(2),Ni.textContent=s.toFixed(2),Ui.textContent=`${e.toFixed(2)}`,_i.textContent=`${i.toFixed(2)}`,Pi.style.color=t(Mi.total),bi.style.color=o(r),Ni.style.color=t(s),Ui.style.color=n(e),_i.style.color=n(i),function(e,t){const o=e/100*360,i=n(e),s=n(t);Fi.style.setProperty("--percent",`${o}deg`),Fi.style.setProperty("--color",i),Fi.style.setProperty("--color2",s),Di.textContent=`${e} %`}(e,i),Mi.courses.length>=3&&new Bi(Mi)}function Qi(e){const o=Mi.courses.find((t=>t.id===e)),i=document.getElementById("chartText");i.innerHTML="";const s=document.createElement("span");s.textContent=`   (${o.percent()}%)`,s.style.color=n(o.percent());const r=document.createElement("span");r.textContent=` -  ${o.completedHours()} hours`,r.style.color=t(o.completedHours()),i.textContent=`${o.name}`,i.appendChild(r),i.appendChild(s)}mi.addEventListener("change",qi),ni.addEventListener("click",(()=>{Mi.ascending=!Mi.ascending,Ki(),Vi()})),ii.addEventListener("change",(()=>{Ki(),Vi()})),hi.addEventListener("click",(()=>{Mi.showCompleted=!Mi.showCompleted,hi.className=Mi.showCompleted?"fas fa-toggle-on":"fas fa-toggle-off",Hi()})),Ei.addEventListener("change",(()=>{document.body.classList.remove("dark"),document.body.classList.remove("simple"),document.body.classList.remove("colorful");let e=Ei.value;document.body.classList.add(`${e}`)})),Jn.addEventListener("click",(()=>zi())),Ri.addEventListener("click",(()=>zi())),oi.addEventListener("click",(()=>{Fi.scrollIntoView({behavior:"smooth",block:"center"})})),Zn.addEventListener("click",(()=>{const e=document.getElementById("addCourseName").value,t=Number(document.getElementById("addTotalHours").value),o=Number(document.getElementById("addProgress").value);o>=0&&o<=100&&""!==e&&t>0?(new Oi(e,t,o),Hi(),Yn.style.display="none",ji(),console.log(Mi.courses,Mi.displayCourses)):o<0||o>100?(alert("Must enter a percentage from 0-100"),document.getElementById("addProgress").value="0"):""===e.trim()?alert("Must enter a course name"):alert("Must enter a value for total hours")})),pi.addEventListener("click",(()=>{const e=ci.value,t=Number(di.value),o=Number(li.value);""!==e.trim()&&t>0&&o>=0&&o<=100?([Mi.courses,Mi.displayCourses,Mi.hiddenCourses].forEach((n=>{!function(e,t,o,n,i){const s=e.findIndex((e=>e.id===t));-1!==s&&(e[s].name=o,e[s].totalHours=n,e[s].progress=i)}(n,Mi.currentEdit,e,t,o)})),ai.style.display="none",Hi()):o<0||o>100?(alert("Must enter a percentage from 0-100"),currentProgress.value="0"):""===e?alert("Must enter a course name"):t<=0&&alert("Must enter a value for total hours greater than 0")})),vi.addEventListener("click",(()=>{Yn.style.display="none",ji()})),wi.addEventListener("click",(()=>{ai.style.display="none",ji()})),Si.addEventListener("click",(()=>{yi.style.display="none",ji()})),window.onclick=e=>{e.target!==Yn&&e.target!==ai&&e.target!==yi||(Yn.style.display="none",ai.style.display="none",yi.style.display="none",ji())},Ti.addEventListener("click",(()=>{console.log("click");const e=config.API_URL;axios.get(e).then((e=>{const t=e.data.courses;console.log(t),t.forEach((e=>new Oi(e.name,e.totalHours,e.progress))),console.log(Mi.courses,Mi.displayCourses),Hi()})).catch((e=>{console.error("Error fetching courses:",e)})),Yi()})),Ii.addEventListener("click",(()=>{const e=document.querySelector(".authdUser").textContent,t=config.API_PUT_URL.replace("{id}",e);console.log(Mi.courses);const o=JSON.stringify(Mi.courses);axios.put(t,o).then((e=>console.log("Success:",e.data))).catch((e=>console.error("Error:",e)))})),Ji(),Zi()})();